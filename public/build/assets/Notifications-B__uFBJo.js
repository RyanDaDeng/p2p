import{r as x,h as w,c as h,o as a,w as f,a as e,f as o,l as g,n as k,F as C,s as M,q as p,t as l,p as $,B,K as j}from"./app-Ddr6hCNG.js";import{P as N}from"./P2PAppLayout-C1kqncps.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"min-h-screen bg-gray-50 dark:bg-gray-950 py-6"},F={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},V={class:"mb-4 flex gap-2"},z={key:0,class:"bg-white dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-800 divide-y divide-gray-200 dark:divide-gray-800 overflow-hidden"},D={class:"flex items-start gap-3"},H={class:"flex-shrink-0"},L={key:0,class:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center"},A={key:1,class:"w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center"},S={class:"flex-1 min-w-0"},T={class:"flex items-start justify-between"},q={class:"flex-1"},E={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},K={key:0,class:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"},G={key:0,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},I={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},J={class:"flex items-center gap-2 ml-4"},O={key:0,class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"},Q={key:1,class:"bg-white dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-800 p-12"},R={key:2,class:"mt-6 flex justify-center"},U={class:"flex items-center gap-2"},W=["disabled"],X={class:"px-4 py-1.5 text-sm text-gray-700 dark:text-gray-300"},Y=["disabled"],ae={__name:"Notifications",setup(Z){const u=x([]),d=x(1),y=x(1),i=x("all"),_=s=>{if(!s)return"";const r=new Date(s),n=new Date-r;return n<6e4?"刚刚":n<36e5?`${Math.floor(n/6e4)}分钟前`:n<864e5?`${Math.floor(n/36e5)}小时前`:n<6048e5?`${Math.floor(n/864e5)}天前`:r.toLocaleDateString("zh-CN")},c=async(s=1)=>{try{const r=await j.get("/web/api/notifications",{params:{page:s,filter:i.value}});u.value=r.data.data,d.value=r.data.current_page,y.value=r.data.last_page}catch(r){console.error("Failed to load notifications:",r)}},m=async s=>{s<1||s>y.value||await c(s)},b=async s=>{i.value=s,d.value=1,await c(1)};return w(()=>{c()}),(s,r)=>(a(),h(N,null,{default:f(()=>[e("div",P,[e("div",F,[r[9]||(r[9]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},"消息通知"),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"查看您的通知消息")],-1)),e("div",V,[e("button",{onClick:r[0]||(r[0]=t=>b("all")),class:k(["px-4 py-2 text-sm font-medium rounded transition-colors cursor-pointer",i.value==="all"?"bg-emerald-600 text-white":"bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800"])}," 全部 ",2),e("button",{onClick:r[1]||(r[1]=t=>b("unread")),class:k(["px-4 py-2 text-sm font-medium rounded transition-colors cursor-pointer",i.value==="unread"?"bg-emerald-600 text-white":"bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800"])}," 未读 ",2),e("button",{onClick:r[2]||(r[2]=t=>b("read")),class:k(["px-4 py-2 text-sm font-medium rounded transition-colors cursor-pointer",i.value==="read"?"bg-emerald-600 text-white":"bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800"])}," 已读 ",2)]),u.value.length>0?(a(),o("div",z,[(a(!0),o(C,null,M(u.value,t=>(a(),o("div",{key:t.id,class:"p-4 hover:bg-gray-100 dark:hover:bg-gray-800/50 transition-colors"},[e("div",D,[e("div",H,[t.type==="order"?(a(),o("div",L,[...r[5]||(r[5]=[e("svg",{class:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})],-1)])])):(a(),o("div",A,[...r[6]||(r[6]=[e("svg",{class:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])]))]),e("div",S,[e("div",T,[e("div",q,[e("p",E,[p(l(t.message)+" ",1),t.count>1?(a(),o("span",K,l(t.count)+" 条 ",1)):g("",!0)]),t.order?(a(),o("p",G," 订单号: #"+l(t.order.order_no),1)):g("",!0),e("p",I,l(_(t.created_at)),1)]),e("div",J,[t.is_read?g("",!0):(a(),o("span",O," 未读 ")),t.order_id?(a(),h($(B),{key:1,href:`/trade/${t.order.order_no}/chat`,class:"inline-flex items-center px-3 py-1.5 border border-gray-300 dark:border-gray-600 text-xs font-medium rounded text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors cursor-pointer"},{default:f(()=>[...r[7]||(r[7]=[p(" 查看订单 ",-1)])]),_:1},8,["href"])):g("",!0)])])])])]))),128))])):(a(),o("div",Q,[...r[8]||(r[8]=[e("div",{class:"text-center"},[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})]),e("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100"},"暂无通知"),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"您目前没有任何通知消息")],-1)])])),u.value.length>0?(a(),o("div",R,[e("nav",U,[e("button",{onClick:r[3]||(r[3]=t=>m(d.value-1)),disabled:d.value===1,class:"px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," 上一页 ",8,W),e("span",X," 第 "+l(d.value)+" / "+l(y.value)+" 页 ",1),e("button",{onClick:r[4]||(r[4]=t=>m(d.value+1)),disabled:d.value===y.value,class:"px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," 下一页 ",8,Y)])])):g("",!0)])])]),_:1}))}};export{ae as default};
