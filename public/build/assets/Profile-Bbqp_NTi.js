import{d as u,g as m,h as M,c as z,o,w as P,b as k,a as e,j as L,p as N,f as d,t as r,F as c,l as x,k as V,n as f,i as F,K as O}from"./app-Bwmzqwod.js";import{P as S}from"./P2PAppLayout-Dvvf2soe.js";import{_ as $}from"./P2PPagination-BlapyyeY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-900 dark:to-gray-800"},R={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6"},U={class:"flex flex-col sm:flex-row items-center sm:items-start gap-4"},A=["src","alt"],H={key:1,class:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-gradient-to-br from-emerald-400 to-teal-500 flex items-center justify-center shadow-lg"},W={class:"text-white text-xl sm:text-2xl font-bold"},q={class:"flex-1 text-center sm:text-left"},E={class:"flex flex-col sm:flex-row items-center sm:items-baseline gap-2 sm:gap-3"},K={class:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white"},G={class:"flex items-center gap-2"},I={class:"text-xs text-emerald-700 dark:text-emerald-400"},J={class:"flex flex-wrap items-center justify-center sm:justify-start gap-3 mt-2 text-sm"},Q={key:0,class:"text-green-600 dark:text-green-400 flex items-center gap-1"},X={key:1,class:"text-gray-600 dark:text-gray-400"},Y={class:"text-gray-600 dark:text-gray-400"},Z={class:"hidden sm:flex items-center gap-6 text-center"},ee={class:"text-2xl font-bold text-gray-900 dark:text-white"},te={class:"flex items-center gap-1"},se={class:"text-2xl font-bold text-amber-400"},ae={class:"text-2xl font-bold text-gray-900 dark:text-white"},re={class:"text-2xl font-bold text-gray-900 dark:text-white"},le={class:"sm:hidden grid grid-cols-4 gap-2 mt-4 pt-4 border-t border-gray-300 dark:border-gray-700"},oe={class:"text-center"},de={class:"text-base font-bold text-gray-900 dark:text-white"},ie={class:"text-center"},ne={class:"flex items-center justify-center gap-1"},ce={class:"text-base font-bold text-amber-400"},xe={class:"text-center"},ge={class:"text-base font-bold text-gray-900 dark:text-white"},ue={class:"text-center"},me={class:"text-base font-bold text-gray-900 dark:text-white"},ye={class:"bg-gray-50 dark:bg-gray-950 min-h-screen"},ve={class:"mx-auto max-w-7xl px-4 py-4 sm:px-6 lg:px-8"},he={class:"bg-white dark:bg-gray-900 rounded shadow-sm"},fe={class:"px-4 py-3 border-b border-gray-200 dark:border-gray-800"},pe={class:"flex items-center justify-between"},be={class:"flex items-center gap-3"},ke={class:"px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded text-sm text-gray-600 dark:text-gray-400"},_e={class:"flex items-center gap-2"},we={class:"flex"},Ce={class:"text-lg font-bold text-gray-900 dark:text-gray-100"},Te={class:"flex gap-1 px-4 py-2 border-b border-gray-200 dark:border-gray-800 overflow-x-auto"},je=["onClick","disabled"],Be={key:0,class:"flex items-center justify-center py-8"},Me={key:1,class:"divide-y divide-gray-200 dark:divide-gray-800"},ze={key:0,class:"p-8 text-center"},Pe={class:"flex items-start gap-3"},Le={class:"flex-shrink-0"},Ne={class:"w-10 h-10 rounded-full bg-gradient-to-br from-gray-400 to-gray-500 flex items-center justify-center"},Ve={class:"text-white text-sm font-medium"},Fe={class:"flex-1 min-w-0"},Oe={class:"flex items-start justify-between gap-2"},Se={class:"flex items-center gap-2"},$e={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},De={class:"text-xs text-gray-500 dark:text-gray-500"},Re={class:"flex items-center gap-1 mt-1"},Ue={class:"text-xs text-gray-600 dark:text-gray-400 ml-1"},Ae={class:"mt-2 text-sm text-gray-700 dark:text-gray-300 line-clamp-2"},He={class:"px-4 py-3 border-t border-gray-200 dark:border-gray-800"},Ge={__name:"Profile",props:{user:{type:Object,required:!0},ratingStats:{type:Object,default:()=>({})},isOwnProfile:{type:Boolean,default:!1}},setup(a){const g=a,_=u(()=>[{type:"email",label:"邮箱验证",verified:g.user.is_verified},{type:"2fa",label:"双重验证",verified:g.user.has_2fa},{type:"merchant",label:"商家验证",verified:g.user.totalTrades>10}]),y=m("all"),w=[{value:"all",label:"全部"},{value:"positive",label:"好评"},{value:"neutral",label:"中评"},{value:"negative",label:"差评"}],p=m([]),v=m({current_page:1,last_page:1,per_page:10,total:0}),n=m(!1),b=u(()=>p.value.map(l=>({id:l.id,userName:l.is_anonymous?"匿名用户":l.reviewer?.name||"用户",avatar:l.is_anonymous?"https://ui-avatars.com/api/?name=匿名&color=6b7280&background=e5e7eb":`https://ui-avatars.com/api/?name=${l.reviewer?.name||"User"}&color=10b981&background=d1fae5`,rating:l.rating,date:new Date(l.created_at).toLocaleDateString("zh-CN"),comment:l.comment||"用户未留言",tradeType:l.trade_type==="buy"?"客户购买":"客户出售",cryptoCurrency:l.currency_key||l.crypto_currency}))),C=u(()=>v.value.current_page),T=u(()=>v.value.last_page),h=async(l=1,t="all")=>{n.value=!0;try{const s={page:l,per_page:10};t!=="all"&&(s.rating=t);const i=await O.get(`/web/api/users/${g.user.id}/reviews`,{params:s});i.data.success&&(p.value=i.data.data.reviews,v.value=i.data.data.pagination)}catch(s){console.error("Failed to fetch reviews:",s)}finally{n.value=!1}},j=async l=>{y.value=l,await h(1,l)},B=async l=>{await h(l,y.value)};return M(()=>{h()}),(l,t)=>(o(),z(S,null,{default:P(()=>[k(L(N),{title:a.user.name},null,8,["title"]),e("div",D,[e("div",R,[e("div",U,[a.user.profile_photo_url?(o(),d("img",{key:0,src:a.user.profile_photo_url,alt:a.user.name,class:"w-16 h-16 sm:w-20 sm:h-20 rounded-full object-cover shadow-lg border-2 border-white dark:border-gray-800"},null,8,A)):(o(),d("div",H,[e("span",W,r(a.user.name[0].toUpperCase()),1)])),e("div",q,[e("div",E,[e("h1",K,r(a.user.name),1),e("div",G,[(o(!0),d(c,null,x(_.value.filter(s=>s.verified),s=>(o(),d("div",{key:s.type,class:"inline-flex items-center gap-1 px-2 py-0.5 bg-emerald-100 dark:bg-emerald-500/20 border border-emerald-300 dark:border-emerald-500/30 rounded-full"},[t[0]||(t[0]=e("svg",{class:"w-3 h-3 text-emerald-600 dark:text-emerald-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)),e("span",I,r(s.label),1)]))),128))])]),e("div",J,[a.user.online?(o(),d("span",Q,[...t[1]||(t[1]=[e("div",{class:"w-2 h-2 bg-green-600 dark:bg-green-400 rounded-full animate-pulse"},null,-1),V(" 在线 ",-1)])])):(o(),d("span",X," 离线 · "+r(a.user.lastOnline),1)),e("span",Y,"注册于 "+r(a.user.memberSince),1)])]),e("div",Z,[e("div",null,[e("div",ee,r(a.user.completedTrades),1),t[2]||(t[2]=e("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"成功交易",-1))]),e("div",null,[e("div",te,[e("span",se,r(a.user.rating),1),t[3]||(t[3]=e("svg",{class:"w-5 h-5 text-amber-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1))]),t[4]||(t[4]=e("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"用户评分",-1))]),e("div",null,[e("div",ae,r(a.user.usersTradedWith),1),t[5]||(t[5]=e("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"交易伙伴",-1))]),e("div",null,[e("div",re,r(a.user.responseTime?"< "+a.user.responseTime+"分钟":"暂无"),1),t[6]||(t[6]=e("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"响应时间",-1))])])]),e("div",le,[e("div",oe,[e("div",de,r(a.user.completedTrades),1),t[7]||(t[7]=e("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"交易",-1))]),e("div",ie,[e("div",ne,[e("span",ce,r(a.user.rating),1),t[8]||(t[8]=e("svg",{class:"w-3 h-3 text-amber-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1))]),t[9]||(t[9]=e("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"评分",-1))]),e("div",xe,[e("div",ge,r(a.user.usersTradedWith),1),t[10]||(t[10]=e("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"伙伴",-1))]),e("div",ue,[e("div",me,r(a.user.responseTime?"< "+a.user.responseTime+"分":"暂无"),1),t[11]||(t[11]=e("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"响应",-1))])])])]),e("div",ye,[e("div",ve,[e("div",he,[e("div",fe,[e("div",pe,[e("div",be,[t[12]||(t[12]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"用户评价",-1)),e("span",ke,r(a.user.totalReviews)+" 条评价 ",1)]),e("div",_e,[e("div",we,[(o(),d(c,null,x(5,s=>e("svg",{key:s,class:f(["w-4 h-4",s<=Math.floor(a.user.rating)?"text-amber-400":"text-gray-300 dark:text-gray-700"]),fill:"currentColor",viewBox:"0 0 20 20"},[...t[13]||(t[13]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)])],2)),64))]),e("span",Ce,r(a.user.rating),1)])])]),e("div",Te,[(o(),d(c,null,x(w,s=>e("button",{key:s.value,onClick:i=>j(s.value),disabled:n.value,class:f(["px-3 py-1.5 text-sm font-medium rounded-md transition-colors whitespace-nowrap cursor-pointer",y.value===s.value?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800",n.value&&"opacity-50 cursor-wait"])},r(s.label),11,je)),64))]),n.value?(o(),d("div",Be,[...t[14]||(t[14]=[e("svg",{class:"animate-spin h-8 w-8 text-emerald-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):(o(),d("div",Me,[b.value.length===0?(o(),d("div",ze,[...t[15]||(t[15]=[e("svg",{class:"w-12 h-12 mx-auto text-gray-400 dark:text-gray-600 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})],-1),e("p",{class:"text-gray-500 dark:text-gray-400"},"暂无评价",-1)])])):F("",!0),(o(!0),d(c,null,x(b.value,s=>(o(),d("div",{key:s.id,class:"p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors"},[e("div",Pe,[e("div",Le,[e("div",Ne,[e("span",Ve,r(s.userName[0].toUpperCase()),1)])]),e("div",Fe,[e("div",Oe,[e("div",null,[e("div",Se,[e("p",$e,r(s.userName),1),e("span",De,r(s.date),1)]),e("div",Re,[(o(),d(c,null,x(5,i=>e("svg",{key:i,class:f(["w-3.5 h-3.5",i<=s.rating?"text-amber-400":"text-gray-300 dark:text-gray-700"]),fill:"currentColor",viewBox:"0 0 20 20"},[...t[16]||(t[16]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)])],2)),64)),e("span",Ue,r(s.tradeType)+" "+r(s.cryptoCurrency),1)])])]),e("p",Ae,r(s.comment),1)])])]))),128))])),e("div",He,[k($,{"current-page":C.value,"total-pages":T.value,onPageChanged:B},null,8,["current-page","total-pages"])])])])])]),_:1}))}};export{Ge as default};
