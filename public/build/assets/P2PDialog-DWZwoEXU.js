import{Q as M,r as V,d as g,g as q,c as x,o as r,b as f,w as k,f as s,l,a as t,T as h,p as v,k as y,n,J as z,t as i,q as w,e as A,v as $,I as N}from"./app-CDtx7mxq.js";const H={key:0,class:"fixed inset-0 z-[80] flex items-end md:items-center justify-center"},I={key:0,class:"relative bg-white dark:bg-gray-900 rounded-t md:rounded shadow-2xl w-full md:max-w-lg max-h-[90vh] overflow-hidden md:m-4"},L={key:0,class:"px-4 md:px-6 py-3 md:py-4 border-b border-gray-200 dark:border-gray-800"},O={class:"flex items-center justify-between"},P={class:"flex items-center gap-3"},U={key:1},E={class:"text-lg md:text-xl font-semibold text-gray-900 dark:text-gray-100"},F={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},J=["disabled"],Q={class:"overflow-y-auto flex-1 px-4 md:px-6 py-4"},R={key:0,class:"mb-4 p-3 bg-gray-50 dark:bg-gray-800/50 rounded"},G={class:"flex items-center gap-3"},K={class:"h-10 w-10 rounded-full bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center flex-shrink-0"},W={class:"text-white font-bold text-sm"},X={class:"flex-1 min-w-0"},Y={class:"font-medium text-gray-900 dark:text-gray-100 text-sm"},Z={class:"flex items-center gap-2 text-xs"},_={key:0,class:"inline-flex items-center gap-1 text-emerald-600 dark:text-emerald-400"},ee={key:1,class:"text-gray-500 dark:text-gray-400"},te={key:1,class:"bg-gray-50 dark:bg-gray-800/50 rounded p-4 mb-4"},ae={class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed"},re={key:0,class:"border-t border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 px-4 md:px-6 py-3"},se=["disabled"],le={key:1,class:"px-4 md:px-6 py-4 border-t border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-gray-800/30"},oe={class:"flex gap-3"},de=["disabled"],ne=["disabled"],ie={key:0,class:"absolute inset-0 flex items-center justify-center"},ce={key:1,class:"absolute inset-0 flex items-center justify-center"},ue={__name:"P2PDialog",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},subtitle:{type:String,default:""},icon:{type:[String,Object],default:null},iconColor:{type:String,default:"amber",validator:e=>["amber","emerald","red","blue","purple"].includes(e)},merchant:{type:Object,default:null},terms:{type:String,default:""},requiresAgreement:{type:Boolean,default:!1},agreementText:{type:String,default:"我已了解并同意继续"},agreementDisabled:{type:Boolean,default:!1},cancelText:{type:String,default:""},confirmText:{type:String,default:""},loading:{type:Boolean,default:!1},persistent:{type:Boolean,default:!1}},emits:["close","confirm"],setup(e,{emit:p}){const o=e,b=p,m=M(),c=V(!1),C=g(()=>{const d={amber:"bg-amber-100 dark:bg-amber-900/30",emerald:"bg-emerald-100 dark:bg-emerald-900/30",red:"bg-red-100 dark:bg-red-900/30",blue:"bg-blue-100 dark:bg-blue-900/30",purple:"bg-purple-100 dark:bg-purple-900/30"};return d[o.iconColor]||d.amber}),B=g(()=>{const d={amber:"text-amber-600 dark:text-amber-400",emerald:"text-emerald-600 dark:text-emerald-400",red:"text-red-600 dark:text-red-400",blue:"text-blue-600 dark:text-blue-400",purple:"text-purple-600 dark:text-purple-400"};return d[o.iconColor]||d.amber}),T=g(()=>o.cancelText||o.confirmText||m.footer);q(()=>o.show,d=>{d&&o.requiresAgreement&&(c.value=!1)});const j=()=>{!o.persistent&&!o.loading&&b("close")},S=()=>{(!o.requiresAgreement||c.value)&&b("confirm")},D={template:`
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
        </svg>
    `};return!o.icon&&(o.title||o.terms)&&(o.icon=D),(d,a)=>(r(),x(N,{to:"body"},[f(h,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:k(()=>[e.show?(r(),s("div",H,[t("div",{class:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:j}),f(h,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"translate-y-full md:translate-y-0 md:scale-95 md:opacity-0","enter-to-class":"translate-y-0 md:scale-100 md:opacity-100","leave-active-class":"transition ease-in duration-200","leave-from-class":"translate-y-0 md:scale-100 md:opacity-100","leave-to-class":"translate-y-full md:translate-y-0 md:scale-95 md:opacity-0"},{default:k(()=>[e.show?(r(),s("div",I,[a[8]||(a[8]=t("div",{class:"md:hidden flex justify-center pt-2 pb-1"},[t("div",{class:"w-10 h-1 bg-gray-300 dark:bg-gray-700 rounded-full"})],-1)),e.title||v(m).header?(r(),s("div",L,[t("div",O,[t("div",P,[e.icon?(r(),s("div",{key:0,class:n(["p-2 rounded",C.value])},[(r(),x(z(e.icon),{class:n(["w-5 h-5",B.value])},null,8,["class"]))],2)):l("",!0),e.title||e.subtitle?(r(),s("div",U,[t("h3",E,i(e.title),1),e.subtitle?(r(),s("p",F,i(e.subtitle),1)):l("",!0)])):y(d.$slots,"header",{key:2})]),t("button",{onClick:a[0]||(a[0]=u=>d.$emit("close")),disabled:e.loading,class:n(["p-2 rounded transition-colors",e.loading?"cursor-not-allowed opacity-50":"hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer"])},[...a[3]||(a[3]=[t("svg",{class:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],10,J)])])):l("",!0),t("div",{class:n(["flex flex-col",T.value?"max-h-[60vh] md:max-h-[65vh]":""])},[t("div",Q,[e.merchant?(r(),s("div",R,[t("div",G,[t("div",K,[t("span",W,i(e.merchant.name?.[0]?.toUpperCase()||"M"),1)]),t("div",X,[t("p",Y,i(e.merchant.name||"商家"),1),t("div",Z,[e.merchant.isVerified?(r(),s("span",_,[...a[4]||(a[4]=[t("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),w(" 认证商家 ",-1)])])):l("",!0),e.merchant.tradesCount?(r(),s("span",ee," 成交 "+i(e.merchant.tradesCount)+" | "+i(e.merchant.completionRate||100)+"% ",1)):l("",!0)])])])])):l("",!0),e.terms?(r(),s("div",te,[a[5]||(a[5]=t("h4",{class:"font-semibold text-gray-900 dark:text-gray-100 mb-3"},"商家条款",-1)),t("p",ae,i(e.terms),1)])):l("",!0),y(d.$slots,"default")]),e.requiresAgreement?(r(),s("div",re,[t("label",{class:n(["flex items-start gap-3",e.agreementDisabled?"cursor-not-allowed":"cursor-pointer"])},[A(t("input",{type:"checkbox","onUpdate:modelValue":a[1]||(a[1]=u=>c.value=u),disabled:e.agreementDisabled,class:n(["mt-1 w-4 h-4 text-emerald-600 bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 rounded focus:ring-emerald-500 dark:focus:ring-emerald-400 focus:ring-2",e.agreementDisabled?"cursor-not-allowed opacity-50":"cursor-pointer"])},null,10,se),[[$,c.value]]),t("span",{class:n(["text-sm font-medium",e.agreementDisabled?"text-gray-400 dark:text-gray-500":"text-gray-700 dark:text-gray-300"])},i(e.agreementText),3)],2)])):l("",!0)],2),v(m).footer||e.cancelText||e.confirmText?(r(),s("div",le,[y(d.$slots,"footer",{},()=>[t("div",oe,[e.cancelText?(r(),s("button",{key:0,onClick:a[2]||(a[2]=u=>d.$emit("close")),disabled:e.loading,class:n(["flex-1 px-4 py-2.5 border-2 rounded font-medium transition-colors",e.loading?"border-gray-200 dark:border-gray-700 text-gray-400 dark:text-gray-600 cursor-not-allowed opacity-50":"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer"])},i(e.cancelText),11,de)):l("",!0),e.confirmText?(r(),s("button",{key:1,onClick:S,disabled:e.requiresAgreement&&!c.value||e.loading,class:n(["flex-1 px-4 py-2.5 rounded font-medium transition-all relative",(!e.requiresAgreement||c.value)&&!e.loading?"bg-emerald-600 hover:bg-emerald-700 text-white cursor-pointer shadow-sm hover:shadow-md":"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-500 cursor-not-allowed opacity-60"])},[e.loading?(r(),s("div",ie,[...a[6]||(a[6]=[t("svg",{class:"w-5 h-5 animate-spin text-white",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):e.requiresAgreement&&!c.value?(r(),s("div",ce,[...a[7]||(a[7]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),w(" 请先勾选同意 ",-1)])])):l("",!0),t("span",{class:n({"opacity-0":e.requiresAgreement&&!c.value||e.loading})},i(e.confirmText),3)],10,ne)):l("",!0)])])])):l("",!0)])):l("",!0)]),_:3})])):l("",!0)]),_:3})]))}};export{ue as _};
