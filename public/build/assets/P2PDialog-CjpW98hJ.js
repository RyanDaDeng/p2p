import{Q as q,r as M,d as g,g as V,c as x,o as a,b as f,w as k,f as s,l,a as t,T as h,p as v,k as y,n as c,J as A,t as n,q as p,e as z,v as $,I as N}from"./app-CHuK08XC.js";const H={key:0,class:"fixed inset-0 z-[80] flex items-end md:items-center justify-center"},I={key:0,class:"relative bg-white dark:bg-gray-900 rounded-t md:rounded shadow-2xl w-full md:max-w-lg max-h-[90vh] overflow-hidden md:m-4"},L={key:0,class:"px-4 md:px-6 py-3 md:py-4 border-b border-gray-200 dark:border-gray-800"},O={class:"flex items-center justify-between"},P={class:"flex items-center gap-3"},U={key:1},E={class:"text-lg md:text-xl font-semibold text-gray-900 dark:text-gray-100"},F={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},J={class:"overflow-y-auto flex-1 px-4 md:px-6 py-4"},Q={key:0,class:"mb-4 p-3 bg-gray-50 dark:bg-gray-800/50 rounded"},R={class:"flex items-center gap-3"},G={class:"h-10 w-10 rounded-full bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center flex-shrink-0"},K={class:"text-white font-bold text-sm"},W={class:"flex-1 min-w-0"},X={class:"font-medium text-gray-900 dark:text-gray-100 text-sm"},Y={class:"flex items-center gap-2 text-xs"},Z={key:0,class:"inline-flex items-center gap-1 text-emerald-600 dark:text-emerald-400"},_={key:1,class:"text-gray-500 dark:text-gray-400"},ee={key:1,class:"bg-gray-50 dark:bg-gray-800/50 rounded p-4 mb-4"},te={class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed"},ae={key:0,class:"border-t border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 px-4 md:px-6 py-3"},re=["disabled"],se={key:1,class:"px-4 md:px-6 py-4 border-t border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-gray-800/30"},le={class:"flex gap-3"},oe=["disabled"],de={key:0,class:"absolute inset-0 flex items-center justify-center"},ie={__name:"P2PDialog",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},subtitle:{type:String,default:""},icon:{type:[String,Object],default:null},iconColor:{type:String,default:"amber",validator:e=>["amber","emerald","red","blue","purple"].includes(e)},merchant:{type:Object,default:null},terms:{type:String,default:""},requiresAgreement:{type:Boolean,default:!1},agreementText:{type:String,default:"我已了解并同意继续"},agreementDisabled:{type:Boolean,default:!1},cancelText:{type:String,default:""},confirmText:{type:String,default:""},persistent:{type:Boolean,default:!1}},emits:["close","confirm"],setup(e,{emit:w}){const d=e,b=w,m=q(),i=M(!1),C=g(()=>{const o={amber:"bg-amber-100 dark:bg-amber-900/30",emerald:"bg-emerald-100 dark:bg-emerald-900/30",red:"bg-red-100 dark:bg-red-900/30",blue:"bg-blue-100 dark:bg-blue-900/30",purple:"bg-purple-100 dark:bg-purple-900/30"};return o[d.iconColor]||o.amber}),T=g(()=>{const o={amber:"text-amber-600 dark:text-amber-400",emerald:"text-emerald-600 dark:text-emerald-400",red:"text-red-600 dark:text-red-400",blue:"text-blue-600 dark:text-blue-400",purple:"text-purple-600 dark:text-purple-400"};return o[d.iconColor]||o.amber}),B=g(()=>d.cancelText||d.confirmText||m.footer);V(()=>d.show,o=>{o&&d.requiresAgreement&&(i.value=!1)});const S=()=>{d.persistent||b("close")},j=()=>{(!d.requiresAgreement||i.value)&&b("confirm")},D={template:`
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
        </svg>
    `};return!d.icon&&(d.title||d.terms)&&(d.icon=D),(o,r)=>(a(),x(N,{to:"body"},[f(h,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:k(()=>[e.show?(a(),s("div",H,[t("div",{class:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:S}),f(h,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"translate-y-full md:translate-y-0 md:scale-95 md:opacity-0","enter-to-class":"translate-y-0 md:scale-100 md:opacity-100","leave-active-class":"transition ease-in duration-200","leave-from-class":"translate-y-0 md:scale-100 md:opacity-100","leave-to-class":"translate-y-full md:translate-y-0 md:scale-95 md:opacity-0"},{default:k(()=>[e.show?(a(),s("div",I,[r[7]||(r[7]=t("div",{class:"md:hidden flex justify-center pt-2 pb-1"},[t("div",{class:"w-10 h-1 bg-gray-300 dark:bg-gray-700 rounded-full"})],-1)),e.title||v(m).header?(a(),s("div",L,[t("div",O,[t("div",P,[e.icon?(a(),s("div",{key:0,class:c(["p-2 rounded",C.value])},[(a(),x(A(e.icon),{class:c(["w-5 h-5",T.value])},null,8,["class"]))],2)):l("",!0),e.title||e.subtitle?(a(),s("div",U,[t("h3",E,n(e.title),1),e.subtitle?(a(),s("p",F,n(e.subtitle),1)):l("",!0)])):y(o.$slots,"header",{key:2})]),t("button",{onClick:r[0]||(r[0]=u=>o.$emit("close")),class:"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors cursor-pointer"},[...r[3]||(r[3]=[t("svg",{class:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):l("",!0),t("div",{class:c(["flex flex-col",B.value?"max-h-[60vh] md:max-h-[65vh]":""])},[t("div",J,[e.merchant?(a(),s("div",Q,[t("div",R,[t("div",G,[t("span",K,n(e.merchant.name?.[0]?.toUpperCase()||"M"),1)]),t("div",W,[t("p",X,n(e.merchant.name||"商家"),1),t("div",Y,[e.merchant.isVerified?(a(),s("span",Z,[...r[4]||(r[4]=[t("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),p(" 认证商家 ",-1)])])):l("",!0),e.merchant.tradesCount?(a(),s("span",_," 成交 "+n(e.merchant.tradesCount)+" | "+n(e.merchant.completionRate||100)+"% ",1)):l("",!0)])])])])):l("",!0),e.terms?(a(),s("div",ee,[r[5]||(r[5]=t("h4",{class:"font-semibold text-gray-900 dark:text-gray-100 mb-3"},"商家条款",-1)),t("p",te,n(e.terms),1)])):l("",!0),y(o.$slots,"default")]),e.requiresAgreement?(a(),s("div",ae,[t("label",{class:c(["flex items-start gap-3",e.agreementDisabled?"cursor-not-allowed":"cursor-pointer"])},[z(t("input",{type:"checkbox","onUpdate:modelValue":r[1]||(r[1]=u=>i.value=u),disabled:e.agreementDisabled,class:c(["mt-1 w-4 h-4 text-emerald-600 bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 rounded focus:ring-emerald-500 dark:focus:ring-emerald-400 focus:ring-2",e.agreementDisabled?"cursor-not-allowed opacity-50":"cursor-pointer"])},null,10,re),[[$,i.value]]),t("span",{class:c(["text-sm font-medium",e.agreementDisabled?"text-gray-400 dark:text-gray-500":"text-gray-700 dark:text-gray-300"])},n(e.agreementText),3)],2)])):l("",!0)],2),v(m).footer||e.cancelText||e.confirmText?(a(),s("div",se,[y(o.$slots,"footer",{},()=>[t("div",le,[e.cancelText?(a(),s("button",{key:0,onClick:r[2]||(r[2]=u=>o.$emit("close")),class:"flex-1 px-4 py-2.5 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors cursor-pointer font-medium"},n(e.cancelText),1)):l("",!0),e.confirmText?(a(),s("button",{key:1,onClick:j,disabled:e.requiresAgreement&&!i.value,class:c(["flex-1 px-4 py-2.5 rounded font-medium transition-all relative",!e.requiresAgreement||i.value?"bg-emerald-600 hover:bg-emerald-700 text-white cursor-pointer shadow-sm hover:shadow-md":"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-500 cursor-not-allowed opacity-60"])},[e.requiresAgreement&&!i.value?(a(),s("div",de,[...r[6]||(r[6]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),p(" 请先勾选同意 ",-1)])])):l("",!0),t("span",{class:c({"opacity-0":e.requiresAgreement&&!i.value})},n(e.confirmText),3)],10,oe)):l("",!0)])])])):l("",!0)])):l("",!0)]),_:3})])):l("",!0)]),_:3})]))}};export{ie as _};
