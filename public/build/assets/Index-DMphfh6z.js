import{I,h as ee,D as ve,c as U,o,b as f,w as $,f as n,i as m,a as e,T as re,t as i,r as ue,k,H as $e,d as P,g,q as Ve,n as z,e as C,Q as W,J as O,F as G,l as J,G as Me,x as B,M as ce,K as j,B as Le,j as F,p as Se}from"./app-C2D0370k.js";import{P as Te}from"./P2PAppLayout-BS9GDDUT.js";import{_ as se}from"./P2PButton-Dng1EAjU.js";import{_ as ze}from"./P2PPagination-Bv4SVzuF.js";import{_ as me}from"./P2PConfirmationBox-BS-V_PR9.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as X}from"./P2PSelect-CCZJ6d4H.js";import{_ as Ae}from"./P2PPaymentMethodPicker-DztS5l58.js";import{u as be}from"./useConfig-BaXv6-JG.js";import{g as le}from"./paymentMethods-stziNKzb.js";import{c as Z,b as q,a as xe,_ as pe}from"./UsdcIcon-DEP9wA4x.js";import{g as ge}from"./crypto-BzNKfxA-.js";import"./Modal-B0w-RHll.js";/* empty css                                                                  */const Pe={key:0,class:"fixed inset-0 z-50 overflow-hidden"},Be={class:"flex items-center justify-center min-h-screen p-4"},je={key:0,class:"relative bg-white dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] md:max-h-[85vh] flex flex-col"},Ue={class:"flex-shrink-0 px-6 py-4 border-b border-gray-200 dark:border-slate-800"},De={class:"flex items-center justify-between"},Ne={class:"text-lg font-semibold text-gray-900 dark:text-slate-100"},Ee={key:0,class:"mt-1 text-sm text-gray-600 dark:text-slate-400"},He={class:"flex-1 overflow-y-auto px-6 py-4 scrollbar-thin"},Fe={class:"flex-shrink-0 px-6 py-4 border-t border-gray-200 dark:border-slate-800 bg-gray-50 dark:bg-slate-900/50 rounded-b-xl"},Ie={class:"flex flex-col-reverse sm:flex-row sm:justify-end gap-3"},Ye=["disabled"],Re={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},qe={__name:"P2PPublishDialog",props:{modelValue:{type:Boolean,default:!1},title:{type:String,required:!0},subtitle:{type:String,default:""},showCancel:{type:Boolean,default:!0},showConfirm:{type:Boolean,default:!0},cancelText:{type:String,default:"取消"},confirmText:{type:String,default:"确认"},confirmDisabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},persistent:{type:Boolean,default:!1}},emits:["update:modelValue","confirm","cancel","close"],setup(v,{emit:D}){const c=v,w=D,h=()=>{!c.persistent&&!c.loading&&(w("update:modelValue",!1),w("close"))},_=()=>{c.loading||(w("cancel"),w("update:modelValue",!1))},x=()=>{!c.confirmDisabled&&!c.loading&&w("confirm")},S=a=>{a.key==="Escape"&&c.modelValue&&h()};return I(()=>c.modelValue,a=>{a?document.body.style.overflow="hidden":document.body.style.overflow=""}),ee(()=>{document.addEventListener("keydown",S)}),ve(()=>{document.removeEventListener("keydown",S),document.body.style.overflow=""}),(a,b)=>(o(),U($e,{to:"body"},[f(re,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:$(()=>[v.modelValue?(o(),n("div",Pe,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:h}),e("div",Be,[f(re,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to-class":"opacity-100 translate-y-0 sm:scale-100","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 translate-y-0 sm:scale-100","leave-to-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:$(()=>[v.modelValue?(o(),n("div",je,[e("div",Ue,[e("div",De,[e("div",null,[e("h2",Ne,i(v.title),1),v.subtitle?(o(),n("p",Ee,i(v.subtitle),1)):m("",!0)]),e("button",{onClick:h,class:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors cursor-pointer"},[...b[0]||(b[0]=[e("svg",{class:"w-5 h-5 text-gray-500 dark:text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",He,[ue(a.$slots,"content",{},void 0,!0)]),e("div",Fe,[ue(a.$slots,"footer",{},()=>[e("div",Ie,[v.showCancel?(o(),n("button",{key:0,onClick:_,class:"w-full sm:w-auto px-6 py-2.5 text-sm font-medium text-gray-700 dark:text-slate-300 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-700 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors cursor-pointer"},i(v.cancelText),1)):m("",!0),v.showConfirm?(o(),n("button",{key:1,onClick:x,disabled:v.confirmDisabled||v.loading,class:"w-full sm:w-auto px-6 py-2.5 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-500 dark:hover:bg-emerald-600 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer flex items-center justify-center"},[v.loading?(o(),n("svg",Re,[...b[1]||(b[1]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):m("",!0),k(" "+i(v.confirmText),1)],8,Ye)):m("",!0)])],!0)])])):m("",!0)]),_:3})])])):m("",!0)]),_:3})]))}},ke=ye(qe,[["__scopeId","data-v-807886d7"]]),Ge={class:"grid grid-cols-2 gap-3"},Je={key:0,class:"absolute top-2 right-2"},Ke={key:0,class:"absolute top-2 right-2"},Qe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},We={class:"flex items-center"},Xe={class:"absolute z-50 mt-2 w-full rounded-xl bg-white dark:bg-slate-800 shadow-xl ring-1 ring-gray-200 dark:ring-slate-700/50"},Ze={class:"max-h-60 overflow-auto py-1 custom-scrollbar"},Oe=["onClick"],et={class:"flex items-center"},tt={key:0,class:"h-4 w-4 text-emerald-500",fill:"currentColor",viewBox:"0 0 20 20"},at={class:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-2"},st={class:"space-y-3"},rt={class:"flex gap-3"},lt={class:"flex items-center cursor-pointer"},ot={class:"flex items-center cursor-pointer"},nt={key:0,class:"flex items-center gap-2"},dt={class:"text-gray-500 dark:text-slate-400"},it={key:1,class:"flex items-center gap-2"},ut={class:"grid grid-cols-2 gap-3"},ct={class:"relative"},mt={class:"absolute right-3 top-2.5 text-gray-500 dark:text-slate-400 text-sm"},xt={class:"relative"},pt={class:"absolute right-3 top-2.5 text-gray-500 dark:text-slate-400 text-sm"},gt={class:"border border-gray-200 dark:border-slate-700 rounded-lg p-4 space-y-4"},vt={__name:"CreateOfferModal",props:{modelValue:{type:Boolean,default:!1},offer:{type:Object,default:null},tradeSettings:{type:Object,default:null},userAddresses:{type:Array,default:()=>[]},paymentMethods:{type:Array,default:()=>[]}},emits:["update:modelValue","success"],setup(v,{emit:D}){const c=v,w=D,h=P({get:()=>c.modelValue,set:r=>w("update:modelValue",r)}),_=g(!1),x=g(!1),S=g(null),a=g({type:"buy",currency:"",fiatCurrency:"CNY",country:"",verifiedAddress:"",priceType:"fixed",fixedPrice:"",floatingMargin:"+",marginPercent:"",minLimit:"",maxLimit:"",paymentMethod:"",paymentTimeLimit:15,welcomeMessage:"",tradeTerms:"",notes:""}),b={btc:pe,eth:xe,"erc-usdt":q,"trc-usdt":q,"bep-usdt":q,"erc-usdc":Z,"trc-usdc":Z,"bep-usdc":Z},y=r=>r?b[r]?b[r]:r.includes("usdt")?q:r.includes("usdc")?Z:r.includes("btc")?pe:r.includes("eth")?xe:q:null,u=r=>{a.value.currency=r.value,x.value=!1},V=r=>{S.value&&!S.value.contains(r.target)&&(x.value=!1)},{fetchConfig:T,getCryptocurrencyOptions:N,getPaymentMethodOptions:K,getFiatCurrencyOptions:te,getCountryOptions:ae}=be(),M=P(()=>N()),Y=P(()=>ae()),E=P(()=>te());P(()=>K()),ee(async()=>{try{await T()}catch(r){console.error("Failed to load config:",r)}document.addEventListener("click",V)}),ve(()=>{document.removeEventListener("click",V)});const Q=P(()=>!c.userAddresses||c.userAddresses.length===0?[]:c.userAddresses.map(r=>({...r,disabled:a.value.currency&&r.currency_key!==a.value.currency}))),A=P(()=>a.value.type&&a.value.currency&&a.value.country&&a.value.verifiedAddress&&a.value.minLimit&&a.value.maxLimit&&a.value.paymentMethod&&(a.value.priceType==="fixed"&&a.value.fixedPrice||a.value.priceType==="floating"&&a.value.marginPercent));P(()=>a.value.paymentMethod?le(a.value.paymentMethod):null);const R=()=>{w("update:modelValue",!1)},H=async()=>{if(!A.value){if(!a.value.verifiedAddress){ce.error(`请选择${a.value.type==="buy"?"发款":"收款"}地址`);return}return}_.value=!0;try{const r={currency_key:a.value.currency,fiat_currency:a.value.fiatCurrency,trade_type:a.value.type,trade_address:a.value.verifiedAddress,min_limit:parseFloat(a.value.minLimit),max_limit:parseFloat(a.value.maxLimit),price:a.value.priceType==="fixed"?parseFloat(a.value.fixedPrice):null,price_model:a.value.priceType==="fixed"?"fixed":"dynamic",margin:a.value.priceType==="floating"?parseFloat((a.value.floatingMargin==="+"?1:-1)*a.value.marginPercent):null,payment_method:a.value.paymentMethod,payment_time_limit:a.value.paymentTimeLimit,country:a.value.country,vendor_toc:a.value.tradeTerms||"",welcome_message:a.value.welcomeMessage||"",notes:a.value.notes||""};let s;c.offer?s=await j.put(`/web/api/ads/${c.offer.id}`,r):s=await j.post("/web/api/ads",r),s.data.success&&(w("success"),R())}catch(r){ce.error(r.response?.data?.message||"操作失败"),console.error("Error submitting offer:",r)}finally{_.value=!1}};return I(()=>a.value.currency,()=>{a.value.verifiedAddress=""}),I(()=>a.value.type,r=>{r==="buy"&&(a.value.verifiedAddress=""),c.tradeSettings&&c.tradeSettings.vendor_toc&&(a.value.tradeTerms=c.tradeSettings.vendor_toc)}),I(()=>c.offer,r=>{if(r){const s=r.type||r.trade_type;a.value={type:s,currency:r.currency||r.cryptocurrency,fiatCurrency:r.fiat_currency||"CNY",country:r.country,verifiedAddress:r.verifiedAddress||"",priceType:r.price_model==="fixed"?"fixed":"floating",fixedPrice:r.price||r.fixedPrice||"",floatingMargin:r.margin!==null&&r.margin!==void 0&&r.margin<0?"-":"+",marginPercent:Math.abs(r.margin||0).toString(),minLimit:r.minLimit||r.min_limit||"",maxLimit:r.maxLimit||r.max_limit||"",paymentMethod:r.payment_method||"",paymentTimeLimit:r.payment_time_limit||15,welcomeMessage:r.welcome_message||"",tradeTerms:r.vendor_toc||"",notes:r.notes||""}}},{immediate:!0}),I(()=>c.modelValue,r=>{r&&!c.offer&&(a.value={type:"buy",currency:"",fiatCurrency:"CNY",country:"",verifiedAddress:"",priceType:"fixed",fixedPrice:"",floatingMargin:"+",marginPercent:"",minLimit:"",maxLimit:"",paymentMethod:"",paymentTimeLimit:15,welcomeMessage:"",tradeTerms:""},c.tradeSettings&&(c.tradeSettings.welcome_message&&(a.value.welcomeMessage=c.tradeSettings.welcome_message),c.tradeSettings.vendor_toc&&(a.value.tradeTerms=c.tradeSettings.vendor_toc)))}),(r,s)=>(o(),U(ke,{modelValue:h.value,"onUpdate:modelValue":s[18]||(s[18]=d=>h.value=d),title:v.offer?`编辑广告 #${v.offer.id}`:"创建广告",subtitle:v.offer?"修改您的交易广告信息":"创建新的交易广告，开始接受订单","confirm-text":v.offer?"保存修改":"创建广告","confirm-disabled":!A.value,loading:_.value,onConfirm:H,onCancel:R},{content:$(()=>[e("form",{onSubmit:s[17]||(s[17]=Ve(()=>{},["prevent"])),class:"space-y-6"},[e("div",null,[s[23]||(s[23]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-2"},"交易类型",-1)),e("div",Ge,[e("label",{class:z(["relative flex items-center justify-center p-4 border-2 rounded-lg cursor-pointer transition-all",a.value.type==="buy"?"border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20":"border-gray-200 dark:border-slate-700 hover:border-gray-300 dark:hover:border-slate-600"])},[C(e("input",{type:"radio","onUpdate:modelValue":s[0]||(s[0]=d=>a.value.type=d),value:"buy",class:"sr-only"},null,512),[[W,a.value.type]]),s[20]||(s[20]=e("div",{class:"text-center"},[e("svg",{class:"w-8 h-8 mx-auto mb-2 text-emerald-600 dark:text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})]),e("p",{class:"font-medium text-gray-900 dark:text-slate-100"},"商家出售"),e("p",{class:"text-xs text-gray-500 dark:text-slate-400 mt-1"},"向用户出售虚拟货币")],-1)),a.value.type==="buy"?(o(),n("div",Je,[...s[19]||(s[19]=[e("svg",{class:"w-5 h-5 text-emerald-600 dark:text-emerald-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):m("",!0)],2),e("label",{class:z(["relative flex items-center justify-center p-4 border-2 rounded-lg cursor-pointer transition-all",a.value.type==="sell"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-slate-700 hover:border-gray-300 dark:hover:border-slate-600"])},[C(e("input",{type:"radio","onUpdate:modelValue":s[1]||(s[1]=d=>a.value.type=d),value:"sell",class:"sr-only"},null,512),[[W,a.value.type]]),s[22]||(s[22]=e("div",{class:"text-center"},[e("svg",{class:"w-8 h-8 mx-auto mb-2 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("p",{class:"font-medium text-gray-900 dark:text-slate-100"},"商家收购"),e("p",{class:"text-xs text-gray-500 dark:text-slate-400 mt-1"},"从用户手中收购虚拟货币")],-1)),a.value.type==="sell"?(o(),n("div",Ke,[...s[21]||(s[21]=[e("svg",{class:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):m("",!0)],2)])]),e("div",Qe,[e("div",null,[s[27]||(s[27]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-2"},[k("虚拟货币 "),e("span",{class:"text-red-500"},"*")],-1)),e("div",{class:"relative",ref_key:"currencyDropdownRef",ref:S},[e("button",{type:"button",onClick:s[2]||(s[2]=d=>x.value=!x.value),class:"w-full px-3 py-2 pr-10 text-left bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg hover:border-gray-400 dark:hover:border-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-200 cursor-pointer"},[e("span",We,[a.value.currency&&y(a.value.currency)?(o(),U(O(y(a.value.currency)),{key:0,size:20,class:"mr-2"})):m("",!0),e("span",{class:z(a.value.currency?"text-gray-900 dark:text-slate-100":"text-gray-500 dark:text-slate-400")},i(a.value.currency?M.value.find(d=>d.value===a.value.currency)?.label:"选择币种"),3)]),(o(),n("svg",{class:z(["absolute right-3 top-3 h-4 w-4 text-gray-500 dark:text-slate-500 transition-transform duration-200",{"rotate-180":x.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...s[24]||(s[24]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),f(re,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:$(()=>[C(e("div",Xe,[s[26]||(s[26]=e("div",{class:"px-3 py-2 border-b border-gray-200 dark:border-slate-700/50"},[e("p",{class:"text-xs font-medium text-gray-500 dark:text-slate-400"},"选择币种")],-1)),e("div",Ze,[(o(!0),n(G,null,J(M.value,d=>(o(),n("button",{key:d.value,type:"button",onClick:oe=>u(d),class:z(["w-full text-left px-3 py-2 text-sm hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors cursor-pointer flex items-center justify-between",d.value===a.value.currency?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-400":"text-gray-700 dark:text-slate-300"])},[e("span",et,[y(d.value)?(o(),U(O(y(d.value)),{key:0,size:20,class:"mr-2"})):m("",!0),e("span",null,i(d.label),1)]),d.value===a.value.currency?(o(),n("svg",tt,[...s[25]||(s[25]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):m("",!0)],10,Oe))),128))])],512),[[Me,x.value]])]),_:1})],512)]),e("div",null,[s[28]||(s[28]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-2"},[k("交易货币 "),e("span",{class:"text-red-500"},"*")],-1)),f(X,{modelValue:a.value.fiatCurrency,"onUpdate:modelValue":s[3]||(s[3]=d=>a.value.fiatCurrency=d),options:E.value,placeholder:"选择法币"},null,8,["modelValue","options"])]),e("div",null,[s[29]||(s[29]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-2"},[k("国家 "),e("span",{class:"text-red-500"},"*")],-1)),f(X,{modelValue:a.value.country,"onUpdate:modelValue":s[4]||(s[4]=d=>a.value.country=d),options:Y.value,placeholder:"选择国家"},null,8,["modelValue","options"])])]),e("div",null,[e("label",at,[k(i(a.value.type==="buy"?"发款地址":"收款地址")+" ",1),s[30]||(s[30]=e("span",{class:"text-red-500"},"*",-1))]),f(X,{modelValue:a.value.verifiedAddress,"onUpdate:modelValue":s[5]||(s[5]=d=>a.value.verifiedAddress=d),options:Q.value,placeholder:`选择已验证的${a.value.type==="buy"?"发款":"收款"}地址`},null,8,["modelValue","options","placeholder"]),s[31]||(s[31]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-slate-400"},[k(" 需要更多验证地址？"),e("a",{href:"/wallet/address-verification",class:"text-emerald-600 dark:text-emerald-400 hover:underline cursor-pointer"},"前往验证 →")],-1))]),e("div",null,[s[35]||(s[35]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-2"},[k("价格设置 "),e("span",{class:"text-red-500"},"*")],-1)),e("div",st,[e("div",rt,[e("label",lt,[C(e("input",{type:"radio","onUpdate:modelValue":s[6]||(s[6]=d=>a.value.priceType=d),value:"fixed",class:"mr-2 text-emerald-600 focus:ring-emerald-500"},null,512),[[W,a.value.priceType]]),s[32]||(s[32]=e("span",{class:"text-sm text-gray-700 dark:text-slate-300"},"固定价格",-1))]),e("label",ot,[C(e("input",{type:"radio","onUpdate:modelValue":s[7]||(s[7]=d=>a.value.priceType=d),value:"floating",class:"mr-2 text-emerald-600 focus:ring-emerald-500"},null,512),[[W,a.value.priceType]]),s[33]||(s[33]=e("span",{class:"text-sm text-gray-700 dark:text-slate-300"},"浮动价格",-1))])]),a.value.priceType==="fixed"?(o(),n("div",nt,[C(e("input",{"onUpdate:modelValue":s[8]||(s[8]=d=>a.value.fixedPrice=d),type:"number",step:"0.01",placeholder:"0.00",class:"flex-1 px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-gray-900 dark:text-slate-100 focus:ring-2 focus:ring-emerald-500 focus:border-transparent"},null,512),[[B,a.value.fixedPrice]]),e("span",dt,i(a.value.fiatCurrency||"CNY"),1)])):m("",!0),a.value.priceType==="floating"?(o(),n("div",it,[f(X,{modelValue:a.value.floatingMargin,"onUpdate:modelValue":s[9]||(s[9]=d=>a.value.floatingMargin=d),options:[{value:"+",label:"高于"},{value:"-",label:"低于"}],class:"w-32"},null,8,["modelValue"]),C(e("input",{"onUpdate:modelValue":s[10]||(s[10]=d=>a.value.marginPercent=d),type:"number",step:"0.01",placeholder:"0.00",class:"flex-1 px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-gray-900 dark:text-slate-100 focus:ring-2 focus:ring-emerald-500 focus:border-transparent"},null,512),[[B,a.value.marginPercent]]),s[34]||(s[34]=e("span",{class:"text-gray-500 dark:text-slate-400"},"%",-1))])):m("",!0)])]),e("div",null,[s[36]||(s[36]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-2"},[k("交易限额 "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ut,[e("div",null,[e("div",ct,[C(e("input",{"onUpdate:modelValue":s[11]||(s[11]=d=>a.value.minLimit=d),type:"number",placeholder:"最低限额",class:"w-full px-3 py-2 pr-12 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-gray-900 dark:text-slate-100 focus:ring-2 focus:ring-emerald-500 focus:border-transparent"},null,512),[[B,a.value.minLimit]]),e("span",mt,i(a.value.fiatCurrency||"CNY"),1)])]),e("div",null,[e("div",xt,[C(e("input",{"onUpdate:modelValue":s[12]||(s[12]=d=>a.value.maxLimit=d),type:"number",placeholder:"最高限额",class:"w-full px-3 py-2 pr-12 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-gray-900 dark:text-slate-100 focus:ring-2 focus:ring-emerald-500 focus:border-transparent"},null,512),[[B,a.value.maxLimit]]),e("span",pt,i(a.value.fiatCurrency||"CNY"),1)])])])]),e("div",null,[s[37]||(s[37]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-2"},[k("支付方式 "),e("span",{class:"text-red-500"},"*")],-1)),f(Ae,{modelValue:a.value.paymentMethod,"onUpdate:modelValue":s[13]||(s[13]=d=>a.value.paymentMethod=d),categories:c.paymentMethods},null,8,["modelValue","categories"])]),e("div",null,[s[38]||(s[38]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-2"}," 快速提示 ",-1)),C(e("input",{"onUpdate:modelValue":s[14]||(s[14]=d=>a.value.notes=d),type:"text",placeholder:"例如：仅工作日交易、大额优惠、新手友好等",maxlength:"255",class:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-gray-900 dark:text-slate-100 focus:ring-2 focus:ring-emerald-500 focus:border-transparent"},null,512),[[B,a.value.notes]]),s[39]||(s[39]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-slate-400"}," 简短的提示信息会显示在广告卡片上，让买家快速了解您的特色 ",-1))]),e("div",gt,[s[44]||(s[44]=e("div",null,[e("h3",{class:"text-sm font-medium text-gray-900 dark:text-slate-100 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-gray-600 dark:text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),k(" 交易条款与消息设置 ")]),e("p",{class:"mt-1 text-xs text-gray-500 dark:text-slate-400"}," 设置交易条款和欢迎消息，让交易更顺畅 ")],-1)),s[45]||(s[45]=e("div",{class:"p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800"},[e("div",{class:"flex items-start"},[e("svg",{class:"w-4 h-4 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),e("p",{class:"ml-2 text-xs text-amber-700 dark:text-amber-300"},[e("span",{class:"font-medium"},"提示："),k("您可以在交易设置中配置默认条款和消息，创建新广告时将自动填充，节省您的时间。 ")])])],-1)),e("div",null,[s[40]||(s[40]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-2"},"欢迎消息",-1)),C(e("textarea",{"onUpdate:modelValue":s[15]||(s[15]=d=>a.value.welcomeMessage=d),rows:"3",placeholder:"交易开始时自动发送的消息（选填）",class:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-gray-900 dark:text-slate-100 focus:ring-2 focus:ring-emerald-500 focus:border-transparent resize-none text-sm"},null,512),[[B,a.value.welcomeMessage]]),s[41]||(s[41]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-slate-400"}," 当用户开始交易时自动发送的欢迎消息 ",-1))]),e("div",null,[s[42]||(s[42]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-2"}," 交易须知 ",-1)),C(e("textarea",{"onUpdate:modelValue":s[16]||(s[16]=d=>a.value.tradeTerms=d),rows:"5",placeholder:"设置您的交易须知和注意事项，例如：请使用本人实名账户付款、付款后请主动提供付款截图、付款备注请勿包含敏感词汇等",class:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-gray-900 dark:text-slate-100 focus:ring-2 focus:ring-emerald-500 focus:border-transparent resize-none text-sm"},null,512),[[B,a.value.tradeTerms]]),s[43]||(s[43]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-slate-400"}," 交易条款会展示给对方，请详细说明交易要求和注意事项 ",-1))]),s[46]||(s[46]=e("div",{class:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800"},[e("div",{class:"flex items-start"},[e("svg",{class:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),e("p",{class:"ml-2 text-xs text-blue-700 dark:text-blue-300"},[e("span",{class:"font-medium"},"重要提示："),k("订单生成后，交易条款将作为副本保存在订单中。后续修改广告条款不会影响已生成的订单，确保交易双方遵循订单创建时的约定。 ")])])],-1))])],32)]),_:1},8,["modelValue","title","subtitle","confirm-text","confirm-disabled","loading"]))}},yt=ye(vt,[["__scopeId","data-v-ddd1aad5"]]),bt={class:"space-y-6"},kt={class:"p-4 bg-gray-50 dark:bg-slate-800/50 rounded-lg space-y-3"},ft={key:0},ht={class:"text-sm text-gray-700 dark:text-slate-300 whitespace-pre-wrap"},_t={key:1},wt={class:"text-sm text-gray-700 dark:text-slate-300 whitespace-pre-wrap"},Ct={key:2,class:"text-sm text-gray-500 dark:text-slate-400 italic"},$t={__name:"TradeSettingsModal",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","saved"],setup(v,{emit:D}){const c=v,w=D,h=P({get:()=>c.modelValue,set:y=>w("update:modelValue",y)}),_=g(!1),x=g({vendor_toc:"",welcome_message:""}),S=async()=>{try{const y=await j.get("/web/api/trade-settings");if(y.data.success&&y.data.data.settings){const u=y.data.data.settings;x.value={vendor_toc:u.vendor_toc||"",welcome_message:u.welcome_message||""}}}catch(y){console.error("获取交易设置失败:",y)}},a=async()=>{_.value=!0;try{(await j.post("/web/api/trade-settings",x.value)).data.success&&(w("saved",x.value),b())}catch(y){console.error("保存交易设置失败:",y)}finally{_.value=!1}},b=()=>{w("update:modelValue",!1)};return ee(()=>{S()}),(y,u)=>(o(),U(ke,{modelValue:h.value,"onUpdate:modelValue":u[2]||(u[2]=V=>h.value=V),title:"交易设置",subtitle:"设置您的默认交易条款和注意事项","confirm-text":"保存设置",loading:_.value,onConfirm:a,onCancel:b},{content:$(()=>[e("div",bt,[u[10]||(u[10]=e("div",{class:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800"},[e("div",{class:"flex items-start"},[e("svg",{class:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),e("div",{class:"ml-3 flex-1"},[e("p",{class:"text-sm text-blue-800 dark:text-blue-200 font-medium"},"关于交易设置"),e("p",{class:"mt-1 text-sm text-blue-700 dark:text-blue-300"}," 这里设置的交易条款将作为您创建新广告时的默认内容。每个广告会保存一份独立副本，修改此处设置不会影响已发布的广告。 ")])])],-1)),e("div",null,[u[3]||(u[3]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-2"}," 交易须知 ",-1)),C(e("textarea",{"onUpdate:modelValue":u[0]||(u[0]=V=>x.value.vendor_toc=V),rows:"6",placeholder:`设置您的交易须知和注意事项，例如：
• 请使用本人实名账户付款
• 付款后请主动提供付款截图
• 付款备注请勿包含敏感词汇
• 确认付款后请耐心等待放币
• 交易时间为每日 9:00-22:00
• 大额交易可能需要额外验证`,class:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-gray-900 dark:text-slate-100 focus:ring-2 focus:ring-emerald-500 focus:border-transparent resize-none"},null,512),[[B,x.value.vendor_toc]]),u[4]||(u[4]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-slate-400"}," 向交易对方展示的交易条款和注意事项 ",-1))]),e("div",null,[u[5]||(u[5]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-2"}," 自动欢迎消息 ",-1)),C(e("textarea",{"onUpdate:modelValue":u[1]||(u[1]=V=>x.value.welcome_message=V),rows:"3",placeholder:`当用户开始交易时自动发送的消息，例如：
您好！感谢选择与我交易，请仔细阅读交易条款。有任何问题请随时联系我。`,class:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-gray-900 dark:text-slate-100 focus:ring-2 focus:ring-emerald-500 focus:border-transparent resize-none"},null,512),[[B,x.value.welcome_message]]),u[6]||(u[6]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-slate-400"}," 交易开始时自动发送给对方的欢迎消息 ",-1))]),e("div",null,[u[9]||(u[9]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-2"}," 预览效果 ",-1)),e("div",kt,[x.value.vendor_toc?(o(),n("div",ft,[u[7]||(u[7]=e("p",{class:"text-xs font-medium text-gray-600 dark:text-slate-400 mb-1"},"交易须知",-1)),e("p",ht,i(x.value.vendor_toc),1)])):m("",!0),x.value.welcome_message?(o(),n("div",_t,[u[8]||(u[8]=e("p",{class:"text-xs font-medium text-gray-600 dark:text-slate-400 mb-1"},"自动欢迎消息",-1)),e("p",wt,i(x.value.welcome_message),1)])):m("",!0),!x.value.vendor_toc&&!x.value.welcome_message?(o(),n("p",Ct," 暂无内容 ")):m("",!0)])])])]),_:1},8,["modelValue","loading"]))}},Vt={class:"bg-white dark:bg-slate-900 border-b border-gray-200 dark:border-slate-800"},Mt={class:"mx-auto max-w-7xl px-4 py-3 sm:py-4 sm:px-6 lg:px-8"},Lt={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-4 mb-3 sm:mb-4"},St={class:"flex items-center gap-2 sm:gap-3"},Tt={class:"text-center"},zt={class:"text-xl sm:text-2xl font-bold text-emerald-600 dark:text-emerald-500"},At={class:"text-center"},Pt={class:"text-xl sm:text-2xl font-bold text-blue-600 dark:text-blue-500"},Bt={class:"text-center"},jt={class:"text-xl sm:text-2xl font-bold text-gray-600 dark:text-slate-400"},Ut={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},Dt={class:"flex items-center gap-2 order-2 sm:order-1 overflow-x-auto"},Nt={class:"flex items-center bg-gray-100 dark:bg-slate-800 rounded-lg p-0.5"},Et=["onClick"],Ht={class:"flex items-center bg-gray-100 dark:bg-slate-800 rounded-lg p-0.5"},Ft=["onClick"],It={class:"flex items-center gap-2 order-1 sm:order-2"},Yt={class:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"},Rt={key:0,class:"flex items-center justify-center py-12"},qt={key:1,class:"text-center py-12 bg-white dark:bg-slate-900 rounded-lg border border-gray-200 dark:border-slate-800"},Gt={key:2,class:"hidden md:block space-y-4"},Jt={class:"p-4"},Kt={class:"grid grid-cols-12 gap-4 items-center"},Qt={class:"col-span-3"},Wt={class:"flex flex-col gap-2"},Xt={class:"flex items-center gap-3"},Zt={class:"w-10 h-10 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-slate-700 dark:to-slate-800 flex items-center justify-center shadow-sm"},Ot={class:"font-semibold text-gray-900 dark:text-slate-100"},ea={class:"text-xs text-gray-500 dark:text-slate-500 ml-2"},ta={class:"flex items-center gap-1.5"},aa={key:0,class:"h-1.5 w-1.5 bg-emerald-500 rounded-full animate-pulse"},sa={class:"col-span-4"},ra={class:"space-y-1.5"},la={class:"flex items-start gap-2 flex-wrap"},oa={class:"px-2 py-0.5 bg-blue-500/10 border border-blue-500/20 dark:border-blue-500/30 rounded text-xs font-medium text-blue-600 dark:text-blue-400"},na={class:"px-2 py-0.5 bg-gray-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded text-xs text-gray-700 dark:text-slate-400"},da={key:0,class:"text-xs text-gray-600 dark:text-slate-400 italic line-clamp-2"},ia={class:"col-span-2 text-right"},ua={key:0,class:"text-xl lg:text-2xl text-emerald-500 font-bold leading-none"},ca={key:1,class:"text-xl lg:text-2xl text-emerald-500 font-bold leading-none"},ma={class:"text-xs mt-0.5 text-gray-500 dark:text-slate-400"},xa={class:"col-span-3"},pa={class:"text-right"},ga={class:"text-sm mb-2"},va={class:"text-emerald-500 font-medium ml-1"},ya={class:"flex justify-end gap-1"},ba=["onClick"],ka=["onClick"],fa=["onClick"],ha=["onClick"],_a=["onClick"],wa={key:3,class:"md:hidden space-y-3"},Ca={class:"p-3"},$a={class:"flex items-center justify-between mb-3"},Va={class:"flex items-center gap-2.5"},Ma={class:"w-9 h-9 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-slate-700 dark:to-slate-800 flex items-center justify-center shadow-sm"},La={class:"font-medium text-sm text-gray-900 dark:text-slate-100"},Sa={class:"text-xs text-gray-500 dark:text-slate-500 ml-1"},Ta={class:"flex items-center gap-1"},za={key:0,class:"h-1.5 w-1.5 bg-emerald-500 rounded-full animate-pulse"},Aa={class:"text-right"},Pa={key:0,class:"text-lg font-bold text-emerald-600 dark:text-emerald-400"},Ba={key:1,class:"text-lg font-bold text-emerald-600 dark:text-emerald-400"},ja={class:"text-xs text-gray-500 dark:text-slate-400"},Ua={class:"mb-2 text-xs"},Da={class:"flex items-center justify-between mb-1"},Na={class:"text-gray-600 dark:text-slate-400"},Ea={class:"flex gap-1"},Ha={class:"px-1.5 py-0.5 bg-blue-500/10 border border-blue-500/20 dark:border-blue-500/30 rounded text-blue-600 dark:text-blue-400"},Fa={class:"px-1.5 py-0.5 bg-gray-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded text-gray-700 dark:text-slate-400"},Ia={key:0,class:"text-gray-600 dark:text-slate-400 italic line-clamp-2"},Ya={class:"flex items-center gap-2 justify-end"},Ra=["onClick"],qa=["onClick"],Ga=["onClick"],Ja=["onClick"],Ka=["onClick"],Qa={class:"px-3 py-1 bg-gray-50 dark:bg-slate-800/30 border-t border-gray-200 dark:border-slate-800"},Wa={class:"flex items-center justify-between text-xs"},Xa={class:"text-gray-500 dark:text-slate-500"},Za={key:4,class:"mt-6"},Oa={key:0},es={key:1},gs={__name:"Index",props:{userAddresses:{type:Array,default:()=>[]}},setup(v){Le();const D=v,c=g(0);g(98);const w=g(245);g(5);const h=g(""),_=g(""),x=g(!1),S=g(!1),a=g(null),b=g(!1),y=g(!1),u=g(null),V=g(!1),T=g(null),N=g(null),K=g({auto_reply_message:"",min_trade_limit:100,max_trade_limit:1e4,verification_required:!1,preferred_time_zone:"Asia/Shanghai",trading_hours_enabled:!1,trading_hours_start:"09:00",trading_hours_end:"22:00"}),te=[{value:"",label:"全部"},{value:"active",label:"活跃"},{value:"paused",label:"已暂停"},{value:"archived",label:"已归档"}],ae=[{value:"",label:"全部"},{value:"buy",label:"商家出售"},{value:"sell",label:"商家收购"}],M=g([]),Y=g(0),E=g(1),Q=g(10),A=async()=>{b.value=!0;try{const p={per_page:Q.value,page:E.value};h.value&&h.value!==""&&(p.status=h.value),_.value&&_.value!==""&&(p.type=_.value),console.log("Fetching ads with params:",p);const l=await j.get("/web/api/ads/my",{params:p});console.log("API Response:",l.data.data),M.value=(l.data.data.ads||[]).filter(t=>t).map(t=>({id:t.id,type:t.trade_type,trade_type:t.trade_type,currency:t.currency_key,currency_key:t.currency_key,currency_label:t.currency_label,chain:t.chain,price:t.price||0,price_model:t.price_model,priceType:t.price_model==="fixed"?"固定":"浮动",margin:t.margin,minLimit:t.min_limit||0,min_limit:t.min_limit||0,maxLimit:t.max_limit||0,max_limit:t.max_limit||0,payment_method:t.payment_method,payment_details:t.payment_details,payment_time_limit:t.payment_time_limit,paymentMethods:[t.payment_method],status:t.status==="inactive"?"paused":t.status==="archived"?"archived":t.status,fiat_currency:t.fiat_currency,country:t.country,vendor_toc:t.vendor_toc,welcome_message:t.welcome_message,notes:t.notes,createdAt:new Date(t.created_at).toLocaleDateString("zh-CN")})),console.log("Processed offers:",M.value),c.value=M.value.filter(t=>t.status==="active").length,w.value=l.data.data.ads.reduce((t,L)=>t+L.trades_count,0),Y.value=l.data.data.pagination.total}catch(p){console.error("Error fetching ads:",p),M.value=[]}finally{b.value=!1}},R=p=>{a.value=p,x.value=!0},H=(p,l)=>{N.value=p,T.value=l,V.value=!0},r=async()=>{try{const p=T.value==="pause"?"inactive":"active";await j.post(`/web/api/ads/${N.value}/toggle-status`,{status:p}),await A()}catch(p){console.error("Error toggling offer status:",p)}V.value=!1,N.value=null,T.value=null},s=()=>{V.value=!1,N.value=null,T.value=null},d=p=>{u.value=p,y.value=!0},oe=async()=>{try{await j.post(`/web/api/ads/${u.value}/archive`),await A()}catch(p){console.error("Error archiving offer:",p)}y.value=!1,u.value=null},ne=()=>{y.value=!1,u.value=null},de=async p=>{try{await j.post(`/web/api/ads/${p}/restore`),await A()}catch(l){console.error("Error restoring offer:",l)}},fe=async()=>{x.value=!1,a.value=null,await A()},he=p=>{K.value=p};I([h,_],()=>{E.value=1,A()});const{fetchConfig:_e,getCountryByCode:we,paymentMethods:Ce}=be(),ie=p=>{if(!p)return"全球";const l=we(p);return l?l.name:p};return ee(async()=>{await _e(),A()}),(p,l)=>(o(),U(Te,null,{default:$(()=>[f(F(Se),{title:"我的发布"}),e("div",Vt,[e("div",Mt,[e("div",Lt,[l[11]||(l[11]=e("div",null,[e("h1",{class:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-slate-100"},"我的发布"),e("p",{class:"hidden sm:block text-sm text-gray-500 dark:text-slate-400 mt-1"},"管理您的交易广告")],-1)),e("div",St,[e("div",Tt,[e("p",zt,i(c.value),1),l[6]||(l[6]=e("p",{class:"text-xs text-gray-500 dark:text-slate-400"},"活跃广告",-1))]),l[9]||(l[9]=e("div",{class:"h-6 sm:h-8 w-px bg-gray-200 dark:bg-slate-700"},null,-1)),e("div",At,[e("p",Pt,i(M.value.filter(t=>t.status==="paused").length),1),l[7]||(l[7]=e("p",{class:"text-xs text-gray-500 dark:text-slate-400"},"已暂停",-1))]),l[10]||(l[10]=e("div",{class:"h-6 sm:h-8 w-px bg-gray-200 dark:bg-slate-700"},null,-1)),e("div",Bt,[e("p",jt,i(Y.value),1),l[8]||(l[8]=e("p",{class:"text-xs text-gray-500 dark:text-slate-400"},"总广告",-1))])])]),e("div",Ut,[e("div",Dt,[e("div",Nt,[(o(),n(G,null,J(te,t=>e("button",{key:t.value||"all",onClick:L=>h.value=t.value,class:z(["px-3 py-1.5 text-xs font-medium rounded-md transition-all whitespace-nowrap cursor-pointer",h.value===t.value?"bg-white dark:bg-slate-700 text-emerald-600 dark:text-emerald-400 shadow-sm":"text-gray-600 dark:text-slate-400 hover:text-gray-900 dark:hover:text-slate-200"])},i(t.label),11,Et)),64))]),e("div",Ht,[(o(),n(G,null,J(ae,t=>e("button",{key:t.value||"all",onClick:L=>_.value=t.value,class:z(["px-3 py-1.5 text-xs font-medium rounded-md transition-all whitespace-nowrap cursor-pointer",_.value===t.value?"bg-white dark:bg-slate-700 text-emerald-600 dark:text-emerald-400 shadow-sm":"text-gray-600 dark:text-slate-400 hover:text-gray-900 dark:hover:text-slate-200"])},i(t.label),11,Ft)),64))])]),e("div",It,[f(se,{onClick:l[0]||(l[0]=t=>x.value=!0),variant:"primary",size:"sm"},{icon:$(()=>[...l[12]||(l[12]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])]),default:$(()=>[l[13]||(l[13]=k(" 创建发布 ",-1))]),_:1}),f(se,{onClick:l[1]||(l[1]=t=>S.value=!0),variant:"ghost",size:"sm",class:"hidden sm:inline-flex"},{icon:$(()=>[...l[14]||(l[14]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])]),default:$(()=>[l[15]||(l[15]=k(" 交易设置 ",-1))]),_:1}),f(se,{onClick:l[2]||(l[2]=t=>p.$inertia.visit("/notifications/settings")),variant:"ghost",size:"sm",class:"hidden sm:inline-flex"},{icon:$(()=>[...l[16]||(l[16]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)])]),default:$(()=>[l[17]||(l[17]=k(" 通知设置 ",-1))]),_:1})])])])]),e("div",Yt,[b.value?(o(),n("div",Rt,[...l[18]||(l[18]=[e("svg",{class:"animate-spin h-8 w-8 text-emerald-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):M.value.length===0?(o(),n("div",qt,[...l[19]||(l[19]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 dark:text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-slate-100"},"暂无广告",-1),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-slate-400"},'点击"创建发布"开始发布您的第一个交易广告',-1)])])):m("",!0),!b.value&&M.value.length>0?(o(),n("div",Gt,[(o(!0),n(G,null,J(M.value,t=>(o(),n("div",{key:t?.id,class:"bg-white dark:bg-slate-900/60 border border-gray-200 dark:border-slate-800 rounded-lg hover:border-gray-300 dark:hover:border-slate-700 transition-all group shadow-sm dark:shadow-none"},[e("div",Jt,[e("div",Kt,[e("div",Qt,[e("div",Wt,[e("div",Xt,[e("div",Zt,[(o(),U(O(F(ge)(t?.currency)),{size:20,class:"dark:brightness-110"}))]),e("div",null,[e("div",Ot,[k(i(t?.currency_label||t?.currency||"USDT")+" ",1),e("span",ea,"#"+i(t?.id),1)]),e("div",ta,[e("span",{class:z(["text-xs font-medium",t?.type==="sell"?"text-blue-600 dark:text-blue-400":"text-emerald-600 dark:text-emerald-400"])},i(t?.type==="sell"?"商家收购":"商家出售"),3),t?.status==="active"?(o(),n("span",aa)):m("",!0)])])])])]),e("div",sa,[e("div",ra,[e("div",la,[e("span",oa,i(F(le)(t?.payment_method)?.label||t?.payment_method),1),e("span",na," 📍 "+i(ie(t?.country)),1)]),t?.notes?(o(),n("div",da,i(t?.notes),1)):m("",!0)])]),e("div",ia,[t?.price_model==="fixed"?(o(),n("p",ua," ¥"+i(t?.price?.toLocaleString()||"0"),1)):(o(),n("p",ca,i(t?.margin>0?"+":"")+i(t?.margin||0)+"% ",1)),e("div",ma,i(t?.price_model==="fixed"?"固定单价":"动态单价")+" · "+i(t?.fiat_currency||"CNY"),1)]),e("div",xa,[e("div",pa,[e("div",ga,[l[20]||(l[20]=e("span",{class:"text-xs text-gray-500 dark:text-slate-500"},"限额:",-1)),e("span",va," ¥"+i(t?.minLimit?.toLocaleString()||"0")+" - ¥"+i(t?.maxLimit?.toLocaleString()||"0"),1)]),e("div",ya,[t?.status==="active"?(o(),n("button",{key:0,onClick:L=>H(t?.id,"pause"),class:"px-3 py-1.5 text-sm font-medium text-amber-600 dark:text-amber-400 bg-amber-50 dark:bg-amber-900/20 rounded-lg hover:bg-amber-100 dark:hover:bg-amber-900/30 transition-colors cursor-pointer"}," 暂停 ",8,ba)):t?.status==="paused"?(o(),n("button",{key:1,onClick:L=>H(t?.id,"activate"),class:"px-3 py-1.5 text-sm font-medium text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg hover:bg-emerald-100 dark:hover:bg-emerald-900/30 transition-colors cursor-pointer"}," 激活 ",8,ka)):t?.status==="archived"?(o(),n("button",{key:2,onClick:L=>de(t?.id),class:"px-3 py-1.5 text-sm font-medium text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg hover:bg-emerald-100 dark:hover:bg-emerald-900/30 transition-colors cursor-pointer"}," 恢复 ",8,fa)):m("",!0),t?.status!=="archived"?(o(),n("button",{key:3,onClick:L=>R(t),class:"px-3 py-1.5 text-sm font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors cursor-pointer"}," 编辑 ",8,ha)):m("",!0),t?.status!=="archived"?(o(),n("button",{key:4,onClick:L=>d(t?.id),class:"px-3 py-1.5 text-sm font-medium text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-900/20 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-900/30 transition-colors cursor-pointer"}," 归档 ",8,_a)):m("",!0)])])])])])]))),128))])):m("",!0),!b.value&&M.value.length>0?(o(),n("div",wa,[(o(!0),n(G,null,J(M.value,t=>(o(),n("div",{key:t?.id,class:"bg-white dark:bg-slate-900 rounded-lg border border-gray-200 dark:border-slate-800 overflow-hidden"},[e("div",Ca,[e("div",$a,[e("div",Va,[e("div",Ma,[(o(),U(O(F(ge)(t?.currency)),{size:18,class:"dark:brightness-110"}))]),e("div",null,[e("div",La,[k(i(t?.currency_label||t?.currency||"USDT")+" ",1),e("span",Sa,"#"+i(t?.id),1)]),e("div",Ta,[e("span",{class:z(["text-xs font-medium",t?.type==="sell"?"text-blue-600 dark:text-blue-400":"text-emerald-600 dark:text-emerald-400"])},i(t?.type==="sell"?"商家收购":"商家出售"),3),t?.status==="active"?(o(),n("span",za)):m("",!0)])])]),e("div",Aa,[t?.price_model==="fixed"?(o(),n("div",Pa," ¥"+i((t?.price||0).toLocaleString()),1)):(o(),n("div",Ba,i(t?.margin>0?"+":"")+i(t?.margin||0)+"% ",1)),e("div",ja,i(t?.price_model==="fixed"?"固定":"浮动"),1)])]),e("div",Ua,[e("div",Da,[e("span",Na," 限额: ¥"+i((t?.minLimit||0).toLocaleString())+"-"+i((t?.maxLimit||0).toLocaleString()),1),e("div",Ea,[e("span",Ha,i(F(le)(t?.payment_method)?.label||t?.payment_method),1),e("span",Fa," 📍 "+i(ie(t?.country)),1)])]),t?.notes?(o(),n("div",Ia,i(t?.notes),1)):m("",!0)]),e("div",Ya,[t?.status==="active"?(o(),n("button",{key:0,onClick:L=>H(t?.id,"pause"),class:"px-2 py-1 text-xs font-medium text-amber-600 dark:text-amber-400 bg-amber-50 dark:bg-amber-900/20 rounded hover:bg-amber-100 dark:hover:bg-amber-900/30 transition-colors cursor-pointer"}," 暂停 ",8,Ra)):t?.status==="paused"?(o(),n("button",{key:1,onClick:L=>H(t?.id,"activate"),class:"px-2 py-1 text-xs font-medium text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 rounded hover:bg-emerald-100 dark:hover:bg-emerald-900/30 transition-colors cursor-pointer"}," 激活 ",8,qa)):t?.status==="archived"?(o(),n("button",{key:2,onClick:L=>de(t?.id),class:"px-2 py-1 text-xs font-medium text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 rounded hover:bg-emerald-100 dark:hover:bg-emerald-900/30 transition-colors cursor-pointer"}," 恢复 ",8,Ga)):m("",!0),t?.status!=="archived"?(o(),n("button",{key:3,onClick:L=>R(t),class:"px-2 py-1 text-xs font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 rounded hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors cursor-pointer"}," 编辑 ",8,Ja)):m("",!0),t?.status!=="archived"?(o(),n("button",{key:4,onClick:L=>d(t?.id),class:"px-2 py-1 text-xs font-medium text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-900/20 rounded hover:bg-gray-100 dark:hover:bg-gray-900/30 transition-colors cursor-pointer"}," 归档 ",8,Ka)):m("",!0)])]),e("div",Qa,[e("div",Wa,[e("span",{class:z(["px-1.5 py-0.5 font-medium rounded",t?.status==="active"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":t?.status==="paused"?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400":t?.status==="archived"?"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400":"bg-gray-100 dark:bg-slate-800 text-gray-700 dark:text-slate-400"])},i(t?.status==="active"?"● 活跃":t?.status==="paused"?"● 已暂停":t?.status==="archived"?"● 已归档":"● 未知"),3),e("span",Xa,i(t?.createdAt),1)])])]))),128))])):m("",!0),b.value?m("",!0):(o(),n("div",Za,[f(ze,{"current-page":E.value,total:Y.value,"per-page":Q.value,"onUpdate:currentPage":l[3]||(l[3]=t=>E.value=t)},null,8,["current-page","total","per-page"])]))]),f(yt,{modelValue:x.value,"onUpdate:modelValue":l[4]||(l[4]=t=>x.value=t),offer:a.value,"trade-settings":K.value,"user-addresses":D.userAddresses,"payment-methods":F(Ce),onSuccess:fe},null,8,["modelValue","offer","trade-settings","user-addresses","payment-methods"]),f($t,{modelValue:S.value,"onUpdate:modelValue":l[5]||(l[5]=t=>S.value=t),onSaved:he},null,8,["modelValue"]),f(me,{show:y.value,title:"归档广告","confirm-text":"确认归档","cancel-text":"取消",danger:!1,onConfirm:oe,onCancel:ne,onClose:ne},{default:$(()=>[...l[21]||(l[21]=[e("p",null,"确定要归档这个广告吗？",-1),e("p",{class:"mt-2 text-xs"},"归档后的广告将不再显示在列表中，但您的数据会被保留。",-1)])]),_:1},8,["show"]),f(me,{show:V.value,title:T.value==="pause"?"暂停广告":"激活广告","confirm-text":T.value==="pause"?"确认暂停":"确认激活","cancel-text":"取消",danger:!1,"confirm-variant":T.value==="pause"?"warning":"primary",onConfirm:r,onCancel:s,onClose:s},{default:$(()=>[T.value==="pause"?(o(),n("p",Oa," 确定要暂停这个广告吗？暂停后其他用户将无法看到这个广告。 ")):(o(),n("p",es," 确定要激活这个广告吗？激活后其他用户将可以看到并与您进行交易。 "))]),_:1},8,["show","title","confirm-text","confirm-variant"])]),_:1}))}};export{gs as default};
