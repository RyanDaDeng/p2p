import{g as I,h as ee,i as xe,c as U,o,b as f,w as $,f as d,l as m,a as e,T as se,t as i,k as ie,q as k,I as $e,d as P,r as x,j as Ve,n as z,e as C,R as W,J as O,F as J,s as K,m as Me,A as j,M as ue,K as B,E as Le,p as H,y as Se}from"./app-Ddr6hCNG.js";import{P as Te}from"./P2PAppLayout-C1kqncps.js";import{_ as re}from"./P2PButton-Dxqc2OFp.js";import{_ as ze}from"./P2PPagination-BPygI9mN.js";import{_ as ce}from"./P2PDialog-_tJhSYHK.js";import{_ as ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as X}from"./P2PSelect-B0K5Iohi.js";import{_ as Ae}from"./P2PPaymentMethodPicker-B0Q3WvE0.js";import{u as pe}from"./useConfig-Bkoq6w0o.js";import{g as le}from"./paymentMethods-stziNKzb.js";import{c as Z,b as q,a as me,_ as ge}from"./UsdcIcon-CgqEU0O9.js";import{g as ye}from"./crypto-qMyIuXw8.js";/* empty css                                                                  */const Pe={key:0,class:"fixed inset-0 z-50 overflow-hidden"},je={class:"flex items-center justify-center min-h-screen p-4"},Be={key:0,class:"relative bg-white dark:bg-gray-900 rounded shadow-2xl w-full max-w-2xl max-h-[90vh] md:max-h-[85vh] flex flex-col pt-safe"},Ue={class:"flex-shrink-0 px-6 py-4 border-b border-gray-200 dark:border-gray-800"},De={class:"flex items-center justify-between"},Ee={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},Ne={key:0,class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},Fe={class:"flex-1 overflow-y-auto px-6 py-4 scrollbar-thin"},He={class:"flex-shrink-0 px-6 py-4 border-t border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-gray-800 rounded-b"},Ie={class:"flex flex-col-reverse sm:flex-row sm:justify-end gap-3"},Re=["disabled"],Ye={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},qe={__name:"P2PPublishDialog",props:{modelValue:{type:Boolean,default:!1},title:{type:String,required:!0},subtitle:{type:String,default:""},showCancel:{type:Boolean,default:!0},showConfirm:{type:Boolean,default:!0},cancelText:{type:String,default:"取消"},confirmText:{type:String,default:"确认"},confirmDisabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},persistent:{type:Boolean,default:!1}},emits:["update:modelValue","confirm","cancel","close"],setup(v,{emit:D}){const c=v,w=D,h=()=>{!c.persistent&&!c.loading&&(w("update:modelValue",!1),w("close"))},_=()=>{c.loading||(w("cancel"),w("update:modelValue",!1))},g=()=>{!c.confirmDisabled&&!c.loading&&w("confirm")},S=a=>{a.key==="Escape"&&c.modelValue&&h()};return I(()=>c.modelValue,a=>{a?document.body.style.overflow="hidden":document.body.style.overflow=""}),ee(()=>{document.addEventListener("keydown",S)}),xe(()=>{document.removeEventListener("keydown",S),document.body.style.overflow=""}),(a,b)=>(o(),U($e,{to:"body"},[f(se,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:$(()=>[v.modelValue?(o(),d("div",Pe,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:h}),e("div",je,[f(se,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to-class":"opacity-100 translate-y-0 sm:scale-100","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 translate-y-0 sm:scale-100","leave-to-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:$(()=>[v.modelValue?(o(),d("div",Be,[e("div",Ue,[e("div",De,[e("div",null,[e("h2",Ee,i(v.title),1),v.subtitle?(o(),d("p",Ne,i(v.subtitle),1)):m("",!0)]),e("button",{onClick:h,class:"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors cursor-pointer"},[...b[0]||(b[0]=[e("svg",{class:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",Fe,[ie(a.$slots,"content",{},void 0,!0)]),e("div",He,[ie(a.$slots,"footer",{},()=>[e("div",Ie,[v.showCancel?(o(),d("button",{key:0,onClick:_,class:"w-full sm:w-auto px-6 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors cursor-pointer"},i(v.cancelText),1)):m("",!0),v.showConfirm?(o(),d("button",{key:1,onClick:g,disabled:v.confirmDisabled||v.loading,class:"w-full sm:w-auto px-6 py-2.5 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-500 dark:hover:bg-emerald-600 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer flex items-center justify-center"},[v.loading?(o(),d("svg",Ye,[...b[1]||(b[1]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):m("",!0),k(" "+i(v.confirmText),1)],8,Re)):m("",!0)])],!0)])])):m("",!0)]),_:3})])])):m("",!0)]),_:3})]))}},be=ve(qe,[["__scopeId","data-v-36cd033d"]]),Je={class:"grid grid-cols-2 gap-3"},Ke={key:0,class:"absolute top-2 right-2"},Ge={key:0,class:"absolute top-2 right-2"},Qe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},We={class:"flex items-center"},Xe={class:"absolute z-50 mt-2 w-full rounded bg-white dark:bg-gray-900 shadow-xl ring-1 ring-gray-200 dark:ring-gray-700"},Ze={class:"max-h-60 overflow-auto py-1 custom-scrollbar"},Oe=["onClick"],et={class:"flex items-center"},tt={key:0,class:"h-4 w-4 text-emerald-500",fill:"currentColor",viewBox:"0 0 20 20"},at={class:"emerald-focus"},rt={class:"emerald-focus"},st={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},lt={class:"emerald-focus"},ot={class:"space-y-3"},dt={class:"flex gap-3"},nt={class:"flex items-center cursor-pointer"},it={class:"flex items-center cursor-pointer"},ut={key:0,class:"flex items-center gap-2"},ct={class:"text-gray-500 dark:text-gray-400"},mt={key:1,class:"flex items-center gap-2"},gt={class:"w-32 emerald-focus"},yt={class:"grid grid-cols-2 gap-3"},xt={class:"relative"},vt={class:"absolute right-3 top-2.5 text-gray-500 dark:text-gray-400 text-sm"},pt={class:"relative"},bt={class:"absolute right-3 top-2.5 text-gray-500 dark:text-gray-400 text-sm"},kt={class:"border border-gray-200 dark:border-gray-700 rounded p-4 space-y-4"},ft={__name:"CreateOfferModal",props:{modelValue:{type:Boolean,default:!1},offer:{type:Object,default:null},tradeSettings:{type:Object,default:null},userAddresses:{type:Array,default:()=>[]},paymentMethods:{type:Array,default:()=>[]}},emits:["update:modelValue","success"],setup(v,{emit:D}){const c=v,w=D,h=P({get:()=>c.modelValue,set:s=>w("update:modelValue",s)}),_=x(!1),g=x(!1),S=x(null),a=x({type:"buy",currency:"",fiatCurrency:"CNY",country:"",verifiedAddress:"",priceType:"fixed",fixedPrice:"",floatingMargin:"+",marginPercent:"",minLimit:"",maxLimit:"",paymentMethod:"",paymentTimeLimit:15,welcomeMessage:"",tradeTerms:"",notes:""}),b={btc:ge,eth:me,"erc-usdt":q,"trc-usdt":q,"bep-usdt":q,"erc-usdc":Z,"trc-usdc":Z,"bep-usdc":Z},p=s=>s?b[s]?b[s]:s.includes("usdt")?q:s.includes("usdc")?Z:s.includes("btc")?ge:s.includes("eth")?me:q:null,u=s=>{a.value.currency=s.value,g.value=!1},V=s=>{S.value&&!S.value.contains(s.target)&&(g.value=!1)},{fetchConfig:T,getCryptocurrencyOptions:E,getPaymentMethodOptions:G,getFiatCurrencyOptions:te,getCountryOptions:ae}=pe(),M=P(()=>E()),R=P(()=>ae()),N=P(()=>te());P(()=>G()),ee(async()=>{try{await T()}catch(s){console.error("Failed to load config:",s)}document.addEventListener("click",V)}),xe(()=>{document.removeEventListener("click",V)});const Q=P(()=>!c.userAddresses||c.userAddresses.length===0?[]:c.userAddresses.map(s=>({...s,disabled:a.value.currency&&s.currency_key!==a.value.currency}))),A=P(()=>a.value.type&&a.value.currency&&a.value.country&&a.value.verifiedAddress&&a.value.minLimit&&a.value.maxLimit&&a.value.paymentMethod&&(a.value.priceType==="fixed"&&a.value.fixedPrice||a.value.priceType==="floating"&&a.value.marginPercent));P(()=>a.value.paymentMethod?le(a.value.paymentMethod):null);const Y=()=>{w("update:modelValue",!1)},F=async()=>{if(!A.value){if(!a.value.verifiedAddress){ue.error(`请选择${a.value.type==="buy"?"发款":"收款"}地址`);return}return}_.value=!0;try{const s={currency_key:a.value.currency,fiat_currency:a.value.fiatCurrency,trade_type:a.value.type,trade_address:a.value.verifiedAddress,min_limit:parseFloat(a.value.minLimit),max_limit:parseFloat(a.value.maxLimit),price:a.value.priceType==="fixed"?parseFloat(a.value.fixedPrice):null,price_model:a.value.priceType==="fixed"?"fixed":"dynamic",margin:a.value.priceType==="floating"?parseFloat((a.value.floatingMargin==="+"?1:-1)*a.value.marginPercent):null,payment_method:a.value.paymentMethod,payment_time_limit:a.value.paymentTimeLimit,country:a.value.country,vendor_toc:a.value.tradeTerms||"",welcome_message:a.value.welcomeMessage||"",notes:a.value.notes||""};let r;c.offer?r=await B.put(`/web/api/ads/${c.offer.id}`,s):r=await B.post("/web/api/ads",s),r.data.success&&(w("success"),Y())}catch(s){ue.error(s.response?.data?.message||"操作失败"),console.error("Error submitting offer:",s)}finally{_.value=!1}};return I(()=>a.value.currency,()=>{a.value.verifiedAddress=""}),I(()=>a.value.type,s=>{s==="buy"&&(a.value.verifiedAddress=""),c.tradeSettings&&c.tradeSettings.vendor_toc&&(a.value.tradeTerms=c.tradeSettings.vendor_toc)}),I(()=>c.offer,s=>{if(s){const r=s.type||s.trade_type;a.value={type:r,currency:s.currency||s.cryptocurrency,fiatCurrency:s.fiat_currency||"CNY",country:s.country,verifiedAddress:s.verifiedAddress||"",priceType:s.price_model==="fixed"?"fixed":"floating",fixedPrice:s.price||s.fixedPrice||"",floatingMargin:s.margin!==null&&s.margin!==void 0&&s.margin<0?"-":"+",marginPercent:Math.abs(s.margin||0).toString(),minLimit:s.minLimit||s.min_limit||"",maxLimit:s.maxLimit||s.max_limit||"",paymentMethod:s.payment_method||"",paymentTimeLimit:s.payment_time_limit||15,welcomeMessage:s.welcome_message||"",tradeTerms:s.vendor_toc||"",notes:s.notes||""}}},{immediate:!0}),I(()=>c.modelValue,s=>{s&&!c.offer&&(a.value={type:"buy",currency:"",fiatCurrency:"CNY",country:"",verifiedAddress:"",priceType:"fixed",fixedPrice:"",floatingMargin:"+",marginPercent:"",minLimit:"",maxLimit:"",paymentMethod:"",paymentTimeLimit:15,welcomeMessage:"",tradeTerms:""},c.tradeSettings&&(c.tradeSettings.welcome_message&&(a.value.welcomeMessage=c.tradeSettings.welcome_message),c.tradeSettings.vendor_toc&&(a.value.tradeTerms=c.tradeSettings.vendor_toc)))}),(s,r)=>(o(),U(be,{modelValue:h.value,"onUpdate:modelValue":r[18]||(r[18]=n=>h.value=n),title:v.offer?`编辑广告 #${v.offer.id}`:"创建广告",subtitle:v.offer?"修改您的交易广告信息":"创建新的交易广告，开始接受订单","confirm-text":v.offer?"保存修改":"创建广告","confirm-disabled":!A.value,loading:_.value,onConfirm:F,onCancel:Y},{content:$(()=>[e("form",{onSubmit:r[17]||(r[17]=Ve(()=>{},["prevent"])),class:"space-y-6"},[e("div",null,[r[23]||(r[23]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"交易类型",-1)),e("div",Je,[e("label",{class:z(["relative flex items-center justify-center p-4 border-2 rounded cursor-pointer transition-all",a.value.type==="buy"?"border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[C(e("input",{type:"radio","onUpdate:modelValue":r[0]||(r[0]=n=>a.value.type=n),value:"buy",class:"sr-only"},null,512),[[W,a.value.type]]),r[20]||(r[20]=e("div",{class:"text-center"},[e("svg",{class:"w-8 h-8 mx-auto mb-2 text-emerald-600 dark:text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})]),e("p",{class:"font-medium text-gray-900 dark:text-gray-100"},"商家出售"),e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"向用户出售虚拟货币")],-1)),a.value.type==="buy"?(o(),d("div",Ke,[...r[19]||(r[19]=[e("svg",{class:"w-5 h-5 text-emerald-600 dark:text-emerald-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):m("",!0)],2),e("label",{class:z(["relative flex items-center justify-center p-4 border-2 rounded cursor-pointer transition-all",a.value.type==="sell"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[C(e("input",{type:"radio","onUpdate:modelValue":r[1]||(r[1]=n=>a.value.type=n),value:"sell",class:"sr-only"},null,512),[[W,a.value.type]]),r[22]||(r[22]=e("div",{class:"text-center"},[e("svg",{class:"w-8 h-8 mx-auto mb-2 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("p",{class:"font-medium text-gray-900 dark:text-gray-100"},"商家收购"),e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"从用户手中收购虚拟货币")],-1)),a.value.type==="sell"?(o(),d("div",Ge,[...r[21]||(r[21]=[e("svg",{class:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):m("",!0)],2)])]),e("div",Qe,[e("div",null,[r[27]||(r[27]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[k("虚拟货币 "),e("span",{class:"text-red-500"},"*")],-1)),e("div",{class:"relative",ref_key:"currencyDropdownRef",ref:S},[e("button",{type:"button",onClick:r[2]||(r[2]=n=>g.value=!g.value),class:z(["w-full px-4 h-10 pr-10 text-sm text-left bg-white dark:bg-gray-900/50 border rounded transition-all duration-200 cursor-pointer focus:outline-none focus:ring-1 focus:ring-emerald-500/20 flex items-center",g.value?"border-emerald-500/50 text-gray-900 dark:text-gray-100":"border-gray-300 dark:border-gray-700 hover:border-gray-400 dark:hover:border-gray-500"])},[e("span",We,[a.value.currency&&p(a.value.currency)?(o(),U(O(p(a.value.currency)),{key:0,size:20,class:"mr-2"})):m("",!0),e("span",{class:z(a.value.currency?"text-gray-900 dark:text-gray-100":"text-gray-500 dark:text-gray-400")},i(a.value.currency?M.value.find(n=>n.value===a.value.currency)?.label:"选择币种"),3)]),(o(),d("svg",{class:z(["absolute right-3 top-3 h-4 w-4 text-gray-500 dark:text-gray-500 transition-transform duration-200",{"rotate-180":g.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...r[24]||(r[24]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],2),f(se,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:$(()=>[C(e("div",Xe,[r[26]||(r[26]=e("div",{class:"px-3 py-2 border-b border-gray-200 dark:border-gray-700/50"},[e("p",{class:"text-xs font-medium text-gray-500 dark:text-gray-400"},"选择币种")],-1)),e("div",Ze,[(o(!0),d(J,null,K(M.value,n=>(o(),d("button",{key:n.value,type:"button",onClick:oe=>u(n),class:z(["w-full text-left px-3 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors cursor-pointer flex items-center justify-between",n.value===a.value.currency?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-400":"text-gray-700 dark:text-gray-300"])},[e("span",et,[p(n.value)?(o(),U(O(p(n.value)),{key:0,size:20,class:"mr-2"})):m("",!0),e("span",null,i(n.label),1)]),n.value===a.value.currency?(o(),d("svg",tt,[...r[25]||(r[25]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):m("",!0)],10,Oe))),128))])],512),[[Me,g.value]])]),_:1})],512)]),e("div",null,[r[28]||(r[28]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[k("交易货币 "),e("span",{class:"text-red-500"},"*")],-1)),e("div",at,[f(X,{modelValue:a.value.fiatCurrency,"onUpdate:modelValue":r[3]||(r[3]=n=>a.value.fiatCurrency=n),options:N.value,placeholder:"选择法币"},null,8,["modelValue","options"])])]),e("div",null,[r[29]||(r[29]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[k("国家 "),e("span",{class:"text-red-500"},"*")],-1)),e("div",rt,[f(X,{modelValue:a.value.country,"onUpdate:modelValue":r[4]||(r[4]=n=>a.value.country=n),options:R.value,placeholder:"选择国家"},null,8,["modelValue","options"])])])]),e("div",null,[e("label",st,[k(i(a.value.type==="buy"?"发款地址":"收款地址")+" ",1),r[30]||(r[30]=e("span",{class:"text-red-500"},"*",-1))]),e("div",lt,[f(X,{modelValue:a.value.verifiedAddress,"onUpdate:modelValue":r[5]||(r[5]=n=>a.value.verifiedAddress=n),options:Q.value,placeholder:`选择已验证的${a.value.type==="buy"?"发款":"收款"}地址`},null,8,["modelValue","options","placeholder"])]),r[31]||(r[31]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},[k(" 需要更多验证地址？"),e("a",{href:"/wallet/address-verification",class:"text-emerald-600 dark:text-emerald-400 hover:underline cursor-pointer"},"前往验证 →")],-1))]),e("div",null,[r[35]||(r[35]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[k("价格设置 "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ot,[e("div",dt,[e("label",nt,[C(e("input",{type:"radio","onUpdate:modelValue":r[6]||(r[6]=n=>a.value.priceType=n),value:"fixed",class:"mr-2 text-emerald-600 focus:ring-emerald-500 focus:ring-2 focus:ring-offset-0"},null,512),[[W,a.value.priceType]]),r[32]||(r[32]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"固定价格",-1))]),e("label",it,[C(e("input",{type:"radio","onUpdate:modelValue":r[7]||(r[7]=n=>a.value.priceType=n),value:"floating",class:"mr-2 text-emerald-600 focus:ring-emerald-500 focus:ring-2 focus:ring-offset-0"},null,512),[[W,a.value.priceType]]),r[33]||(r[33]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"浮动价格",-1))])]),a.value.priceType==="fixed"?(o(),d("div",ut,[C(e("input",{"onUpdate:modelValue":r[8]||(r[8]=n=>a.value.fixedPrice=n),type:"number",step:"0.01",placeholder:"0.00",class:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-700 rounded bg-white dark:bg-gray-900/50 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"},null,512),[[j,a.value.fixedPrice]]),e("span",ct,i(a.value.fiatCurrency||"CNY"),1)])):m("",!0),a.value.priceType==="floating"?(o(),d("div",mt,[e("div",gt,[f(X,{modelValue:a.value.floatingMargin,"onUpdate:modelValue":r[9]||(r[9]=n=>a.value.floatingMargin=n),options:[{value:"+",label:"高于"},{value:"-",label:"低于"}]},null,8,["modelValue"])]),C(e("input",{"onUpdate:modelValue":r[10]||(r[10]=n=>a.value.marginPercent=n),type:"number",step:"0.01",placeholder:"0.00",class:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-700 rounded bg-white dark:bg-gray-900/50 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"},null,512),[[j,a.value.marginPercent]]),r[34]||(r[34]=e("span",{class:"text-gray-500 dark:text-gray-400"},"%",-1))])):m("",!0)])]),e("div",null,[r[36]||(r[36]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[k("交易限额 "),e("span",{class:"text-red-500"},"*")],-1)),e("div",yt,[e("div",null,[e("div",xt,[C(e("input",{"onUpdate:modelValue":r[11]||(r[11]=n=>a.value.minLimit=n),type:"number",placeholder:"最低限额",class:"w-full px-3 py-2 pr-12 border border-gray-300 dark:border-gray-700 rounded bg-white dark:bg-gray-900/50 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"},null,512),[[j,a.value.minLimit]]),e("span",vt,i(a.value.fiatCurrency||"CNY"),1)])]),e("div",null,[e("div",pt,[C(e("input",{"onUpdate:modelValue":r[12]||(r[12]=n=>a.value.maxLimit=n),type:"number",placeholder:"最高限额",class:"w-full px-3 py-2 pr-12 border border-gray-300 dark:border-gray-700 rounded bg-white dark:bg-gray-900/50 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"},null,512),[[j,a.value.maxLimit]]),e("span",bt,i(a.value.fiatCurrency||"CNY"),1)])])])]),e("div",null,[r[37]||(r[37]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[k("支付方式 "),e("span",{class:"text-red-500"},"*")],-1)),f(Ae,{modelValue:a.value.paymentMethod,"onUpdate:modelValue":r[13]||(r[13]=n=>a.value.paymentMethod=n),categories:c.paymentMethods},null,8,["modelValue","categories"])]),e("div",null,[r[38]||(r[38]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 快速提示 ",-1)),C(e("input",{"onUpdate:modelValue":r[14]||(r[14]=n=>a.value.notes=n),type:"text",placeholder:"例如：仅工作日交易、大额优惠、新手友好等",maxlength:"255",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded bg-white dark:bg-gray-900/50 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"},null,512),[[j,a.value.notes]]),r[39]||(r[39]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 简短的提示信息会显示在广告卡片上，让买家快速了解您的特色 ",-1))]),e("div",kt,[r[44]||(r[44]=e("div",null,[e("h3",{class:"text-sm font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),k(" 交易条款与消息设置 ")]),e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 设置交易条款和欢迎消息，让交易更顺畅 ")],-1)),r[45]||(r[45]=e("div",{class:"p-3 bg-amber-50 dark:bg-amber-900/20 rounded border border-amber-200 dark:border-amber-800"},[e("div",{class:"flex items-start"},[e("svg",{class:"w-4 h-4 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),e("p",{class:"ml-2 text-xs text-amber-700 dark:text-amber-300"},[e("span",{class:"font-medium"},"提示："),k("您可以在交易设置中配置默认条款和消息，创建新广告时将自动填充，节省您的时间。 ")])])],-1)),e("div",null,[r[40]||(r[40]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"欢迎消息",-1)),C(e("textarea",{"onUpdate:modelValue":r[15]||(r[15]=n=>a.value.welcomeMessage=n),rows:"3",placeholder:"交易开始时自动发送的消息（选填）",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded bg-white dark:bg-gray-900/50 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none text-sm"},null,512),[[j,a.value.welcomeMessage]]),r[41]||(r[41]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 当用户开始交易时自动发送的欢迎消息 ",-1))]),e("div",null,[r[42]||(r[42]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 交易须知 ",-1)),C(e("textarea",{"onUpdate:modelValue":r[16]||(r[16]=n=>a.value.tradeTerms=n),rows:"5",placeholder:"设置您的交易须知和注意事项，例如：请使用本人实名账户付款、付款后请主动提供付款截图、付款备注请勿包含敏感词汇等",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded bg-white dark:bg-gray-900/50 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none text-sm"},null,512),[[j,a.value.tradeTerms]]),r[43]||(r[43]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 交易条款会展示给对方，请详细说明交易要求和注意事项 ",-1))]),r[46]||(r[46]=e("div",{class:"p-3 bg-gray-50 dark:bg-gray-800/20 rounded border border-gray-200 dark:border-gray-700"},[e("div",{class:"flex items-start"},[e("svg",{class:"w-4 h-4 text-gray-600 dark:text-gray-400 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),e("p",{class:"ml-2 text-xs text-gray-700 dark:text-gray-300"},[e("span",{class:"font-medium"},"重要提示："),k("订单生成后，交易条款将作为副本保存在订单中。后续修改广告条款不会影响已生成的订单，确保交易双方遵循订单创建时的约定。 ")])])],-1))])],32)]),_:1},8,["modelValue","title","subtitle","confirm-text","confirm-disabled","loading"]))}},ht=ve(ft,[["__scopeId","data-v-9753b7e8"]]),_t={class:"space-y-6"},wt={class:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded space-y-3"},Ct={key:0},$t={class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap"},Vt={key:1},Mt={class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap"},Lt={key:2,class:"text-sm text-gray-500 dark:text-gray-400 italic"},St={__name:"TradeSettingsModal",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","saved"],setup(v,{emit:D}){const c=v,w=D,h=P({get:()=>c.modelValue,set:p=>w("update:modelValue",p)}),_=x(!1),g=x({vendor_toc:"",welcome_message:""}),S=async()=>{try{const p=await B.get("/web/api/trade-settings");if(p.data.success&&p.data.data.settings){const u=p.data.data.settings;g.value={vendor_toc:u.vendor_toc||"",welcome_message:u.welcome_message||""}}}catch(p){console.error("获取交易设置失败:",p)}},a=async()=>{_.value=!0;try{(await B.post("/web/api/trade-settings",g.value)).data.success&&(w("saved",g.value),b())}catch(p){console.error("保存交易设置失败:",p)}finally{_.value=!1}},b=()=>{w("update:modelValue",!1)};return ee(()=>{S()}),(p,u)=>(o(),U(be,{modelValue:h.value,"onUpdate:modelValue":u[2]||(u[2]=V=>h.value=V),title:"交易设置",subtitle:"设置您的默认交易条款和注意事项","confirm-text":"保存设置",loading:_.value,onConfirm:a,onCancel:b},{content:$(()=>[e("div",_t,[u[10]||(u[10]=e("div",{class:"p-4 bg-gray-50 dark:bg-gray-900/20 rounded border border-gray-200 dark:border-gray-700"},[e("div",{class:"flex items-start"},[e("svg",{class:"w-5 h-5 text-gray-600 dark:text-gray-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),e("div",{class:"ml-3 flex-1"},[e("p",{class:"text-sm text-gray-800 dark:text-gray-200 font-medium"},"关于交易设置"),e("p",{class:"mt-1 text-sm text-gray-700 dark:text-gray-300"}," 这里设置的交易条款将作为您创建新广告时的默认内容。每个广告会保存一份独立副本，修改此处设置不会影响已发布的广告。 ")])])],-1)),e("div",null,[u[3]||(u[3]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 交易须知 ",-1)),C(e("textarea",{"onUpdate:modelValue":u[0]||(u[0]=V=>g.value.vendor_toc=V),rows:"6",placeholder:`设置您的交易须知和注意事项，例如：
• 请使用本人实名账户付款
• 付款后请主动提供付款截图
• 付款备注请勿包含敏感词汇
• 确认付款后请耐心等待放币
• 交易时间为每日 9:00-22:00
• 大额交易可能需要额外验证`,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded bg-white dark:bg-gray-900/50 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none"},null,512),[[j,g.value.vendor_toc]]),u[4]||(u[4]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 向交易对方展示的交易条款和注意事项 ",-1))]),e("div",null,[u[5]||(u[5]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 自动欢迎消息 ",-1)),C(e("textarea",{"onUpdate:modelValue":u[1]||(u[1]=V=>g.value.welcome_message=V),rows:"3",placeholder:`当用户开始交易时自动发送的消息，例如：
您好！感谢选择与我交易，请仔细阅读交易条款。有任何问题请随时联系我。`,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded bg-white dark:bg-gray-900/50 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none"},null,512),[[j,g.value.welcome_message]]),u[6]||(u[6]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 交易开始时自动发送给对方的欢迎消息 ",-1))]),e("div",null,[u[9]||(u[9]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 预览效果 ",-1)),e("div",wt,[g.value.vendor_toc?(o(),d("div",Ct,[u[7]||(u[7]=e("p",{class:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1"},"交易须知",-1)),e("p",$t,i(g.value.vendor_toc),1)])):m("",!0),g.value.welcome_message?(o(),d("div",Vt,[u[8]||(u[8]=e("p",{class:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1"},"自动欢迎消息",-1)),e("p",Mt,i(g.value.welcome_message),1)])):m("",!0),!g.value.vendor_toc&&!g.value.welcome_message?(o(),d("p",Lt," 暂无内容 ")):m("",!0)])])])]),_:1},8,["modelValue","loading"]))}},Tt={class:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800"},zt={class:"mx-auto max-w-7xl px-4 py-3 sm:py-4 sm:px-6 lg:px-8"},At={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-4 mb-3 sm:mb-4"},Pt={class:"flex items-center gap-2 sm:gap-3"},jt={class:"text-center"},Bt={class:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100"},Ut={class:"text-center"},Dt={class:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100"},Et={class:"text-center"},Nt={class:"text-xl sm:text-2xl font-bold text-gray-600 dark:text-gray-400"},Ft={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},Ht={class:"flex flex-col sm:flex-row gap-2 order-2 sm:order-1 items-start"},It={class:"flex items-center bg-gray-100 dark:bg-gray-800 rounded p-0.5 w-auto"},Rt=["onClick"],Yt={class:"flex items-center bg-gray-100 dark:bg-gray-800 rounded p-0.5"},qt=["onClick"],Jt={class:"flex items-center gap-2 order-1 sm:order-2"},Kt={class:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"},Gt={key:0,class:"flex items-center justify-center py-12"},Qt={key:1,class:"text-center py-12 bg-white dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-800"},Wt={key:2,class:"hidden md:block space-y-4"},Xt={class:"p-4"},Zt={class:"grid grid-cols-12 gap-4 items-center"},Ot={class:"col-span-3"},ea={class:"flex flex-col gap-2"},ta={class:"flex items-center gap-3"},aa={class:"w-10 h-10 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center"},ra={class:"font-semibold text-gray-900 dark:text-gray-100"},sa={class:"text-xs text-gray-500 dark:text-gray-500 ml-2"},la={class:"flex items-center gap-1.5"},oa={class:"text-xs font-medium text-gray-600 dark:text-gray-400"},da={key:0,class:"h-1.5 w-1.5 bg-emerald-500 rounded-full animate-pulse"},na={class:"col-span-4"},ia={class:"space-y-1.5"},ua={class:"flex items-start gap-2 flex-wrap"},ca={class:"px-2 py-0.5 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded text-xs font-medium text-gray-700 dark:text-gray-300"},ma={class:"px-2 py-0.5 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded text-xs text-gray-700 dark:text-gray-400"},ga={key:0,class:"text-xs text-gray-600 dark:text-gray-400 italic line-clamp-2"},ya={class:"col-span-2 text-right"},xa={key:0,class:"text-xl lg:text-2xl text-gray-900 dark:text-gray-100 font-bold leading-none"},va={key:1,class:"text-xl lg:text-2xl text-gray-900 dark:text-gray-100 font-bold leading-none"},pa={class:"text-xs mt-0.5 text-gray-500 dark:text-gray-400"},ba={class:"col-span-3"},ka={class:"text-right"},fa={class:"text-sm mb-2"},ha={class:"text-gray-700 dark:text-gray-300 font-medium ml-1"},_a={class:"flex justify-end gap-1"},wa=["onClick"],Ca=["onClick"],$a=["onClick"],Va=["onClick"],Ma=["onClick"],La={key:3,class:"md:hidden space-y-3"},Sa={class:"p-3"},Ta={class:"flex items-center justify-between mb-3"},za={class:"flex items-center gap-2.5"},Aa={class:"w-9 h-9 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center shadow-sm"},Pa={class:"font-medium text-sm text-gray-900 dark:text-gray-100"},ja={class:"text-xs text-gray-500 dark:text-gray-500 ml-1"},Ba={class:"flex items-center gap-1"},Ua={key:0,class:"h-1.5 w-1.5 bg-emerald-500 rounded-full animate-pulse"},Da={class:"text-right"},Ea={key:0,class:"text-lg font-bold text-gray-900 dark:text-gray-100"},Na={key:1,class:"text-lg font-bold text-gray-900 dark:text-gray-100"},Fa={class:"text-xs text-gray-500 dark:text-gray-400"},Ha={class:"mb-2 text-xs"},Ia={class:"flex items-center justify-between mb-1"},Ra={class:"text-gray-600 dark:text-gray-400"},Ya={class:"flex gap-1"},qa={class:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded text-gray-700 dark:text-gray-400"},Ja={class:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded text-gray-700 dark:text-gray-400"},Ka={key:0,class:"text-gray-600 dark:text-gray-400 italic line-clamp-2"},Ga={class:"flex items-center gap-2 justify-end"},Qa=["onClick"],Wa=["onClick"],Xa=["onClick"],Za=["onClick"],Oa=["onClick"],er={class:"px-3 py-1 bg-gray-50 dark:bg-gray-800/30 border-t border-gray-200 dark:border-gray-800"},tr={class:"flex items-center justify-between text-xs"},ar={class:"text-gray-500 dark:text-gray-500"},rr={key:4,class:"mt-6"},sr={class:"text-sm text-gray-600 dark:text-gray-400"},lr={key:0},or={key:1},fr={__name:"Index",props:{userAddresses:{type:Array,default:()=>[]}},setup(v){Le();const D=v,c=x(0);x(98);const w=x(245);x(5);const h=x(""),_=x(""),g=x(!1),S=x(!1),a=x(null),b=x(!1),p=x(!1),u=x(null),V=x(!1),T=x(null),E=x(null),G=x({auto_reply_message:"",min_trade_limit:100,max_trade_limit:1e4,verification_required:!1,preferred_time_zone:"Asia/Shanghai",trading_hours_enabled:!1,trading_hours_start:"09:00",trading_hours_end:"22:00"}),te=[{value:"",label:"全部"},{value:"active",label:"活跃"},{value:"paused",label:"已暂停"},{value:"archived",label:"已归档"}],ae=[{value:"",label:"全部"},{value:"buy",label:"商家出售"},{value:"sell",label:"商家收购"}],M=x([]),R=x(0),N=x(1),Q=x(10),A=async()=>{b.value=!0;try{const y={per_page:Q.value,page:N.value};h.value&&h.value!==""&&(y.status=h.value),_.value&&_.value!==""&&(y.type=_.value),console.log("Fetching ads with params:",y);const l=await B.get("/web/api/ads/my",{params:y});console.log("API Response:",l.data.data),M.value=(l.data.data.ads||[]).filter(t=>t).map(t=>({id:t.id,type:t.trade_type,trade_type:t.trade_type,currency:t.currency_key,currency_key:t.currency_key,currency_label:t.currency_label,chain:t.chain,price:t.price||0,price_model:t.price_model,priceType:t.price_model==="fixed"?"固定":"浮动",margin:t.margin,minLimit:t.min_limit||0,min_limit:t.min_limit||0,maxLimit:t.max_limit||0,max_limit:t.max_limit||0,payment_method:t.payment_method,payment_details:t.payment_details,payment_time_limit:t.payment_time_limit,paymentMethods:[t.payment_method],status:t.status==="inactive"?"paused":t.status==="archived"?"archived":t.status,fiat_currency:t.fiat_currency,country:t.country,vendor_toc:t.vendor_toc,welcome_message:t.welcome_message,notes:t.notes,createdAt:new Date(t.created_at).toLocaleDateString("zh-CN")})),console.log("Processed offers:",M.value),c.value=M.value.filter(t=>t.status==="active").length,w.value=l.data.data.ads.reduce((t,L)=>t+L.trades_count,0),R.value=l.data.data.pagination.total}catch(y){console.error("Error fetching ads:",y),M.value=[]}finally{b.value=!1}},Y=y=>{a.value=y,g.value=!0},F=(y,l)=>{E.value=y,T.value=l,V.value=!0},s=async()=>{try{const y=T.value==="pause"?"inactive":"active";await B.post(`/web/api/ads/${E.value}/toggle-status`,{status:y}),await A()}catch(y){console.error("Error toggling offer status:",y)}V.value=!1,E.value=null,T.value=null},r=()=>{V.value=!1,E.value=null,T.value=null},n=y=>{u.value=y,p.value=!0},oe=async()=>{try{await B.post(`/web/api/ads/${u.value}/archive`),await A()}catch(y){console.error("Error archiving offer:",y)}p.value=!1,u.value=null},ke=()=>{p.value=!1,u.value=null},de=async y=>{try{await B.post(`/web/api/ads/${y}/restore`),await A()}catch(l){console.error("Error restoring offer:",l)}},fe=async()=>{g.value=!1,a.value=null,await A()},he=y=>{G.value=y};I([h,_],()=>{N.value=1,A()});const{fetchConfig:_e,getCountryByCode:we,paymentMethods:Ce}=pe(),ne=y=>{if(!y)return"全球";const l=we(y);return l?l.name:y};return ee(async()=>{await _e(),A()}),(y,l)=>(o(),U(Te,null,{default:$(()=>[f(H(Se),{title:"我的发布"}),e("div",Tt,[e("div",zt,[e("div",At,[l[11]||(l[11]=e("div",null,[e("h1",{class:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100"},"我的发布"),e("p",{class:"hidden sm:block text-sm text-gray-500 dark:text-gray-400 mt-1"},"管理您的交易广告")],-1)),e("div",Pt,[e("div",jt,[e("p",Bt,i(c.value),1),l[6]||(l[6]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"活跃广告",-1))]),l[9]||(l[9]=e("div",{class:"h-6 sm:h-8 w-px bg-gray-200 dark:bg-gray-700"},null,-1)),e("div",Ut,[e("p",Dt,i(M.value.filter(t=>t.status==="paused").length),1),l[7]||(l[7]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"已暂停",-1))]),l[10]||(l[10]=e("div",{class:"h-6 sm:h-8 w-px bg-gray-200 dark:bg-gray-700"},null,-1)),e("div",Et,[e("p",Nt,i(R.value),1),l[8]||(l[8]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"总广告",-1))])])]),e("div",Ft,[e("div",Ht,[e("div",It,[(o(),d(J,null,K(te,t=>e("button",{key:t.value||"all",onClick:L=>h.value=t.value,class:z(["px-3 py-1.5 text-xs font-medium rounded transition-all whitespace-nowrap cursor-pointer",h.value===t.value?t.value==="active"?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 shadow-sm":t.value==="paused"?"bg-amber-50 dark:bg-amber-900/20 text-amber-600 dark:text-amber-400 shadow-sm":t.value==="archived"?"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 shadow-sm":"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"])},i(t.label),11,Rt)),64))]),e("div",Yt,[(o(),d(J,null,K(ae,t=>e("button",{key:t.value||"all",onClick:L=>_.value=t.value,class:z(["px-3 py-1.5 text-xs font-medium rounded transition-all whitespace-nowrap cursor-pointer",_.value===t.value?t.value==="buy"?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 shadow-sm":t.value==="sell"?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 shadow-sm":"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"])},i(t.label),11,qt)),64))])]),e("div",Jt,[f(re,{onClick:l[0]||(l[0]=t=>g.value=!0),variant:"primary",size:"sm"},{icon:$(()=>[...l[12]||(l[12]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])]),default:$(()=>[l[13]||(l[13]=k(" 创建发布 ",-1))]),_:1}),f(re,{onClick:l[1]||(l[1]=t=>S.value=!0),variant:"ghost",size:"sm",class:"hidden sm:inline-flex"},{icon:$(()=>[...l[14]||(l[14]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])]),default:$(()=>[l[15]||(l[15]=k(" 交易设置 ",-1))]),_:1}),f(re,{onClick:l[2]||(l[2]=t=>y.$inertia.visit("/notifications/settings")),variant:"ghost",size:"sm",class:"hidden sm:inline-flex"},{icon:$(()=>[...l[16]||(l[16]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)])]),default:$(()=>[l[17]||(l[17]=k(" 通知设置 ",-1))]),_:1})])])])]),e("div",Kt,[b.value?(o(),d("div",Gt,[...l[18]||(l[18]=[e("svg",{class:"animate-spin h-8 w-8 text-emerald-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):M.value.length===0?(o(),d("div",Qt,[...l[19]||(l[19]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100"},"暂无广告",-1),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},'点击"创建发布"开始发布您的第一个交易广告',-1)])])):m("",!0),!b.value&&M.value.length>0?(o(),d("div",Wt,[(o(!0),d(J,null,K(M.value,t=>(o(),d("div",{key:t?.id,class:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded hover:border-gray-300 dark:hover:border-gray-700 transition-all"},[e("div",Xt,[e("div",Zt,[e("div",Ot,[e("div",ea,[e("div",ta,[e("div",aa,[(o(),U(O(H(ye)(t?.currency)),{size:20,class:"dark:brightness-110"}))]),e("div",null,[e("div",ra,[k(i(t?.currency_label||t?.currency||"USDT")+" ",1),e("span",sa,"#"+i(t?.id),1)]),e("div",la,[e("span",oa,i(t?.type==="sell"?"商家收购":"商家出售"),1),t?.status==="active"?(o(),d("span",da)):m("",!0)])])])])]),e("div",na,[e("div",ia,[e("div",ua,[e("span",ca,i(H(le)(t?.payment_method)?.label||t?.payment_method),1),e("span",ma," 📍 "+i(ne(t?.country)),1)]),t?.notes?(o(),d("div",ga,i(t?.notes),1)):m("",!0)])]),e("div",ya,[t?.price_model==="fixed"?(o(),d("p",xa," ¥"+i(t?.price?.toLocaleString()||"0"),1)):(o(),d("p",va,i(t?.margin>0?"+":"")+i(t?.margin||0)+"% ",1)),e("div",pa,i(t?.price_model==="fixed"?"固定单价":"动态单价")+" · "+i(t?.fiat_currency||"CNY"),1)]),e("div",ba,[e("div",ka,[e("div",fa,[l[20]||(l[20]=e("span",{class:"text-xs text-gray-500 dark:text-gray-500"},"限额:",-1)),e("span",ha," ¥"+i(t?.minLimit?.toLocaleString()||"0")+" - ¥"+i(t?.maxLimit?.toLocaleString()||"0"),1)]),e("div",_a,[t?.status==="active"?(o(),d("button",{key:0,onClick:L=>F(t?.id,"pause"),class:"px-3 py-1.5 text-sm font-medium text-amber-600 dark:text-amber-400 bg-amber-50 dark:bg-amber-900/20 rounded hover:bg-amber-100 dark:hover:bg-amber-900/30 transition-colors cursor-pointer"}," 暂停 ",8,wa)):t?.status==="paused"?(o(),d("button",{key:1,onClick:L=>F(t?.id,"activate"),class:"px-3 py-1.5 text-sm font-medium text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 rounded hover:bg-emerald-100 dark:hover:bg-emerald-900/30 transition-colors cursor-pointer"}," 激活 ",8,Ca)):t?.status==="archived"?(o(),d("button",{key:2,onClick:L=>de(t?.id),class:"px-3 py-1.5 text-sm font-medium text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 rounded hover:bg-emerald-100 dark:hover:bg-emerald-900/30 transition-colors cursor-pointer"}," 恢复 ",8,$a)):m("",!0),t?.status!=="archived"?(o(),d("button",{key:3,onClick:L=>Y(t),class:"px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors cursor-pointer"}," 编辑 ",8,Va)):m("",!0),t?.status!=="archived"?(o(),d("button",{key:4,onClick:L=>n(t?.id),class:"px-3 py-1.5 text-sm font-medium text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-900/20 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-900/30 transition-colors cursor-pointer"}," 归档 ",8,Ma)):m("",!0)])])])])])]))),128))])):m("",!0),!b.value&&M.value.length>0?(o(),d("div",La,[(o(!0),d(J,null,K(M.value,t=>(o(),d("div",{key:t?.id,class:"bg-white dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-800 overflow-hidden"},[e("div",Sa,[e("div",Ta,[e("div",za,[e("div",Aa,[(o(),U(O(H(ye)(t?.currency)),{size:18,class:"dark:brightness-110"}))]),e("div",null,[e("div",Pa,[k(i(t?.currency_label||t?.currency||"USDT")+" ",1),e("span",ja,"#"+i(t?.id),1)]),e("div",Ba,[e("span",{class:z(["text-xs font-medium",t?.type==="sell"?"text-gray-600 dark:text-gray-400":"text-gray-700 dark:text-gray-300"])},i(t?.type==="sell"?"商家收购":"商家出售"),3),t?.status==="active"?(o(),d("span",Ua)):m("",!0)])])]),e("div",Da,[t?.price_model==="fixed"?(o(),d("div",Ea," ¥"+i((t?.price||0).toLocaleString()),1)):(o(),d("div",Na,i(t?.margin>0?"+":"")+i(t?.margin||0)+"% ",1)),e("div",Fa,i(t?.price_model==="fixed"?"固定":"浮动"),1)])]),e("div",Ha,[e("div",Ia,[e("span",Ra," 限额: ¥"+i((t?.minLimit||0).toLocaleString())+"-"+i((t?.maxLimit||0).toLocaleString()),1),e("div",Ya,[e("span",qa,i(H(le)(t?.payment_method)?.label||t?.payment_method),1),e("span",Ja," 📍 "+i(ne(t?.country)),1)])]),t?.notes?(o(),d("div",Ka,i(t?.notes),1)):m("",!0)]),e("div",Ga,[t?.status==="active"?(o(),d("button",{key:0,onClick:L=>F(t?.id,"pause"),class:"px-2 py-1 text-xs font-medium text-amber-600 dark:text-amber-400 bg-amber-50 dark:bg-amber-900/20 rounded hover:bg-amber-100 dark:hover:bg-amber-900/30 transition-colors cursor-pointer"}," 暂停 ",8,Qa)):t?.status==="paused"?(o(),d("button",{key:1,onClick:L=>F(t?.id,"activate"),class:"px-2 py-1 text-xs font-medium text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 rounded hover:bg-emerald-100 dark:hover:bg-emerald-900/30 transition-colors cursor-pointer"}," 激活 ",8,Wa)):t?.status==="archived"?(o(),d("button",{key:2,onClick:L=>de(t?.id),class:"px-2 py-1 text-xs font-medium text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 rounded hover:bg-emerald-100 dark:hover:bg-emerald-900/30 transition-colors cursor-pointer"}," 恢复 ",8,Xa)):m("",!0),t?.status!=="archived"?(o(),d("button",{key:3,onClick:L=>Y(t),class:"px-2 py-1 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors cursor-pointer"}," 编辑 ",8,Za)):m("",!0),t?.status!=="archived"?(o(),d("button",{key:4,onClick:L=>n(t?.id),class:"px-2 py-1 text-xs font-medium text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-900/20 rounded hover:bg-gray-100 dark:hover:bg-gray-900/30 transition-colors cursor-pointer"}," 归档 ",8,Oa)):m("",!0)])]),e("div",er,[e("div",tr,[e("span",{class:z(["px-1.5 py-0.5 font-medium rounded",t?.status==="active"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":t?.status==="paused"?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400":t?.status==="archived"?"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-400"])},i(t?.status==="active"?"● 活跃":t?.status==="paused"?"● 已暂停":t?.status==="archived"?"● 已归档":"● 未知"),3),e("span",ar,i(t?.createdAt),1)])])]))),128))])):m("",!0),b.value?m("",!0):(o(),d("div",rr,[f(ze,{"current-page":N.value,total:R.value,"per-page":Q.value,"onUpdate:currentPage":l[3]||(l[3]=t=>N.value=t)},null,8,["current-page","total","per-page"])]))]),f(ht,{modelValue:g.value,"onUpdate:modelValue":l[4]||(l[4]=t=>g.value=t),offer:a.value,"trade-settings":G.value,"user-addresses":D.userAddresses,"payment-methods":H(Ce),onSuccess:fe},null,8,["modelValue","offer","trade-settings","user-addresses","payment-methods"]),f(St,{modelValue:S.value,"onUpdate:modelValue":l[5]||(l[5]=t=>S.value=t),onSaved:he},null,8,["modelValue"]),f(ce,{show:p.value,title:"归档广告","confirm-text":"确认归档","cancel-text":"取消","icon-color":"amber",onConfirm:oe,onClose:ke},{default:$(()=>[...l[21]||(l[21]=[e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},[e("p",null,"确定要归档这个广告吗？"),e("p",{class:"mt-2"},"归档后的广告将不再显示在列表中，但您的数据会被保留。")],-1)])]),_:1},8,["show"]),f(ce,{show:V.value,title:T.value==="pause"?"暂停广告":"激活广告","confirm-text":T.value==="pause"?"确认暂停":"确认激活","cancel-text":"取消","icon-color":T.value==="pause"?"amber":"emerald",onConfirm:s,onClose:r},{default:$(()=>[e("div",sr,[T.value==="pause"?(o(),d("p",lr," 确定要暂停这个广告吗？暂停后其他用户将无法看到这个广告。 ")):(o(),d("p",or," 确定要激活这个广告吗？激活后其他用户将可以看到并与您进行交易。 "))])]),_:1},8,["show","title","confirm-text","icon-color"])]),_:1}))}};export{fr as default};
