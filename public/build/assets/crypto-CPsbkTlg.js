import{g as b,d as v,I as z,f as l,o,a as e,c as P,t as c,b as $,w as I,h,e as M,q as T,F as V,k as j,n as D,G as N,T as q,H as F}from"./app-Dd9sQi7o.js";import{b as f,c as U,_ as A,a as E}from"./UsdcIcon-BX_2Du_W.js";const G={class:"flex items-center flex-1 min-w-0"},H={key:0,class:"flex items-center gap-1.5"},Q={class:"text-base flex-shrink-0"},R={class:"text-gray-900 dark:text-slate-100 whitespace-nowrap"},J={key:1,class:"text-gray-500 dark:text-slate-400 whitespace-nowrap"},K={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},O={class:"flex items-center justify-center min-h-full p-4"},W={class:"relative bg-white dark:bg-slate-900 rounded-xl shadow-xl max-w-2xl w-full max-h-[80vh] flex flex-col"},X={class:"px-6 py-4 border-b border-gray-200 dark:border-slate-800"},Y={class:"mt-4 relative"},Z={class:"flex-1 overflow-y-auto px-6 py-4"},ee={class:"space-y-6"},te={class:"flex items-center gap-2 mb-3"},se={class:"text-xl"},re={class:"font-medium text-gray-900 dark:text-slate-100"},ae={class:"text-xs text-gray-500 dark:text-slate-400"},oe={class:"grid grid-cols-2 gap-2"},le=["onClick"],de={class:"flex items-center justify-between"},ne={class:"flex items-center gap-2"},ie={class:"font-medium text-sm text-gray-900 dark:text-slate-100"},ce={key:0,class:"w-4 h-4 text-emerald-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},ue={key:0,class:"text-center py-12"},xe={class:"px-4 sm:px-6 py-4 border-t border-gray-200 dark:border-slate-800"},ge={class:"hidden sm:flex items-center justify-between"},pe={class:"flex gap-2"},ve=["disabled"],me={class:"sm:hidden space-y-3"},be={class:"grid grid-cols-3 gap-2"},he=["disabled"],_e={__name:"P2PPaymentMethodPicker",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"选择支付"},categories:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(n,{emit:a}){const i=n,B=a,m=b(!1),x=b(""),d=b(i.modelValue),k=v(()=>i.categories),g=v({get:()=>i.modelValue,set:s=>B("update:modelValue",s)}),y=v(()=>{if(!g.value)return null;for(const s of k.value){const t=s.methods?.find(r=>r.value===g.value);if(t)return{...t,category:s.name,categoryId:s.id,categoryIcon:s.icon,categoryColor:s.color}}return null}),_=v(()=>k.value.map(s=>({...s,filteredMethods:s.methods.filter(t=>{if(!x.value)return!0;const r=x.value.toLowerCase();return t.label.toLowerCase().includes(r)||t.value.toLowerCase().includes(r)||s.name.toLowerCase().includes(r)})}))),L=v(()=>_.value.some(s=>s.filteredMethods.length>0)),S=s=>{d.value=s},w=()=>{d.value&&(g.value=d.value,u())},C=()=>{d.value=null,g.value=null,u()},u=()=>{m.value=!1,x.value=""};return z(m,s=>{s&&(d.value=i.modelValue)}),(s,t)=>(o(),l("div",null,[e("button",{onClick:t[0]||(t[0]=r=>m.value=!0),type:"button",class:"relative inline-flex items-center justify-between w-full px-4 h-10 text-sm rounded-lg border shadow-sm transition-all focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500/50 border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-900/50 text-gray-700 dark:text-slate-200 hover:bg-gray-50 dark:hover:bg-slate-800/50 hover:border-gray-400 dark:hover:border-slate-600 cursor-pointer"},[e("span",G,[g.value?(o(),l("span",H,[e("span",Q,c(y.value.categoryIcon),1),e("span",R,c(y.value.label),1)])):(o(),l("span",J,c(n.placeholder),1))]),t[2]||(t[2]=e("svg",{class:"ml-2 h-4 w-4 text-gray-500 dark:text-slate-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),(o(),P(F,{to:"body"},[$(q,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:I(()=>[m.value?(o(),l("div",K,[e("div",{class:"fixed inset-0 bg-black/50 dark:bg-black/70",onClick:u}),e("div",O,[e("div",W,[e("div",X,[e("div",{class:"flex items-center justify-between"},[t[4]||(t[4]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-slate-100"}," 选择支付 ",-1)),e("button",{onClick:u,class:"text-gray-400 hover:text-gray-500 dark:text-slate-500 dark:hover:text-slate-400 cursor-pointer"},[...t[3]||(t[3]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Y,[M(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>x.value=r),type:"text",placeholder:"搜索支付...",class:"w-full px-10 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-gray-900 dark:text-slate-100 placeholder-gray-400 dark:placeholder-slate-500 focus:ring-2 focus:ring-emerald-500 focus:border-transparent"},null,512),[[T,x.value]]),t[5]||(t[5]=e("svg",{class:"absolute left-3 top-2.5 w-5 h-5 text-gray-400 dark:text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),e("div",Z,[e("div",ee,[(o(!0),l(V,null,j(_.value,r=>M((o(),l("div",{key:r.id},[e("div",te,[e("span",se,c(r.icon),1),e("h4",re,c(r.name),1),e("span",ae,"("+c(r.filteredMethods.length)+")",1)]),e("div",oe,[(o(!0),l(V,null,j(r.filteredMethods,p=>(o(),l("div",{key:p.value,onClick:fe=>S(p.value),class:D(["p-3 rounded-lg border cursor-pointer transition-all hover:shadow-md",d.value===p.value?"border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20":"border-gray-200 dark:border-slate-700 hover:border-gray-300 dark:hover:border-slate-600"])},[e("div",de,[e("div",ne,[e("span",ie,c(p.label),1)]),d.value===p.value?(o(),l("svg",ce,[...t[6]||(t[6]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])])):h("",!0)])],10,le))),128))])])),[[N,r.filteredMethods.length>0]])),128))]),L.value?h("",!0):(o(),l("div",ue,[...t[7]||(t[7]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 dark:text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("p",{class:"mt-2 text-sm text-gray-500 dark:text-slate-400"},"没有找到支付",-1),e("p",{class:"text-xs text-gray-400 dark:text-slate-500"},"请尝试调整搜索关键词",-1)])]))]),e("div",xe,[e("div",ge,[t[8]||(t[8]=e("p",{class:"text-xs text-gray-500 dark:text-slate-400"}," 选择您想要在此广告中使用的支付 ",-1)),e("div",pe,[e("button",{onClick:C,class:"px-4 py-2 text-sm font-medium text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 transition-colors cursor-pointer"}," 清除 "),e("button",{onClick:u,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-slate-300 bg-gray-100 dark:bg-slate-800 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors cursor-pointer"}," 取消 "),e("button",{onClick:w,disabled:!d.value,class:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-lg hover:bg-emerald-700 disabled:bg-gray-300 dark:disabled:bg-slate-700 disabled:cursor-not-allowed transition-colors cursor-pointer"}," 确认 ",8,ve)])]),e("div",me,[t[9]||(t[9]=e("p",{class:"text-xs text-gray-500 dark:text-slate-400 text-center"}," 选择您想要在此广告中使用的支付 ",-1)),e("div",be,[e("button",{onClick:C,class:"px-3 py-2 text-sm font-medium text-red-600 dark:text-red-400 border border-red-200 dark:border-red-900/50 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors cursor-pointer"}," 清除 "),e("button",{onClick:u,class:"px-3 py-2 text-sm font-medium text-gray-700 dark:text-slate-300 bg-gray-100 dark:bg-slate-800 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors cursor-pointer"}," 取消 "),e("button",{onClick:w,disabled:!d.value,class:"px-3 py-2 text-sm font-medium text-white bg-emerald-600 rounded-lg hover:bg-emerald-700 disabled:bg-gray-300 dark:disabled:bg-slate-700 disabled:cursor-not-allowed transition-colors cursor-pointer"}," 确认 ",8,he)])])])])])])):h("",!0)]),_:1})]))]))}},we=n=>{if(!n)return f;const a=n.toLowerCase();return a.includes("usdt")?f:a.includes("usdc")?U:a==="btc"||a==="bitcoin"||a.includes("btc")?A:a==="eth"||a==="ethereum"||a.includes("eth")?E:f},Ce=n=>{if(!n)return"";const a=n.toUpperCase();if(a.includes("-")){const i=a.split("-");return i[i.length-1]}return a};export{_e as _,Ce as a,we as g};
