import{g as _,d as $,H as R,x as ue,c as y,o as l,w as m,a as e,b as x,f as n,t as a,j as f,h as u,i,I as h,e as pe,v as me,F as I,k as E,z as N,n as O,J as xe,l as fe}from"./app-DdK31xcW.js";import{P as ye}from"./P2PAppLayout-Ddwf6wfe.js";import{_ as k}from"./P2PButton-CEHNuzfV.js";import{P as V}from"./P2PSelect-CkFIL11a.js";import{_ as ve}from"./P2PPagination-BVu0T3g6.js";import{_ as ae}from"./P2PPaymentMethodPicker-C0F6KdzC.js";import{_ as _e}from"./P2PDialog-BT1CSEnM.js";import{u as ge}from"./useConfig-0g_q7Kg_.js";import{g as v,a as F}from"./crypto-arY_4gLe.js";import{_ as be}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                  */import"./UsdcIcon-C0ZR7blW.js";const he={class:"bg-gradient-to-b from-gray-100 to-gray-50 dark:from-slate-900 dark:to-slate-800 border-b border-gray-200 dark:border-slate-700"},ke={class:"mx-auto max-w-7xl px-4 py-3 sm:px-6 lg:px-8"},we={class:"bg-white/50 dark:bg-slate-900/30 rounded-lg p-2 sm:p-2.5 mb-3"},Ce={key:0,class:"flex items-center justify-center gap-2 text-xs text-gray-500 dark:text-slate-400"},ze={key:1,class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2"},Ve={class:"relative flex-1 sm:flex-initial overflow-hidden"},Me={class:"sm:hidden overflow-x-auto scrollbar-hide"},Te={class:"flex items-center gap-3 min-w-max pr-2"},Ue={class:"flex items-center gap-1 whitespace-nowrap"},Se={class:"font-semibold text-xs text-emerald-600 dark:text-emerald-400"},Be={class:"flex items-center gap-1 whitespace-nowrap"},Le={class:"font-semibold text-xs text-orange-600 dark:text-orange-400"},De={class:"flex items-center gap-1 whitespace-nowrap"},Pe={class:"font-semibold text-xs text-blue-600 dark:text-blue-400"},je={class:"hidden sm:flex items-center gap-3 md:gap-4"},$e={class:"flex items-center gap-1"},Fe={class:"text-xs text-gray-600 dark:text-slate-400"},He={class:"font-semibold text-sm text-emerald-600 dark:text-emerald-400"},Ae={class:"flex items-center gap-1"},Re={class:"text-xs text-gray-600 dark:text-slate-400"},Ie={class:"font-semibold text-sm text-orange-600 dark:text-orange-400"},Ee={class:"flex items-center gap-1"},Ne={class:"text-xs text-gray-600 dark:text-slate-400"},Oe={class:"font-semibold text-sm text-blue-600 dark:text-blue-400"},We={class:"hidden sm:flex flex-wrap items-center gap-1.5"},Je={class:"flex items-center bg-white dark:bg-slate-900/50 rounded-lg p-1 border border-gray-200 dark:border-slate-700"},Ke={class:"truncate text-gray-900 dark:text-slate-100"},qe={class:"truncate"},Ge={class:"min-w-[160px] max-w-[200px]"},Qe={class:"sm:hidden space-y-2"},Xe={class:"flex items-center justify-between gap-2"},Ye={class:"flex items-center bg-white dark:bg-slate-900/50 rounded-lg p-1 border border-gray-200 dark:border-slate-700"},Ze={class:"grid grid-cols-2 gap-2"},et={class:"truncate text-gray-900 dark:text-slate-100"},tt={class:"truncate"},st={class:"min-h-screen bg-white dark:bg-slate-950"},rt={class:"mx-auto max-w-7xl px-2 sm:px-4 py-4 lg:px-8"},at={class:"mb-4"},lt={class:"inline-flex items-center gap-1.5 sm:gap-2 px-3 py-2.5 sm:py-2 bg-white dark:bg-slate-900/50 rounded-lg border border-gray-200 dark:border-slate-700 hover:border-gray-300 dark:hover:border-slate-600 cursor-pointer transition-colors"},ot={key:0,class:"text-center py-20"},nt={key:1,class:"text-center py-12"},dt={class:"text-red-600 dark:text-red-400"},it={key:2,class:"text-center py-12"},ct={key:3,class:"hidden lg:block space-y-2"},ut={class:"p-4"},pt={class:"grid grid-cols-12 gap-4 items-center"},mt={class:"col-span-3 flex items-center gap-3"},xt=["src","alt"],ft={key:1,class:"h-12 w-12 rounded-full bg-gradient-to-br from-blue-600 to-blue-800 dark:from-blue-500 dark:to-blue-700 flex items-center justify-center"},yt={class:"text-white font-bold text-lg"},vt={class:"min-w-0 flex-1"},_t={class:"flex items-center gap-2 flex-wrap"},gt={key:0,class:"flex items-center gap-1"},bt={class:"flex items-center gap-3 mt-1"},ht={class:"flex items-center gap-1"},kt={class:"flex items-center"},wt={class:"text-xs font-medium text-gray-600 dark:text-slate-400"},Ct={class:"flex items-center gap-1 mt-1"},zt={class:"text-xs text-gray-500 dark:text-slate-500"},Vt={class:"col-span-4"},Mt={class:"space-y-1.5"},Tt={class:"flex items-start gap-2 flex-wrap"},Ut={class:"px-2 py-0.5 bg-blue-500/10 border border-blue-500/20 dark:border-blue-500/30 rounded text-xs font-medium text-blue-600 dark:text-blue-400"},St={key:0,class:"text-xs text-gray-600 dark:text-slate-400 italic line-clamp-2"},Bt={class:"col-span-2 text-right"},Lt={class:"text-xs font-medium text-gray-500 dark:text-slate-500 mb-1"},Dt={key:0,class:"text-gray-600 dark:text-slate-400"},Pt={key:1,class:"text-gray-600 dark:text-slate-400"},jt={class:"text-xl lg:text-2xl text-emerald-500 font-bold leading-none"},$t={class:"col-span-3"},Ft={class:"text-right"},Ht={class:"text-sm mb-2"},At={class:"text-emerald-500 font-medium ml-1"},Rt={class:"flex items-center gap-2 justify-center"},It={class:"inline-flex items-center justify-center w-6 h-6 bg-white rounded-full"},Et={class:"flex items-center gap-2 justify-center"},Nt={class:"inline-flex items-center justify-center w-6 h-6 bg-white rounded-full"},Ot={class:"px-4 py-2 bg-gray-50 dark:bg-slate-800/30 border-t border-gray-200 dark:border-slate-800 rounded-b-lg"},Wt={class:"flex flex-wrap items-center gap-2"},Jt={key:0,class:"inline-flex items-center gap-1 px-2 py-0.5 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 rounded-full text-xs font-medium"},Kt={key:1,class:"inline-flex items-center gap-1 px-2 py-0.5 bg-gray-100 dark:bg-gray-800/50 text-gray-600 dark:text-gray-400 rounded-full text-xs font-medium"},qt={key:2,class:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-xs font-medium"},Gt={class:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full text-xs font-medium"},Qt={key:3,class:"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded-full text-xs font-medium"},Xt={key:4,class:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 rounded-full text-xs font-medium"},Yt={key:4,class:"lg:hidden space-y-2"},Zt={class:"p-3"},es={class:"flex items-center justify-between mb-2.5"},ts={class:"flex items-center gap-2.5"},ss=["src","alt"],rs={key:1,class:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-600 to-blue-800 dark:from-blue-500 dark:to-blue-700 flex items-center justify-center cursor-pointer hover:ring-2 hover:ring-emerald-500 transition-all"},as={class:"text-white font-bold text-sm"},ls={class:"flex-1"},os={class:"flex items-center gap-1"},ns={class:"text-sm font-semibold text-gray-900 dark:text-slate-100"},ds={key:0,class:"w-3.5 h-3.5 text-amber-500",fill:"currentColor",viewBox:"0 0 20 20"},is={class:"flex items-center gap-2 text-xs text-gray-600 dark:text-slate-400 mt-0.5"},cs={class:"flex items-center gap-0.5"},us={class:"bg-gray-50 dark:bg-slate-800/30 rounded-lg p-2.5 mb-2.5"},ps={class:"flex items-start justify-between"},ms={class:"text-xs text-gray-500 dark:text-slate-400 mb-0.5"},xs={key:0},fs={key:1},ys={class:"text-xl font-bold text-emerald-600 dark:text-emerald-400"},vs={class:"text-right"},_s={class:"text-xs font-medium text-gray-700 dark:text-slate-300"},gs={class:"text-xs font-medium text-gray-700 dark:text-slate-300"},bs={class:"flex flex-wrap items-center gap-1 mb-2.5"},hs={key:0,class:"inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 rounded-full text-xs"},ks={key:1,class:"inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-xs"},ws={class:"inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full text-xs"},Cs={key:2,class:"inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded-full text-xs"},zs={class:"space-y-2 mb-3"},Vs={class:"flex flex-wrap items-center gap-1.5"},Ms={class:"px-2 py-0.5 bg-blue-500/10 border border-blue-500/20 dark:border-blue-500/30 rounded text-xs font-medium text-blue-600 dark:text-blue-400"},Ts={key:0,class:"text-xs text-gray-600 dark:text-slate-400 italic"},Us={class:"flex gap-2"},Ss={class:"flex items-center gap-1.5 justify-center"},Bs={class:"inline-flex items-center justify-center w-5 h-5 bg-white rounded-full"},Ls={class:"flex items-center gap-1.5 justify-center"},Ds={class:"inline-flex items-center justify-center w-5 h-5 bg-white rounded-full"},Ps={class:"mt-6 border-t border-gray-200 dark:border-slate-800 pt-6"},js={__name:"Home",props:{},setup($s){const{fetchConfig:le,getCryptocurrencyOptions:oe,getFiatCurrencyOptions:ne,getCryptocurrencyByKey:B,getPaymentMethodDetails:W,getFiatCurrencyByCode:J,paymentMethods:K}=ge(),L=localStorage.getItem("selectedFiatCurrency"),p=_(!L||L==="null"||L==="undefined"?null:L),q=$(()=>ne()),b=_({crypto_prices_usd:{},exchange_rates:{},loading:!1}),o=_({tradeType:"buy",cryptocurrency:null,paymentMethod:null,sortBy:"recent",onlyVerified:!1}),G=_([]),M=_(!1),w=_(null),D=_(!1),H=_(null),Q=_("buy"),de=async()=>{b.value.loading=!0;try{const r=await xe.get("/web/api/market/prices");r.data&&(b.value={...r.data,loading:!1})}catch(r){console.error("Failed to fetch crypto prices:",r),b.value.loading=!1}},P=async()=>{M.value=!0,w.value=null;try{const r=new URLSearchParams;r.append("trade_type",o.value.tradeType),p.value&&p.value!=="null"&&r.append("fiat_currency",p.value),o.value.cryptocurrency&&r.append("currency_key",o.value.cryptocurrency),o.value.paymentMethod&&r.append("payment_method",o.value.paymentMethod);const s={rating:"rating",trades:"trades",recent:"created_at"};r.append("sort_by",s[o.value.sortBy]||"rating"),r.append("sort_order","desc"),r.append("per_page","50");const c=await(await fetch(`/web/api/ads?${r}`)).json();c.success?(console.log("Raw ad data:",c.data.ads[0]),G.value=c.data.ads.map(d=>({id:d.id,type:d.trade_type,cryptocurrency:d.currency_key,fiat_currency:d.fiat_currency,price:d.price,price_model:d.price_model,margin:d.margin,minAmount:d.min_limit,maxAmount:d.max_limit,limits:{min:d.min_limit||0,max:d.max_limit||1e4},paymentMethod:d.payment_method,paymentWindow:d.payment_time_limit||15,notes:d.notes,seller:{id:d.user?.id||0,name:d.user?.name||"Unknown",avatar:d.user?.profile_photo_url||null,profile_photo_url:d.user?.profile_photo_url||null,rating:d.user?.avg_rating||5,totalReviews:d.user?.total_reviews||0,trades:d.user?.trades_count||0,isVerified:d.user?.is_verified||!1,lastSeen:d.user?.last_seen||null,responseTime:d.user?.response_time||null,completionRate:98.5}}))):w.value=c.message||"获取广告列表失败"}catch(r){w.value="网络错误，请稍后重试",console.error("Failed to fetch ads:",r)}finally{M.value=!1}},ie=r=>{if(!r)return"";const s=r.toLowerCase();return s.includes("usdt")||s.includes("usdc")?"USDT":s==="btc"||s==="bitcoin"?"BTC":s==="eth"||s==="ethereum"?"ETH":s.toUpperCase()},C=r=>{if(!r)return"";const s=J(r);if(s?.symbol)return s.symbol;const t=b.value.currencies?.[r];return t?.symbol?t.symbol:""},z=(r,s)=>{const t=b.value.crypto_prices_usd?.[r],c=b.value.exchange_rates?.[s]||1;if(!t)return"-";const d=t*c,S=C(s),re=J(s)?.decimal_places??2;return re===0?S+Math.round(d).toLocaleString():S+d.toFixed(re)},X=(r,s)=>{if(!r||!s)return 0;const t=ie(r),c=b.value.crypto_prices_usd?.[t],d=b.value.exchange_rates?.[s]||1;return c?c*d:0},Y=r=>{if(!r)return 0;if(r.price_model==="dynamic"){const s=X(r.cryptocurrency,r.fiat_currency);if(!s||s===0)return r.price||0;const t=r.margin||0;return s*(1+t/100)}else return r.price||0},g=r=>{const s=X(r.cryptocurrency,r.fiat_currency);return!s||s===0?null:r.price_model==="dynamic"?r.margin||0:(r.price-s)/s*100};R(o,()=>{T.value=1,P()},{deep:!0}),R(p,r=>{r?localStorage.setItem("selectedFiatCurrency",r):localStorage.removeItem("selectedFiatCurrency"),P()});const j=(r,s)=>{H.value=r,Q.value=s,D.value=!0},ce=()=>{D.value=!1,H.value&&fe.visit(`/trade/create-order?ad_id=${H.value.id}&type=${Q.value}`)};ue(async()=>{try{await le()}catch(t){console.error("Failed to load config:",t)}new URLSearchParams(window.location.search).get("type")==="sell"&&(o.value.tradeType="sell"),P(),de()});const T=_(1),A=_(10),Z=$(()=>oe().map(s=>({...s,iconComponent:v(s.value)}))),ee=r=>{if(!r)return"未知";const s=new Date(r),c=Math.floor((new Date-s)/6e4);if(c<1)return"刚刚";if(c<5)return"在线";if(c<60)return`${c}分钟前`;const d=Math.floor(c/60);if(d<24)return`${d}小时前`;const S=Math.floor(d/24);return S<7?`${S}天前`:"7天前"},te=[{value:"rating",label:"按评分",icon:"⭐"},{value:"trades",label:"按成交量",icon:"📊"},{value:"response",label:"按响应时间",icon:"⚡"},{value:"recent",label:"最新发布",icon:"🕐"}],U=$(()=>{let r=G.value;return o.value.onlyVerified&&(r=r.filter(s=>s.seller.isVerified)),r}),se=$(()=>{const r=(T.value-1)*A.value,s=r+A.value;return U.value.slice(r,s)});return R(o,()=>{T.value=1},{deep:!0}),(r,s)=>(l(),y(ye,null,{default:m(()=>[e("div",he,[e("div",ke,[e("div",we,[b.value.loading?(l(),n("div",Ce,[...s[15]||(s[15]=[e("svg",{class:"animate-spin h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("span",null,"加载价格中...",-1)])])):(l(),n("div",ze,[s[19]||(s[19]=e("div",{class:"flex flex-wrap items-center gap-2 sm:gap-3"},[e("div",{class:"flex items-center gap-1.5"},[e("div",{class:"p-1 bg-emerald-500/10 rounded"},[e("svg",{class:"w-3.5 sm:w-4 h-3.5 sm:h-4 text-emerald-600 dark:text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})])]),e("span",{class:"text-xs font-semibold text-gray-800 dark:text-slate-200"},"安全托管")]),e("div",{class:"hidden sm:block h-4 w-px bg-gray-300 dark:bg-slate-700"}),e("div",{class:"flex items-center gap-1.5"},[e("svg",{class:"w-3.5 h-3.5 text-amber-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),e("span",{class:"text-xs font-medium text-gray-700 dark:text-slate-300"},"实名认证")])],-1)),e("div",Ve,[e("div",Me,[e("div",Te,[e("div",Ue,[s[16]||(s[16]=e("span",{class:"text-[10px] text-gray-500 dark:text-slate-500"},"USDT",-1)),e("span",Se,a(z("USDT",p.value||"USD")),1)]),e("div",Be,[s[17]||(s[17]=e("span",{class:"text-[10px] text-gray-500 dark:text-slate-500"},"BTC",-1)),e("span",Le,a(z("BTC",p.value||"USD")),1)]),e("div",De,[s[18]||(s[18]=e("span",{class:"text-[10px] text-gray-500 dark:text-slate-500"},"ETH",-1)),e("span",Pe,a(z("ETH",p.value||"USD")),1)])])]),e("div",je,[e("div",$e,[e("span",Fe,"USDT·"+a(p.value||"USD"),1),e("span",He,a(z("USDT",p.value||"USD")),1)]),e("div",Ae,[e("span",Re,"BTC·"+a(p.value||"USD"),1),e("span",Ie,a(z("BTC",p.value||"USD")),1)]),e("div",Ee,[e("span",Ne,"ETH·"+a(p.value||"USD"),1),e("span",Oe,a(z("ETH",p.value||"USD")),1)])])])]))]),e("div",We,[e("div",Je,[s[22]||(s[22]=e("span",{class:"text-xs text-gray-600 dark:text-slate-400 px-2"},"我想要",-1)),x(k,{onClick:s[0]||(s[0]=t=>o.value.tradeType="buy"),variant:o.value.tradeType==="buy"?"primary":"ghost",size:"sm"},{default:m(()=>[...s[20]||(s[20]=[f(" 购买 ",-1)])]),_:1},8,["variant"]),x(k,{onClick:s[1]||(s[1]=t=>o.value.tradeType="sell"),variant:o.value.tradeType==="sell"?"blue":"ghost",size:"sm"},{default:m(()=>[...s[21]||(s[21]=[f(" 出售 ",-1)])]),_:1},8,["variant"])]),x(V,{modelValue:o.value.cryptocurrency,"onUpdate:modelValue":s[2]||(s[2]=t=>o.value.cryptocurrency=t),options:Z.value,placeholder:"选择币种",size:"md",class:"w-40"},{selected:m(({option:t})=>[t&&i(v)(t.value)?(l(),y(h(i(v)(t.value)),{key:0,size:16,class:"mr-2 flex-shrink-0"})):u("",!0),e("span",Ke,a(t?.label),1)]),option:m(({option:t})=>[i(v)(t.value)?(l(),y(h(i(v)(t.value)),{key:0,size:16,class:"mr-2 flex-shrink-0"})):u("",!0),e("span",qe,a(t.label),1)]),_:1},8,["modelValue","options"]),e("div",Ge,[x(ae,{modelValue:o.value.paymentMethod,"onUpdate:modelValue":s[3]||(s[3]=t=>o.value.paymentMethod=t),placeholder:"选择支付",categories:i(K)},null,8,["modelValue","categories"])]),x(V,{modelValue:p.value,"onUpdate:modelValue":s[4]||(s[4]=t=>p.value=t),options:q.value,placeholder:"选择法币",size:"md",class:"w-32"},null,8,["modelValue","options"]),x(V,{modelValue:o.value.sortBy,"onUpdate:modelValue":s[5]||(s[5]=t=>o.value.sortBy=t),options:te,placeholder:"排序方式","default-value":"recent",size:"md",class:"w-36"},null,8,["modelValue"])]),e("div",Qe,[e("div",Xe,[e("div",Ye,[s[25]||(s[25]=e("span",{class:"text-xs text-gray-600 dark:text-slate-400 px-2"},"我想要",-1)),x(k,{onClick:s[6]||(s[6]=t=>o.value.tradeType="buy"),variant:o.value.tradeType==="buy"?"primary":"ghost",size:"sm"},{default:m(()=>[...s[23]||(s[23]=[f(" 购买 ",-1)])]),_:1},8,["variant"]),x(k,{onClick:s[7]||(s[7]=t=>o.value.tradeType="sell"),variant:o.value.tradeType==="sell"?"blue":"ghost",size:"sm"},{default:m(()=>[...s[24]||(s[24]=[f(" 出售 ",-1)])]),_:1},8,["variant"])])]),e("div",Ze,[x(V,{modelValue:o.value.cryptocurrency,"onUpdate:modelValue":s[8]||(s[8]=t=>o.value.cryptocurrency=t),options:Z.value,placeholder:"选择币种",size:"md",class:"w-full"},{selected:m(({option:t})=>[t&&i(v)(t.value)?(l(),y(h(i(v)(t.value)),{key:0,size:16,class:"mr-2 flex-shrink-0"})):u("",!0),e("span",et,a(t?.label),1)]),option:m(({option:t})=>[i(v)(t.value)?(l(),y(h(i(v)(t.value)),{key:0,size:16,class:"mr-2 flex-shrink-0"})):u("",!0),e("span",tt,a(t.label),1)]),_:1},8,["modelValue","options"]),x(ae,{modelValue:o.value.paymentMethod,"onUpdate:modelValue":s[9]||(s[9]=t=>o.value.paymentMethod=t),placeholder:"选择支付",categories:i(K)},null,8,["modelValue","categories"]),x(V,{modelValue:p.value,"onUpdate:modelValue":s[10]||(s[10]=t=>p.value=t),options:q.value,placeholder:"选择法币",size:"md",class:"w-full"},null,8,["modelValue","options"]),x(V,{modelValue:o.value.sortBy,"onUpdate:modelValue":s[11]||(s[11]=t=>o.value.sortBy=t),options:te,placeholder:"排序方式","default-value":"recent",size:"md",class:"w-full"},null,8,["modelValue"])])])])]),e("div",st,[e("div",rt,[e("div",at,[e("label",lt,[pe(e("input",{type:"checkbox","onUpdate:modelValue":s[12]||(s[12]=t=>o.value.onlyVerified=t),class:"w-4 h-4 sm:w-4 sm:h-4 text-amber-600 bg-gray-100 border-gray-300 rounded focus:ring-amber-500 dark:focus:ring-amber-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 cursor-pointer"},null,512),[[me,o.value.onlyVerified]]),s[26]||(s[26]=e("svg",{class:"w-4 h-4 sm:w-4 sm:h-4 text-amber-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)),s[27]||(s[27]=e("span",{class:"text-xs sm:text-sm text-gray-700 dark:text-slate-200 whitespace-nowrap"},"认证商家",-1))])]),M.value?(l(),n("div",ot,[...s[28]||(s[28]=[e("svg",{class:"animate-spin h-10 w-10 text-emerald-500 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"mt-2 text-gray-600 dark:text-slate-400"},"正在加载广告...",-1)])])):w.value?(l(),n("div",nt,[s[29]||(s[29]=e("svg",{class:"mx-auto h-12 w-12 text-red-500 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",dt,a(w.value),1),e("button",{onClick:P,class:"mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors cursor-pointer"}," 重新加载 ")])):U.value.length===0?(l(),n("div",it,[...s[30]||(s[30]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 dark:text-slate-500 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),e("h3",{class:"text-lg font-medium text-gray-900 dark:text-slate-100"},"暂无广告",-1),e("p",{class:"mt-1 text-gray-500 dark:text-slate-400"},"调整筛选条件或稍后再试",-1)])])):!M.value&&!w.value&&U.value.length>0?(l(),n("div",ct,[(l(!0),n(I,null,E(se.value,t=>(l(),n("div",{key:t.id,class:"bg-white dark:bg-slate-900/60 border border-gray-200 dark:border-slate-800 rounded-lg hover:border-gray-300 dark:hover:border-slate-700 transition-all group shadow-sm dark:shadow-none"},[e("div",ut,[e("div",pt,[e("div",mt,[x(i(N),{href:`/trader/profile/${t.seller.id||t.id}`,class:"relative flex-shrink-0 cursor-pointer hover:scale-105 transition-transform"},{default:m(()=>[t.seller.avatar||t.seller.profile_photo_url?(l(),n("img",{key:0,src:t.seller.avatar||t.seller.profile_photo_url,alt:t.seller.name,class:"h-12 w-12 rounded-full object-cover border-2 border-gray-200 dark:border-slate-700"},null,8,xt)):(l(),n("div",ft,[e("span",yt,a(t.seller.name?.[0]?.toUpperCase()||"U"),1)]))]),_:2},1032,["href"]),e("div",vt,[e("div",_t,[x(i(N),{href:`/trader/profile/${t.seller.id||t.id}`,class:"text-base leading-snug text-gray-900 dark:text-blue-400 font-semibold truncate hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors cursor-pointer"},{default:m(()=>[f(a(t.seller.name||"Unknown"),1)]),_:2},1032,["href"]),t.seller.isVerified?(l(),n("div",gt,[...s[31]||(s[31]=[e("div",{class:"p-0.5 bg-amber-500/20 rounded"},[e("svg",{class:"w-3.5 h-3.5 text-amber-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1),e("span",{class:"text-xs font-medium text-amber-500"},"已认证",-1)])])):u("",!0)]),e("div",bt,[e("div",ht,[e("div",kt,[(l(),n(I,null,E(5,c=>e("svg",{key:c,class:O(["w-3.5 h-3.5",c<=Math.floor(t.seller.rating)?"text-amber-500":"text-gray-300 dark:text-slate-700"]),fill:"currentColor",viewBox:"0 0 20 20"},[...s[32]||(s[32]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)])],2)),64))]),e("span",wt,a(t.seller.rating)+" ("+a(t.seller.totalReviews)+")",1)])]),e("div",Ct,[s[33]||(s[33]=e("svg",{class:"w-3 h-3 text-gray-400 dark:text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",zt,a(ee(t.seller.lastSeen)),1)])])]),e("div",Vt,[e("div",Mt,[e("div",Tt,[e("span",Ut,a(i(W)(t.paymentMethod)?.label||t.paymentMethod),1)]),t.notes?(l(),n("div",St,a(t.notes),1)):u("",!0)])]),e("div",Bt,[e("div",Lt,[t.price_model==="dynamic"?(l(),n("span",Dt," 动态单价 · "+a(t.fiat_currency||"USD"),1)):(l(),n("span",Pt," 固定单价 · "+a(t.fiat_currency||"USD"),1))]),e("p",jt,a(C(t.fiat_currency))+a(Y(t).toLocaleString()),1),g(t)!==null?(l(),n("div",{key:0,class:O(["text-xs mt-0.5",g(t)>0?"text-amber-500":"text-emerald-500"])},a(g(t)>0?"+":"")+a(Number(g(t)||0).toFixed(2))+"% "+a(g(t)>0?"高于":"低于")+"市场价 ",3)):u("",!0)]),e("div",$t,[e("div",Ft,[e("div",Ht,[s[34]||(s[34]=e("span",{class:"text-xs text-gray-500 dark:text-slate-500"},"限额:",-1)),e("span",At,a(C(t.fiat_currency))+a((t.limits?.min||0).toLocaleString())+" - "+a(C(t.fiat_currency))+a((t.limits?.max||1e4).toLocaleString()),1)]),o.value.tradeType==="buy"?(l(),y(k,{key:0,onClick:c=>j(t,"buy"),variant:"primary",size:"md",class:"group"},{default:m(()=>[e("span",Rt,[f(" 购买 "+a(i(B)(t.cryptocurrency)?.label||i(F)(t.cryptocurrency))+" ",1),e("span",It,[(l(),y(h(i(v)(t.cryptocurrency)),{size:20}))])])]),_:2},1032,["onClick"])):(l(),y(k,{key:1,onClick:c=>j(t,"sell"),variant:"blue",size:"md",class:"group"},{default:m(()=>[e("span",Et,[f(" 出售 "+a(i(B)(t.cryptocurrency)?.label||i(F)(t.cryptocurrency))+" ",1),e("span",Nt,[(l(),y(h(i(v)(t.cryptocurrency)),{size:20}))])])]),_:2},1032,["onClick"]))])])])]),e("div",Ot,[e("div",Wt,[t.seller.isVerified?(l(),n("span",Jt,[...s[35]||(s[35]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),f(" 认证商家 ",-1)])])):(l(),n("span",Kt," 普通商家 ")),t.seller.responseTime?(l(),n("span",qt," < "+a(t.seller.responseTime)+"分钟 ",1)):u("",!0),e("span",Gt,a(t.seller.trades)+" 笔交易 ",1),t.seller.trades>=100?(l(),n("span",Qt,[...s[36]||(s[36]=[e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1),f(" 优质 ",-1)])])):u("",!0),t.seller.completionRate>=99?(l(),n("span",Xt,[...s[37]||(s[37]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),f(" 极速 ",-1)])])):u("",!0)])])]))),128))])):u("",!0),!M.value&&!w.value&&U.value.length>0?(l(),n("div",Yt,[(l(!0),n(I,null,E(se.value,t=>(l(),n("div",{key:t.id,class:"bg-white dark:bg-slate-900/60 border border-gray-200 dark:border-slate-800 rounded-lg"},[e("div",Zt,[e("div",es,[e("div",ts,[x(i(N),{href:`/trader/profile/${t.seller.id}`,target:"_blank",class:"flex-shrink-0"},{default:m(()=>[t.seller.profile_photo_url?(l(),n("img",{key:0,src:t.seller.profile_photo_url,alt:t.seller.name,class:"h-10 w-10 rounded-full object-cover cursor-pointer hover:ring-2 hover:ring-emerald-500 transition-all"},null,8,ss)):(l(),n("div",rs,[e("span",as,a(t.seller.name?.[0]?.toUpperCase()||"U"),1)]))]),_:2},1032,["href"]),e("div",ls,[e("div",os,[e("p",ns,a(t.seller.name||"Unknown"),1),t.seller.isVerified?(l(),n("svg",ds,[...s[38]||(s[38]=[e("path",{"fill-rule":"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])])):u("",!0)]),e("div",is,[e("div",cs,[s[39]||(s[39]=e("svg",{class:"w-3 h-3 text-amber-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1)),e("span",null,a(t.seller.rating)+" ("+a(t.seller.totalReviews)+")",1)]),s[40]||(s[40]=e("span",null,"·",-1)),e("span",null,a(ee(t.seller.lastSeen)),1)])])])]),e("div",us,[e("div",ps,[e("div",null,[e("div",ms,[t.price_model==="dynamic"?(l(),n("span",xs,"动态价格")):(l(),n("span",fs,"固定价格")),f(" · "+a(t.fiat_currency||"USD"),1)]),e("p",ys,a(C(t.fiat_currency))+a(Y(t).toLocaleString()),1),g(t)!==null?(l(),n("div",{key:0,class:O(["text-xs mt-0.5",g(t)>0?"text-amber-500":"text-emerald-500"])},a(g(t)>0?"+":"")+a(Number(g(t)||0).toFixed(2))+"% "+a(g(t)>0?"高于":"低于")+"市场价 ",3)):u("",!0)]),e("div",vs,[s[41]||(s[41]=e("div",{class:"text-xs text-gray-500 dark:text-slate-400 mb-0.5"},"限额",-1)),e("p",_s,a(C(t.fiat_currency))+a((t.limits?.min||0).toLocaleString()),1),s[42]||(s[42]=e("p",{class:"text-xs text-gray-500 dark:text-slate-400"},"-",-1)),e("p",gs,a(C(t.fiat_currency))+a((t.limits?.max||1e4).toLocaleString()),1)])])]),e("div",bs,[t.seller.isVerified?(l(),n("span",hs," 认证 ")):u("",!0),t.seller.responseTime?(l(),n("span",ks," < "+a(t.seller.responseTime)+"分钟 ",1)):u("",!0),e("span",ws,a(t.seller.trades||0)+"笔交易 ",1),t.seller.trades>=100?(l(),n("span",Cs," 优质 ")):u("",!0)]),e("div",zs,[e("div",Vs,[e("span",Ms,a(i(W)(t.paymentMethod)?.label||t.paymentMethod),1)]),t.notes?(l(),n("div",Ts,a(t.notes),1)):u("",!0)]),e("div",Us,[o.value.tradeType==="buy"?(l(),y(k,{key:0,onClick:c=>j(t,"buy"),variant:"primary",size:"md",class:"flex-1"},{default:m(()=>[e("span",Ss,[f(" 购买 "+a(i(B)(t.cryptocurrency)?.label||i(F)(t.cryptocurrency))+" ",1),e("span",Bs,[(l(),y(h(i(v)(t.cryptocurrency)),{size:16}))])])]),_:2},1032,["onClick"])):(l(),y(k,{key:1,onClick:c=>j(t,"sell"),variant:"blue",size:"md",class:"flex-1"},{default:m(()=>[e("span",Ls,[f(" 出售 "+a(i(B)(t.cryptocurrency)?.label||i(F)(t.cryptocurrency))+" ",1),e("span",Ds,[(l(),y(h(i(v)(t.cryptocurrency)),{size:16}))])])]),_:2},1032,["onClick"]))])])]))),128))])):u("",!0),e("div",Ps,[x(ve,{"current-page":T.value,"onUpdate:currentPage":s[13]||(s[13]=t=>T.value=t),total:U.value.length,"per-page":A.value},null,8,["current-page","total","per-page"])])])]),x(_e,{show:D.value,title:"交易安全提醒",subtitle:"请仔细阅读以下重要提示","icon-color":"amber","cancel-text":"取消","confirm-text":"确认了解",onClose:s[14]||(s[14]=t=>D.value=!1),onConfirm:ce},{default:m(()=>[...s[43]||(s[43]=[e("div",{class:"space-y-4 text-sm"},[e("div",{class:"flex gap-2"},[e("svg",{class:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),e("div",null,[e("p",{class:"font-semibold text-gray-900 dark:text-slate-100 mb-1"}," 资金安全警告 "),e("p",{class:"text-gray-600 dark:text-slate-300"},[e("span",{class:"font-bold text-red-600 dark:text-red-400"},"切勿在资金到达托管前进行任何转账！"),f(" 请等待系统确认后再进行支付。 ")])])]),e("div",{class:"flex gap-2"},[e("svg",{class:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})]),e("div",null,[e("p",{class:"font-semibold text-gray-900 dark:text-slate-100 mb-1"}," 沟通凭证提醒 "),e("p",{class:"text-gray-600 dark:text-slate-300"}," 只有在本平台内的聊天记录才能作为交易凭证。站外沟通内容无法作为争议处理依据。 ")])]),e("div",{class:"flex gap-2"},[e("svg",{class:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),e("div",null,[e("p",{class:"font-semibold text-gray-900 dark:text-slate-100 mb-1"}," 交易条款确认 "),e("p",{class:"text-gray-600 dark:text-slate-300"}," 点击确认即表示您同意： "),e("ul",{class:"mt-1 space-y-1 text-gray-600 dark:text-slate-300"},[e("li",{class:"flex items-start gap-1"},[e("span",{class:"text-gray-400"},"•"),e("span",null,"遵守商家的交易条款")]),e("li",{class:"flex items-start gap-1"},[e("span",{class:"text-gray-400"},"•"),e("span",null,"在规定时间内完成交易")]),e("li",{class:"flex items-start gap-1"},[e("span",{class:"text-gray-400"},"•"),e("span",null,"使用实名账户进行支付")]),e("li",{class:"flex items-start gap-1"},[e("span",{class:"text-gray-400"},"•"),e("span",null,"诚信交易，不进行欺诈行为")])])])])],-1)])]),_:1},8,["show"])]),_:1}))}},Qs=be(js,[["__scopeId","data-v-ab6b0e1e"]]);export{Qs as default};
