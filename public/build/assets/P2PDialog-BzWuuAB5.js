import{P as V,g as q,d as g,I as A,c as f,o as a,b as y,w as k,f as r,i as l,a as t,T as h,j as v,r as x,n as c,J as z,t as d,k as p,e as $,v as D,H as N}from"./app-CdePqaxW.js";const H={key:0,class:"fixed inset-0 z-50 flex items-end md:items-center justify-center"},P={key:0,class:"relative bg-white dark:bg-slate-900 rounded-t-2xl md:rounded-2xl shadow-2xl w-full md:max-w-lg max-h-[90vh] overflow-hidden md:m-4"},I={key:0,class:"px-4 md:px-6 py-3 md:py-4 border-b border-gray-200 dark:border-slate-800"},L={class:"flex items-center justify-between"},O={class:"flex items-center gap-3"},U={key:1},E={class:"text-lg md:text-xl font-semibold text-gray-900 dark:text-slate-100"},F={key:0,class:"text-sm text-gray-500 dark:text-slate-400"},J={class:"overflow-y-auto flex-1 px-4 md:px-6 py-4"},R={key:0,class:"mb-4 p-3 bg-gray-50 dark:bg-slate-800/50 rounded-lg"},G={class:"flex items-center gap-3"},K={class:"h-10 w-10 rounded-full bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center flex-shrink-0"},Q={class:"text-white font-bold text-sm"},W={class:"flex-1 min-w-0"},X={class:"font-medium text-gray-900 dark:text-slate-100 text-sm"},Y={class:"flex items-center gap-2 text-xs"},Z={key:0,class:"inline-flex items-center gap-1 text-emerald-600 dark:text-emerald-400"},_={key:1,class:"text-gray-500 dark:text-slate-400"},ee={key:1,class:"bg-gray-50 dark:bg-slate-800/50 rounded-lg p-4 mb-4"},te={class:"text-sm text-gray-700 dark:text-slate-300 whitespace-pre-wrap leading-relaxed"},ae={key:0,class:"border-t border-gray-200 dark:border-slate-800 bg-white dark:bg-slate-900 px-4 md:px-6 py-3"},se={class:"flex items-start gap-3 cursor-pointer"},re={class:"text-sm text-gray-700 dark:text-slate-300 font-medium"},le={key:1,class:"px-4 md:px-6 py-4 border-t border-gray-200 dark:border-slate-800 bg-gray-50 dark:bg-slate-800/30"},oe={class:"flex gap-3"},ne=["disabled"],de={key:0,class:"absolute inset-0 flex items-center justify-center"},ce={__name:"P2PDialog",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},subtitle:{type:String,default:""},icon:{type:[String,Object],default:null},iconColor:{type:String,default:"amber",validator:e=>["amber","emerald","red","blue","purple"].includes(e)},merchant:{type:Object,default:null},terms:{type:String,default:""},requiresAgreement:{type:Boolean,default:!1},agreementText:{type:String,default:"我已了解并同意继续"},cancelText:{type:String,default:""},confirmText:{type:String,default:""},persistent:{type:Boolean,default:!1}},emits:["close","confirm"],setup(e,{emit:w}){const n=e,b=w,m=V(),i=q(!1),C=g(()=>{const o={amber:"bg-amber-100 dark:bg-amber-900/30",emerald:"bg-emerald-100 dark:bg-emerald-900/30",red:"bg-red-100 dark:bg-red-900/30",blue:"bg-blue-100 dark:bg-blue-900/30",purple:"bg-purple-100 dark:bg-purple-900/30"};return o[n.iconColor]||o.amber}),T=g(()=>{const o={amber:"text-amber-600 dark:text-amber-400",emerald:"text-emerald-600 dark:text-emerald-400",red:"text-red-600 dark:text-red-400",blue:"text-blue-600 dark:text-blue-400",purple:"text-purple-600 dark:text-purple-400"};return o[n.iconColor]||o.amber}),B=g(()=>n.cancelText||n.confirmText||m.footer);A(()=>n.show,o=>{o&&n.requiresAgreement&&(i.value=!1)});const j=()=>{n.persistent||b("close")},S=()=>{(!n.requiresAgreement||i.value)&&b("confirm")},M={template:`
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
        </svg>
    `};return!n.icon&&(n.title||n.terms)&&(n.icon=M),(o,s)=>(a(),f(N,{to:"body"},[y(h,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:k(()=>[e.show?(a(),r("div",H,[t("div",{class:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:j}),y(h,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"translate-y-full md:translate-y-0 md:scale-95 md:opacity-0","enter-to-class":"translate-y-0 md:scale-100 md:opacity-100","leave-active-class":"transition ease-in duration-200","leave-from-class":"translate-y-0 md:scale-100 md:opacity-100","leave-to-class":"translate-y-full md:translate-y-0 md:scale-95 md:opacity-0"},{default:k(()=>[e.show?(a(),r("div",P,[s[7]||(s[7]=t("div",{class:"md:hidden flex justify-center pt-2 pb-1"},[t("div",{class:"w-10 h-1 bg-gray-300 dark:bg-slate-700 rounded-full"})],-1)),e.title||v(m).header?(a(),r("div",I,[t("div",L,[t("div",O,[e.icon?(a(),r("div",{key:0,class:c(["p-2 rounded-lg",C.value])},[(a(),f(z(e.icon),{class:c(["w-5 h-5",T.value])},null,8,["class"]))],2)):l("",!0),e.title||e.subtitle?(a(),r("div",U,[t("h3",E,d(e.title),1),e.subtitle?(a(),r("p",F,d(e.subtitle),1)):l("",!0)])):x(o.$slots,"header",{key:2})]),t("button",{onClick:s[0]||(s[0]=u=>o.$emit("close")),class:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors cursor-pointer"},[...s[3]||(s[3]=[t("svg",{class:"w-5 h-5 text-gray-500 dark:text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):l("",!0),t("div",{class:c(["flex flex-col",B.value?"max-h-[60vh] md:max-h-[65vh]":""])},[t("div",J,[e.merchant?(a(),r("div",R,[t("div",G,[t("div",K,[t("span",Q,d(e.merchant.name?.[0]?.toUpperCase()||"M"),1)]),t("div",W,[t("p",X,d(e.merchant.name||"商家"),1),t("div",Y,[e.merchant.isVerified?(a(),r("span",Z,[...s[4]||(s[4]=[t("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),p(" 认证商家 ",-1)])])):l("",!0),e.merchant.tradesCount?(a(),r("span",_," 成交 "+d(e.merchant.tradesCount)+" | "+d(e.merchant.completionRate||100)+"% ",1)):l("",!0)])])])])):l("",!0),e.terms?(a(),r("div",ee,[s[5]||(s[5]=t("h4",{class:"font-semibold text-gray-900 dark:text-slate-100 mb-3"},"商家条款",-1)),t("p",te,d(e.terms),1)])):l("",!0),x(o.$slots,"default")]),e.requiresAgreement?(a(),r("div",ae,[t("label",se,[$(t("input",{type:"checkbox","onUpdate:modelValue":s[1]||(s[1]=u=>i.value=u),class:"mt-1 w-4 h-4 text-emerald-600 bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 rounded focus:ring-emerald-500 dark:focus:ring-emerald-400 focus:ring-2 cursor-pointer"},null,512),[[D,i.value]]),t("span",re,d(e.agreementText),1)])])):l("",!0)],2),v(m).footer||e.cancelText||e.confirmText?(a(),r("div",le,[x(o.$slots,"footer",{},()=>[t("div",oe,[e.cancelText?(a(),r("button",{key:0,onClick:s[2]||(s[2]=u=>o.$emit("close")),class:"flex-1 px-4 py-2.5 border-2 border-gray-300 dark:border-slate-600 text-gray-700 dark:text-slate-300 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors cursor-pointer font-medium"},d(e.cancelText),1)):l("",!0),e.confirmText?(a(),r("button",{key:1,onClick:S,disabled:e.requiresAgreement&&!i.value,class:c(["flex-1 px-4 py-2.5 rounded-lg font-medium transition-all relative",!e.requiresAgreement||i.value?"bg-emerald-600 hover:bg-emerald-700 text-white cursor-pointer shadow-sm hover:shadow-md":"bg-gray-300 dark:bg-slate-700 text-gray-500 dark:text-slate-500 cursor-not-allowed opacity-60"])},[e.requiresAgreement&&!i.value?(a(),r("div",de,[...s[6]||(s[6]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),p(" 请先勾选同意 ",-1)])])):l("",!0),t("span",{class:c({"opacity-0":e.requiresAgreement&&!i.value})},d(e.confirmText),3)],10,ne)):l("",!0)])])])):l("",!0)])):l("",!0)]),_:3})])):l("",!0)]),_:3})]))}};export{ce as _};
