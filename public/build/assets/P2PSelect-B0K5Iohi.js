import{r as p,d as L,g as N,i as T,f as s,o as l,a as t,b as C,k as E,F as w,l as y,t as m,n as b,w as _,e as D,L as M,s as O,T as V,m as R,C as F}from"./app-Ddr6hCNG.js";/* empty css                                                                  */import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"relative"},A=["disabled"],I={class:"flex items-center min-w-0 flex-1"},U={key:0,class:"mr-2 text-gray-500 dark:text-gray-400 flex-shrink-0"},G={key:1,class:"mr-2 text-lg flex-shrink-0"},J={class:"px-3 py-2 border-b border-gray-200 dark:border-gray-700"},K={class:"text-xs font-medium text-gray-500 dark:text-gray-400"},Q={key:0,class:"border-b border-gray-200 dark:border-gray-700"},W={class:"max-h-60 overflow-auto py-1 custom-scrollbar"},X=["onClick","disabled"],Y={class:"flex items-center"},Z={key:0,class:"mr-2 text-gray-500 dark:text-gray-400"},ee={key:1,class:"mr-2 text-lg"},te={class:"truncate"},re={key:0,class:"flex items-center"},ae={__name:"P2PSelect",props:{modelValue:{type:[String,Number,null],default:null},options:{type:Array,required:!0},placeholder:{type:String,default:"请选择"},disabled:{type:Boolean,default:!1},size:{type:String,default:"md",validator:o=>["sm","md","lg"].includes(o)},defaultValue:{type:[String,Number,null],default:null}},emits:["update:modelValue"],setup(o,{emit:S}){const u=o,h=S,d=p(!1),v=p(null),f=p({});let i=null;const c=L(()=>u.options.find(e=>e.value===u.modelValue)),$=()=>{u.disabled||(d.value?n():(i&&i!==n&&i(),d.value=!0,i=n,F(()=>{g()})))},n=()=>{d.value=!1,i===n&&(i=null)},z=e=>{h("update:modelValue",e.value),n()},B=()=>{h("update:modelValue",u.defaultValue),n()},g=()=>{if(!v.value)return;const e=v.value.getBoundingClientRect(),r=window.innerHeight;e.bottom>r?f.value={bottom:"100%",top:"auto",marginBottom:"0.5rem",marginTop:"0"}:f.value={}},P=L(()=>{const e="relative w-full cursor-pointer rounded border backdrop-blur text-left transition-all focus:border-emerald-500/50 focus:outline-none focus:ring-1 focus:ring-emerald-500/20",r={sm:"px-3 h-8 text-xs",md:"px-4 h-10 text-sm",lg:"px-4 h-12 text-base"},a=u.disabled?"cursor-not-allowed border-gray-300 dark:border-gray-800 bg-gray-100 dark:bg-gray-900/30 text-gray-400 dark:text-gray-600":d.value?"border-emerald-500/50 text-gray-900 dark:text-gray-100 bg-white dark:bg-gray-900/70":"border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900/50 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800/50 hover:border-gray-400 dark:hover:border-gray-600";return`${e} ${r[u.size]} ${a} flex items-center justify-between`}),j=e=>{const r="relative flex w-full select-none items-center justify-between px-3 py-2 text-sm transition-all";if(e.disabled)return`${r} cursor-not-allowed opacity-50 text-gray-400 dark:text-gray-500 bg-gray-50 dark:bg-gray-800/50`;const a=e.value===u.modelValue?"cursor-pointer bg-emerald-50 dark:bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 font-medium":"cursor-pointer text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700/50 hover:text-gray-900 dark:hover:text-gray-100";return`${r} ${a}`},k=e=>{const r=v.value?.closest(".relative");r&&!r.contains(e.target)&&n()},x=e=>{e.key==="Escape"&&d.value&&n()};return N(d,e=>{e?setTimeout(()=>{document.addEventListener("click",k),document.addEventListener("keydown",x),window.addEventListener("resize",g),window.addEventListener("scroll",g,!0)},0):(document.removeEventListener("click",k),document.removeEventListener("keydown",x),window.removeEventListener("resize",g),window.removeEventListener("scroll",g,!0))}),T(()=>{document.removeEventListener("click",k),document.removeEventListener("keydown",x),window.removeEventListener("resize",g),window.removeEventListener("scroll",g,!0),i===n&&(i=null)}),(e,r)=>(l(),s("div",q,[t("button",{type:"button",onClick:$,class:b(P.value),disabled:o.disabled},[t("span",I,[c.value&&e.$slots.selected?E(e.$slots,"selected",{key:0,option:c.value},void 0,!0):(l(),s(w,{key:1},[c.value?.icon?(l(),s("span",U,m(c.value.icon),1)):y("",!0),c.value?.flag?(l(),s("span",G,m(c.value.flag),1)):y("",!0),t("span",{class:b(["truncate block",c.value?"text-gray-900 dark:text-gray-100":"text-gray-500 dark:text-gray-400"])},m(c.value?.label||o.placeholder),3)],64))]),(l(),s("svg",{class:b(["ml-2 h-4 w-4 text-gray-500 dark:text-gray-500 transition-transform duration-200 flex-shrink-0",{"rotate-180":d.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...r[0]||(r[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],10,A),C(V,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100"},{default:_(()=>[D(t("div",{ref_key:"dropdownRef",ref:v,class:"absolute z-50 mt-2 w-full min-w-max rounded bg-white dark:bg-gray-900 shadow-xl ring-1 ring-gray-200 dark:ring-gray-700",style:M(f.value)},[t("div",J,[t("p",K,m(o.placeholder),1)]),o.modelValue&&o.modelValue!==o.defaultValue?(l(),s("div",Q,[t("button",{type:"button",onClick:B,class:"w-full flex items-center px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors cursor-pointer"},[...r[1]||(r[1]=[t("svg",{class:"w-4 h-4 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),t("span",null,"清除选择",-1)])])])):y("",!0),t("div",W,[(l(!0),s(w,null,O(o.options,a=>(l(),s("button",{key:a.value,type:"button",onClick:se=>!a.disabled&&z(a),class:b(j(a)),disabled:a.disabled},[t("span",Y,[e.$slots.option?E(e.$slots,"option",{key:0,option:a},void 0,!0):(l(),s(w,{key:1},[a.icon?(l(),s("span",Z,m(a.icon),1)):y("",!0),a.flag?(l(),s("span",ee,m(a.flag),1)):y("",!0),t("span",te,m(a.label),1)],64))]),C(V,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-0","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-0"},{default:_(()=>[a.value===o.modelValue?(l(),s("div",re,[...r[2]||(r[2]=[t("div",{class:"h-1.5 w-1.5 rounded-full bg-emerald-500 mr-2"},null,-1),t("svg",{class:"h-4 w-4 text-emerald-500",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)])])):y("",!0)]),_:2},1024)],10,X))),128))]),r[3]||(r[3]=t("div",{class:"px-3 py-2 bg-gray-50 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 rounded-b"},[t("div",{class:"flex items-center justify-center gap-1.5"},[t("img",{src:"/logo.png",alt:"Logo",class:"h-3.5 w-auto"}),t("span",{class:"text-xs font-medium text-gray-600 dark:text-gray-400"},"P2PCoinSwap")])],-1))],4),[[R,d.value]])]),_:3})]))}},de=H(ae,[["__scopeId","data-v-a3e99b62"]]);export{de as P};
