import{d as I,g as ye,h as pe,i as je,c as ne,o as s,b as M,w as z,f as a,l as u,T as fe,n as x,a as e,k as de,J as Qe,t as d,I as qe,x as W,r as $,C as ae,F as E,s as R,e as N,A as te,j as K,L as be,q as _,v as re,M as ke,K as G,E as Ze,p as ze,B as Ye}from"./app-CDtx7mxq.js";import{P as et}from"./P2PAppLayout-yrrA0B22.js";import{_ as O}from"./P2PButton-Mqp032Fe.js";import{_ as se}from"./P2PDialog-DWZwoEXU.js";import"./useConfig-Djm6Gbil.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const tt={class:"flex-shrink-0 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 px-4 py-3"},rt={class:"flex items-center justify-between"},st={key:0,class:"absolute top-2 left-1/2 -translate-x-1/2 w-12 h-1 bg-gray-300 dark:bg-gray-600 rounded-full"},at={class:"flex items-center gap-3"},ot={class:"text-lg font-bold text-gray-900 dark:text-gray-100"},lt={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},dt={key:0,class:"flex-shrink-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800 p-4"},Be={__name:"P2PMobileDrawer",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:"è¯¦æƒ…"},subtitle:{type:String,default:""},position:{type:String,default:"bottom",validator:r=>["bottom","right","left"].includes(r)},size:{type:String,default:"default",validator:r=>["small","default","large","full"].includes(r)},icon:{type:[Object,String],default:null},iconColor:{type:String,default:"blue",validator:r=>["blue","emerald","amber","red","purple"].includes(r)},persistent:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!0}},emits:["update:modelValue","open","close"],setup(r,{emit:c}){const y=r,b=c,g=I(()=>({bottom:"bottom-0 left-0 right-0 rounded-t-2xl",right:"top-0 right-0 bottom-0 rounded-l-2xl",left:"top-0 left-0 bottom-0 rounded-r-2xl"})[y.position]),n=I(()=>y.position==="bottom"?{small:"max-h-[40vh]",default:"max-h-[70vh]",large:"max-h-[85vh]",full:"h-full"}[y.size]:{small:"w-64",default:"w-80",large:"w-96",full:"w-full"}[y.size]),m=I(()=>{let f=["flex-1","min-h-0"];return y.scrollable&&f.push("overflow-y-auto"),f.join(" ")}),C=I(()=>({bottom:{from:"translate-y-full",to:"translate-y-0"},right:{from:"translate-x-full",to:"translate-x-0"},left:{from:"-translate-x-full",to:"translate-x-0"}})[y.position]),L=I(()=>({blue:"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",emerald:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400",amber:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400",red:"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400",purple:"bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400"})[y.iconColor]),B=()=>{y.persistent||(b("update:modelValue",!1),b("close"))},T=f=>{f.key==="Escape"&&y.modelValue&&!y.persistent&&B()},H=f=>{f?document.body.style.overflow="hidden":document.body.style.overflow=""};return ye(()=>y.modelValue,f=>{H(f),f&&b("open")}),pe(()=>{document.addEventListener("keydown",T)}),je(()=>{document.removeEventListener("keydown",T),H(!1)}),(f,w)=>(s(),ne(qe,{to:"body"},[M(fe,{"enter-active-class":"transition-opacity ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:z(()=>[r.modelValue?(s(),a("div",{key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[60] lg:hidden",onClick:B})):u("",!0)]),_:1}),M(fe,{"enter-active-class":"transition-transform ease-out duration-300","enter-from-class":C.value.from,"enter-to-class":C.value.to,"leave-active-class":"transition-transform ease-in duration-200","leave-from-class":C.value.to,"leave-to-class":C.value.from},{default:z(()=>[r.modelValue?(s(),a("div",{key:0,class:x(["fixed z-[70] bg-white dark:bg-gray-900 shadow-2xl lg:hidden flex flex-col pt-safe",g.value,n.value])},[e("div",tt,[e("div",rt,[r.position==="bottom"?(s(),a("div",st)):u("",!0),e("div",at,[de(f.$slots,"header-icon",{},()=>[r.icon?(s(),a("div",{key:0,class:x(["p-2 rounded-lg",L.value])},[(s(),ne(Qe(r.icon),{class:"w-5 h-5"}))],2)):u("",!0)]),e("div",null,[e("h3",ot,d(r.title),1),r.subtitle?(s(),a("p",lt,d(r.subtitle),1)):u("",!0)])]),e("button",{onClick:B,class:"p-2 rounded text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"},[...w[0]||(w[0]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",{class:x(m.value)},[de(f.$slots,"default")],2),f.$slots.footer?(s(),a("div",dt,[de(f.$slots,"footer")])):u("",!0)],2)):u("",!0)]),_:3},8,["enter-from-class","enter-to-class","leave-from-class","leave-to-class"])]))}},nt={class:"md:hidden sticky top-0 z-50 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 pt-safe"},it={class:"flex items-center justify-between h-14 px-4"},ut={class:"flex items-center gap-3 flex-1"},ct={class:"text-base font-semibold text-gray-900 dark:text-gray-100"},mt={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},xt={class:"flex items-center gap-1"},gt={__name:"P2PMobileHeader",props:{title:{type:String,required:!0},subtitle:{type:String,default:""},backUrl:{type:String,default:null}},setup(r){const c=r,y=()=>{c.backUrl?W.visit(c.backUrl):window.history.back()};return(b,g)=>(s(),a("div",nt,[e("div",it,[e("div",ut,[e("button",{onClick:y,class:"p-2 -ml-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"},[...g[0]||(g[0]=[e("svg",{class:"w-5 h-5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),de(b.$slots,"custom",{},()=>[e("div",null,[e("h1",ct,d(r.title),1),r.subtitle?(s(),a("p",mt,d(r.subtitle),1)):u("",!0)])])]),e("div",xt,[de(b.$slots,"actions")])])]))}},vt={class:"space-y-3"},bt={class:"flex items-center gap-2"},yt={class:"text-sm font-medium text-gray-700 dark:text-slate-300"},ft={class:"flex gap-2 justify-center"},kt=["onUpdate:modelValue","onInput","onKeydown","disabled"],pt={key:0,class:"text-xs text-red-600 dark:text-red-400 text-center"},ht={key:1,class:"text-xs text-gray-500 dark:text-slate-400 text-center"},wt={key:2,class:"text-center"},Ue={__name:"P2PTwoFactorInput",props:{modelValue:{type:String,default:""},label:{type:String,default:"åŒé‡éªŒè¯ç "},error:{type:String,default:""},helpText:{type:String,default:"è¯·è¾“å…¥æ‚¨çš„éªŒè¯å™¨åº”ç”¨ä¸­æ˜¾ç¤ºçš„6ä½æ•°å­—"},disabled:{type:Boolean,default:!1},showRecoveryOption:{type:Boolean,default:!1},autoFocus:{type:Boolean,default:!0}},emits:["update:modelValue","complete","use-recovery"],setup(r,{expose:c,emit:y}){const b=r,g=y,n=$(["","","","","",""]),m=$([]);ye(n,f=>{const w=f.join("");g("update:modelValue",w),w.length===6&&/^\d{6}$/.test(w)&&g("complete",w)},{deep:!0}),ye(()=>b.modelValue,f=>{if(f==="")n.value=["","","","","",""];else if(f.length<=6){const w=f.split("");for(let F=0;F<6;F++)n.value[F]=w[F]||""}});const C=(f,w)=>{const F=w.target.value;if(!/^\d*$/.test(F)){w.target.value=n.value[f];return}F&&f<5&&ae(()=>{m.value[f+1]?.focus(),m.value[f+1]?.select()})},L=(f,w)=>{w.key==="Backspace"?!n.value[f]&&f>0&&(w.preventDefault(),n.value[f-1]="",m.value[f-1]?.focus()):w.key==="ArrowLeft"&&f>0?(w.preventDefault(),m.value[f-1]?.focus()):w.key==="ArrowRight"&&f<5&&(w.preventDefault(),m.value[f+1]?.focus())},B=f=>{f.preventDefault();const F=f.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);if(F){const j=F.split("");for(let k=0;k<6;k++)n.value[k]=j[k]||"";const v=Math.min(j.length,5);m.value[v]?.focus()}},T=()=>{n.value=["","","","","",""],m.value[0]?.focus()},H=()=>{m.value[0]?.focus()};return pe(()=>{b.autoFocus&&ae(()=>{m.value[0]?.focus()})}),c({clear:T,focus:H}),(f,w)=>(s(),a("div",vt,[e("div",bt,[w[2]||(w[2]=e("svg",{class:"w-5 h-5 text-emerald-600 dark:text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})],-1)),e("label",yt,d(r.label||"åŒé‡éªŒè¯ç "),1)]),e("div",ft,[(s(!0),a(E,null,R(n.value,(F,j)=>N((s(),a("input",{key:j,ref_for:!0,ref:v=>m.value[j]=v,"onUpdate:modelValue":v=>n.value[j]=v,type:"text",inputmode:"numeric",maxlength:"1",class:x(["w-12 h-12 text-center text-lg font-mono font-bold rounded-lg border-2 transition-all duration-200 focus:outline-none",[r.error?"border-red-500 bg-red-50 dark:bg-red-900/20 text-red-900 dark:text-red-200":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:border-emerald-500 dark:focus:border-emerald-400 focus:ring-2 focus:ring-emerald-500/20"]]),onInput:v=>C(j,v),onKeydown:v=>L(j,v),onPaste:w[0]||(w[0]=v=>B(v)),disabled:r.disabled},null,42,kt)),[[te,n.value[j]]])),128))]),r.error?(s(),a("p",pt,d(r.error),1)):u("",!0),r.helpText&&!r.error?(s(),a("p",ht,d(r.helpText),1)):u("",!0),r.showRecoveryOption?(s(),a("div",wt,[e("button",{type:"button",onClick:w[1]||(w[1]=F=>f.$emit("use-recovery")),class:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors"}," ä½¿ç”¨æ¢å¤ä»£ç  ")])):u("",!0)]))}},_t={class:"relative group"},Ct={key:0,class:"relative"},$t=["src","alt"],Mt={class:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent md:opacity-0 md:group-hover:opacity-100 transition-opacity flex items-end justify-between p-2"},zt={key:0,class:"mt-1"},Bt={class:"flex gap-1"},jt={class:"flex-1 min-w-0"},Ft={class:"relative max-w-[90vw] max-h-[90vh] flex flex-col"},At=["src","alt"],St={class:"flex justify-center gap-4 mt-4 md:hidden"},Lt=["href"],ve={__name:"P2PAttachment",props:{attachment:{type:Object,required:!0,validator:r=>r.url&&r.name&&r.type},variant:{type:String,default:"default",validator:r=>["default","primary"].includes(r)},thumbnailSize:{type:String,default:"md",validator:r=>["sm","md","lg"].includes(r)},showInfo:{type:Boolean,default:!1}},setup(r){const c=r,y=$(!1);$(!1);const b=I(()=>/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),g=I(()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://")),n=I(()=>c.attachment.type&&c.attachment.type.startsWith("image/")),m=I(()=>c.attachment.type==="application/pdf"),C={sm:{width:"150px",height:"150px"},md:{width:"200px",height:"200px"},lg:{width:"250px",height:"250px"}},L=I(()=>C[c.thumbnailSize].width),B=I(()=>C[c.thumbnailSize].height),T=I(()=>c.variant==="primary"?"bg-emerald-500 hover:bg-emerald-400":"bg-white dark:bg-slate-700 hover:bg-gray-50 dark:hover:bg-slate-600"),H=I(()=>c.variant==="primary"?"text-white":"text-gray-900 dark:text-slate-200"),f=I(()=>c.variant==="primary"?"text-emerald-100":"text-gray-500 dark:text-slate-400"),w=I(()=>c.variant==="primary"?"text-white":"text-gray-600 dark:text-slate-400"),F=I(()=>c.variant==="primary"?"text-white/90":"text-gray-700 dark:text-slate-300"),j=I(()=>c.variant==="primary"?"text-white/70":"text-gray-500 dark:text-slate-400"),v=V=>{if(!V)return"0 B";const h=1024,he=["B","KB","MB","GB"],i=Math.floor(Math.log(V)/Math.log(h));return Math.round(V/Math.pow(h,i)*100)/100+" "+he[i]},k=V=>V&&{"application/zip":"ZIP","application/x-rar-compressed":"RAR","application/msword":"Word","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"Word","application/vnd.ms-excel":"Excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"Excel","text/plain":"æ–‡æœ¬","text/csv":"CSV"}[V]||"æ–‡ä»¶",S=()=>{n.value&&(y.value=!0)},U=()=>{y.value=!1},X=()=>{g.value&&b.value?alert("è¯·é•¿æŒ‰å›¾ç‰‡ä¿å­˜æˆ–ä½¿ç”¨åˆ†äº«åŠŸèƒ½"):window.open(c.attachment.url,"_blank")},Q=()=>{if(g.value&&b.value)if(n.value)S();else{const V=document.createElement("iframe");V.style.display="none",V.src=c.attachment.url,document.body.appendChild(V),setTimeout(()=>{document.body.removeChild(V)},3e3),alert("æ–‡ä»¶ä¸‹è½½å·²å¼€å§‹ï¼Œè¯·æ£€æŸ¥æ‚¨çš„ä¸‹è½½æ–‡ä»¶å¤¹")}else{const V=document.createElement("a");V.href=c.attachment.url,V.download=c.attachment.name||"download",document.body.appendChild(V),V.click(),document.body.removeChild(V)}};return(V,h)=>(s(),a("div",_t,[n.value?(s(),a("div",Ct,[e("div",{onClick:S,class:"relative overflow-hidden rounded-lg cursor-pointer transition-all hover:opacity-90",style:be(`width: ${L.value}; height: ${B.value};`)},[e("img",{src:r.attachment.url,alt:r.attachment.name,class:"w-full h-full object-cover"},null,8,$t),e("div",Mt,[e("button",{onClick:K(S,["stop"]),class:"p-1.5 md:p-2 bg-white/90 backdrop-blur-sm rounded-full text-gray-700 hover:bg-white transition-colors",title:"æŸ¥çœ‹"},[...h[1]||(h[1]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])]),g.value?u("",!0):(s(),a("button",{key:0,onClick:K(Q,["stop"]),class:"p-1.5 md:p-2 bg-white/90 backdrop-blur-sm rounded-full text-gray-700 hover:bg-white transition-colors",title:"ä¸‹è½½"},[...h[2]||(h[2]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)])]))])],4),r.showInfo?(s(),a("div",zt,[e("p",{class:x(["text-xs truncate",F.value])},d(r.attachment.name),3),e("p",{class:x(["text-xs",j.value])},d(v(r.attachment.size)),3)])):u("",!0)])):m.value?(s(),a("div",{key:1,class:x(["flex items-center gap-2 md:gap-3 p-2.5 md:p-3 rounded-lg transition-colors",T.value])},[e("div",{class:"flex-shrink-0",onClick:X},[...h[3]||(h[3]=[e("div",{class:"w-10 h-10 bg-red-500 rounded-lg flex items-center justify-center cursor-pointer"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})])],-1)])]),e("div",{class:"flex-1 min-w-0",onClick:X},[e("p",{class:x(["text-xs md:text-sm font-medium truncate cursor-pointer",H.value])},d(r.attachment.name),3),e("p",{class:x(["text-xs",f.value])},"PDF Â· "+d(v(r.attachment.size)),3)]),e("div",Bt,[e("button",{onClick:X,class:"p-1.5 rounded-lg bg-black/5 hover:bg-black/10 transition-colors md:hidden",title:"æŸ¥çœ‹"},[(s(),a("svg",{class:x(["w-4 h-4",w.value]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...h[4]||(h[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])],2))]),g.value?u("",!0):(s(),a("button",{key:0,onClick:K(Q,["stop"]),class:"p-1.5 rounded-lg bg-black/5 hover:bg-black/10 transition-colors",title:"ä¸‹è½½"},[(s(),a("svg",{class:x(["w-4 h-4",w.value]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...h[5]||(h[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)])],2))]))])],2)):(s(),a("div",{key:2,class:x(["flex items-center gap-2 md:gap-3 p-2.5 md:p-3 rounded-lg transition-colors",T.value])},[h[7]||(h[7]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-gray-500 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])])],-1)),e("div",jt,[e("p",{class:x(["text-xs md:text-sm font-medium truncate",H.value])},d(r.attachment.name),3),e("p",{class:x(["text-xs",f.value])},d(k(r.attachment.type))+" Â· "+d(v(r.attachment.size)),3)]),g.value?u("",!0):(s(),a("button",{key:0,onClick:K(Q,["stop"]),class:"flex-shrink-0 p-1.5 rounded-lg bg-black/5 hover:bg-black/10 transition-colors",title:"ä¸‹è½½"},[(s(),a("svg",{class:x(["w-4 h-4",w.value]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...h[6]||(h[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)])],2))]))],2)),(s(),ne(qe,{to:"body"},[M(fe,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:z(()=>[y.value?(s(),a("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/95 backdrop-blur-sm p-4",onClick:U},[e("div",Ft,[e("img",{src:r.attachment.url,alt:r.attachment.name,class:"max-w-full max-h-[80vh] md:max-h-[90vh] object-contain",onClick:h[0]||(h[0]=K(()=>{},["stop"]))},null,8,At),e("div",St,[e("button",{onClick:U,class:"p-3 bg-white/90 backdrop-blur-sm rounded-full text-gray-700 active:bg-white transition-colors",title:"å…³é—­"},[...h[8]||(h[8]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),g.value?u("",!0):(s(),a("button",{key:0,onClick:Q,class:"p-3 bg-white/90 backdrop-blur-sm rounded-full text-gray-700 active:bg-white transition-colors",title:"ä¸‹è½½åŸå›¾"},[...h[9]||(h[9]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)])]))]),e("button",{onClick:U,class:"hidden md:block absolute top-4 right-4 p-2 bg-black/50 hover:bg-black/70 rounded-full text-white transition-colors"},[...h[10]||(h[10]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),g.value?u("",!0):(s(),a("a",{key:0,href:r.attachment.url,download:"",class:"hidden md:block absolute bottom-4 right-4 p-3 bg-white/90 hover:bg-white rounded-full text-gray-700 transition-colors",title:"ä¸‹è½½åŸå›¾"},[...h[11]||(h[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)])],8,Lt))])])):u("",!0)]),_:1})]))]))}},Vt={class:"relative"},Et=["disabled"],It={key:0},Pt={class:"border-b border-gray-200 dark:border-gray-700 p-2"},Tt={class:"flex gap-1 overflow-x-auto"},Ut=["onClick"],Dt={class:"p-2 max-h-64 overflow-y-auto"},qt={class:"grid grid-cols-8 gap-1"},Rt=["onClick","title"],Ht={key:0,class:"border-t border-gray-200 dark:border-gray-700 p-2"},Wt={class:"flex gap-1 flex-wrap"},Ot=["onClick"],Nt={class:"flex flex-col h-full"},Kt={key:0,class:"px-4 pb-3 border-b border-gray-200 dark:border-gray-700"},Jt={class:"flex gap-2 flex-wrap"},Xt=["onClick"],Gt={class:"px-4 py-2 border-b border-gray-200 dark:border-gray-700"},Qt={class:"flex gap-2 overflow-x-auto pb-1"},Zt=["onClick"],Yt={class:"flex-1 overflow-y-auto px-4 py-3"},er={class:"grid grid-cols-6 gap-2"},tr=["onClick"],De={__name:"P2PEmojiPicker",props:{disabled:{type:Boolean,default:!1},placement:{type:String,default:"bottom",validator:r=>["top","bottom"].includes(r)}},emits:["select"],setup(r,{emit:c}){const y=r,b=c,g=$(!1),n=$("smileys"),m=$([]),C=$(!1),L=[{name:"smileys",label:"è¡¨æƒ…",emojis:["ğŸ˜€","ğŸ˜ƒ","ğŸ˜„","ğŸ˜","ğŸ˜…","ğŸ˜‚","ğŸ¤£","ğŸ˜Š","ğŸ˜‡","ğŸ™‚","ğŸ˜‰","ğŸ˜Œ","ğŸ˜","ğŸ¥°","ğŸ˜˜","ğŸ˜—","ğŸ˜™","ğŸ˜š","ğŸ˜‹","ğŸ˜›","ğŸ˜œ","ğŸ¤ª","ğŸ˜","ğŸ¤‘","ğŸ¤—","ğŸ¤­","ğŸ¤«","ğŸ¤”","ğŸ¤","ğŸ¤¨","ğŸ˜","ğŸ˜‘","ğŸ˜¶","ğŸ˜","ğŸ˜’","ğŸ™„","ğŸ˜¬","ğŸ¤¥","ğŸ˜Œ","ğŸ˜”","ğŸ˜ª","ğŸ¤¤","ğŸ˜´","ğŸ˜·","ğŸ¤’","ğŸ¤•","ğŸ¤¢","ğŸ¤®","ğŸ¤§","ğŸ˜µ","ğŸ¤¯","ğŸ¤ ","ğŸ˜","ğŸ¤“","ğŸ§","ğŸ˜•","ğŸ˜Ÿ","ğŸ™","â˜¹ï¸","ğŸ˜®","ğŸ˜¯","ğŸ˜²","ğŸ˜³","ğŸ¥º","ğŸ˜¦","ğŸ˜§","ğŸ˜¨","ğŸ˜°","ğŸ˜¥","ğŸ˜¢","ğŸ˜­","ğŸ˜±","ğŸ˜–","ğŸ˜£","ğŸ˜","ğŸ˜“","ğŸ˜©","ğŸ˜«","ğŸ¥±","ğŸ˜¤","ğŸ˜¡","ğŸ˜ ","ğŸ¤¬","ğŸ˜ˆ","ğŸ‘¿","ğŸ’€","â˜ ï¸","ğŸ’©","ğŸ¤¡","ğŸ‘¹","ğŸ‘º","ğŸ‘»","ğŸ‘½","ğŸ‘¾","ğŸ¤–"]},{name:"gestures",label:"æ‰‹åŠ¿",emojis:["ğŸ‘‹","ğŸ¤š","ğŸ–ï¸","âœ‹","ğŸ––","ğŸ‘Œ","ğŸ¤Œ","ğŸ¤","âœŒï¸","ğŸ¤","ğŸ¤Ÿ","ğŸ¤˜","ğŸ¤™","ğŸ‘ˆ","ğŸ‘‰","ğŸ‘†","ğŸ–•","ğŸ‘‡","â˜ï¸","ğŸ‘","ğŸ‘","âœŠ","ğŸ‘Š","ğŸ¤›","ğŸ¤œ","ğŸ‘","ğŸ™Œ","ğŸ‘","ğŸ¤²","ğŸ¤","ğŸ™","âœï¸","ğŸ’ª","ğŸ¦¾","ğŸ¦¿","ğŸ¦µ","ğŸ¦¶","ğŸ‘‚","ğŸ¦»","ğŸ‘ƒ","ğŸ§ ","ğŸ«€","ğŸ«","ğŸ¦·","ğŸ¦´","ğŸ‘€","ğŸ‘ï¸","ğŸ‘…","ğŸ‘„"]},{name:"hearts",label:"çˆ±å¿ƒ",emojis:["â¤ï¸","ğŸ§¡","ğŸ’›","ğŸ’š","ğŸ’™","ğŸ’œ","ğŸ–¤","ğŸ¤","ğŸ¤","ğŸ’”","â£ï¸","ğŸ’•","ğŸ’","ğŸ’“","ğŸ’—","ğŸ’–","ğŸ’˜","ğŸ’","ğŸ’Ÿ","â˜®ï¸","âœï¸","â˜ªï¸","ğŸ•‰ï¸","â˜¸ï¸","âœ¡ï¸","ğŸ”¯","ğŸ•","â˜¯ï¸","â˜¦ï¸","ğŸ›","â›","â™ˆ","â™‰","â™Š","â™‹","â™Œ","â™","â™","â™","â™","â™‘","â™’","â™“","ğŸ†”","âš›ï¸"]},{name:"symbols",label:"ç¬¦å·",emojis:["âœ…","âŒ","â“","â—","â•","â”","â­•","ğŸš«","ğŸ’¯","ğŸ’¢","â™¨ï¸","ğŸš·","ğŸš¯","ğŸš³","ğŸš±","ğŸ”","ğŸ“µ","ğŸš­","â€¼ï¸","â‰ï¸","ğŸ”…","ğŸ”†","ã€½ï¸","âš ï¸","ğŸš¸","ğŸ”±","âšœï¸","ğŸ”°","â™»ï¸","âœ³ï¸","â‡ï¸","ğŸ’¹","ğŸ’²","ğŸ’±","Â©ï¸","Â®ï¸","â„¢ï¸","#ï¸âƒ£","*ï¸âƒ£","0ï¸âƒ£","1ï¸âƒ£","2ï¸âƒ£","3ï¸âƒ£","4ï¸âƒ£","5ï¸âƒ£","6ï¸âƒ£","7ï¸âƒ£","8ï¸âƒ£","9ï¸âƒ£","ğŸ”Ÿ","ğŸ” ","ğŸ”¡","ğŸ”¤","ğŸ†’","ğŸ†•","ğŸ†–","ğŸ†—","ğŸ†™","ğŸ†š"]},{name:"objects",label:"ç‰©å“",emojis:["ğŸ“±","ğŸ’»","âŒ¨ï¸","ğŸ–¥ï¸","ğŸ–¨ï¸","ğŸ–±ï¸","ğŸ–²ï¸","ğŸ•¹ï¸","ğŸ—œï¸","ğŸ’¾","ğŸ’¿","ğŸ“€","ğŸ“¼","ğŸ“·","ğŸ“¸","ğŸ“¹","ğŸ¥","ğŸ“½ï¸","ğŸï¸","ğŸ“","â˜ï¸","ğŸ“Ÿ","ğŸ“ ","ğŸ“º","ğŸ“»","ğŸ™ï¸","ğŸšï¸","ğŸ›ï¸","ğŸ§­","â±ï¸","â²ï¸","â°","ğŸ•°ï¸","âŒ›","â³","ğŸ“¡","ğŸ”‹","ğŸ”Œ","ğŸ’¡","ğŸ”¦","ğŸ•¯ï¸","ğŸ§¯","ğŸ›¢ï¸","ğŸ’¸","ğŸ’µ","ğŸ’´","ğŸ’¶","ğŸ’·","ğŸ’°","ğŸ’³","ğŸ’","âš–ï¸","ğŸ§°","ğŸ”§","ğŸ”¨","âš’ï¸","ğŸ› ï¸","â›ï¸","ğŸ”©","âš™ï¸","ğŸ§±","â›“ï¸","ğŸ§²","ğŸ”«","ğŸ’£","ğŸ§¨","ğŸª“","ğŸ”ª","ğŸ—¡ï¸","âš”ï¸","ğŸ›¡ï¸","ğŸš¬","âš°ï¸","âš±ï¸","ğŸº","ğŸ”®","ğŸ“¿","ğŸ§¿","ğŸ’ˆ","âš—ï¸","ğŸ”­","ğŸ”¬","ğŸ•³ï¸","ğŸ©¹","ğŸ©º","ğŸ’Š","ğŸ’‰","ğŸ©¸","ğŸ§¬","ğŸ¦ ","ğŸ§«","ğŸ§ª","ğŸŒ¡ï¸","ğŸ§¹","ğŸ§º","ğŸ§»","ğŸš½","ğŸš°","ğŸš¿","ğŸ›","ğŸ›€","ğŸ§¼","ğŸª’","ğŸ§½","ğŸ§´","ğŸ›ï¸","ğŸ”‘","ğŸ—ï¸","ğŸšª","ğŸª‘","ğŸ›‹ï¸","ğŸ›ï¸","ğŸ›Œ","ğŸ§¸","ğŸ–¼ï¸","ğŸ›ï¸","ğŸ›’","ğŸ","ğŸˆ","ğŸ","ğŸ€","ğŸŠ","ğŸ‰","ğŸ","ğŸ®","ğŸ","ğŸ§§","âœ‰ï¸","ğŸ“©","ğŸ“¨","ğŸ“§","ğŸ’Œ","ğŸ“¥","ğŸ“¤","ğŸ“¦","ğŸ·ï¸","ğŸ“ª","ğŸ“«","ğŸ“¬","ğŸ“­","ğŸ“®","ğŸ“¯","ğŸ“œ","ğŸ“ƒ","ğŸ“„","ğŸ“‘","ğŸ§¾","ğŸ“Š","ğŸ“ˆ","ğŸ“‰","ğŸ—’ï¸","ğŸ—“ï¸","ğŸ“†","ğŸ“…","ğŸ—‘ï¸","ğŸ“‡","ğŸ—ƒï¸","ğŸ—³ï¸","ğŸ—„ï¸","ğŸ“‹","ğŸ“","ğŸ“‚","ğŸ—‚ï¸","ğŸ—ï¸","ğŸ“°","ğŸ““","ğŸ“”","ğŸ“’","ğŸ“•","ğŸ“—","ğŸ“˜","ğŸ“™","ğŸ“š","ğŸ“–","ğŸ”–","ğŸ§·","ğŸ”—","ğŸ“","ğŸ–‡ï¸","ğŸ“","ğŸ“","ğŸ§®","ğŸ“Œ","ğŸ“","âœ‚ï¸","ğŸ–Šï¸","ğŸ–‹ï¸","âœ’ï¸","ğŸ–Œï¸","ğŸ–ï¸","ğŸ“","âœï¸","ğŸ”","ğŸ”","ğŸ”","ğŸ”","ğŸ”’","ğŸ”“"]}],B=I(()=>{const j=L.find(v=>v.name===n.value);return j?j.emojis:[]}),T=()=>{C.value=window.innerWidth<768},H=()=>{y.disabled||(g.value=!g.value)},f=()=>{g.value=!1},w=j=>{b("select",j);const v=m.value.indexOf(j);v>-1&&m.value.splice(v,1),m.value.unshift(j),m.value=m.value.slice(0,8),localStorage.setItem("recentEmojis",JSON.stringify(m.value)),f()},F=j=>{j.key==="Escape"&&g.value&&!C.value&&f()};return pe(()=>{const j=localStorage.getItem("recentEmojis");if(j)try{m.value=JSON.parse(j)}catch(v){console.error("Failed to parse recent emojis:",v)}T(),window.addEventListener("resize",T),document.addEventListener("keydown",F)}),je(()=>{window.removeEventListener("resize",T),document.removeEventListener("keydown",F)}),(j,v)=>(s(),a("div",Vt,[e("button",{type:"button",onClick:H,class:x(["p-2 rounded transition-colors",r.disabled?"text-gray-300 dark:text-gray-600 cursor-not-allowed":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer"]),disabled:r.disabled},[...v[1]||(v[1]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])],10,Et),C.value?u("",!0):(s(),a("div",It,[g.value?(s(),a("div",{key:0,class:"fixed inset-0 z-40",onClick:f})):u("",!0),M(fe,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:z(()=>[g.value?(s(),a("div",{key:0,class:x(["absolute z-50 bg-white dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-700 shadow-lg",[r.placement==="top"?"bottom-full mb-2":"top-full mt-2","right-0 md:left-0"]]),style:{width:"320px"}},[e("div",Pt,[e("div",Tt,[(s(),a(E,null,R(L,k=>e("button",{key:k.name,type:"button",onClick:K(S=>n.value=k.name,["stop","prevent"]),class:x(["px-3 py-1.5 rounded text-xs font-medium transition-colors whitespace-nowrap",n.value===k.name?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800"])},d(k.label),11,Ut)),64))])]),e("div",Dt,[e("div",qt,[(s(!0),a(E,null,R(B.value,k=>(s(),a("button",{key:k,type:"button",onClick:K(S=>w(k),["stop","prevent"]),class:"p-2 text-xl hover:bg-gray-100 dark:hover:bg-gray-800 rounded transition-colors",title:k},d(k),9,Rt))),128))])]),m.value.length>0?(s(),a("div",Ht,[v[2]||(v[2]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},"æœ€è¿‘ä½¿ç”¨",-1)),e("div",Wt,[(s(!0),a(E,null,R(m.value,k=>(s(),a("button",{key:k,type:"button",onClick:K(S=>w(k),["stop","prevent"]),class:"p-2 text-xl hover:bg-gray-100 dark:hover:bg-gray-800 rounded transition-colors"},d(k),9,Ot))),128))])])):u("",!0)],2)):u("",!0)]),_:1})])),C.value?(s(),ne(Be,{key:1,modelValue:g.value,"onUpdate:modelValue":v[0]||(v[0]=k=>g.value=k),title:"é€‰æ‹©è¡¨æƒ…",position:"bottom",size:"default",scrollable:!1},{"header-icon":z(()=>[...v[3]||(v[3]=[e("div",{class:"p-2 rounded bg-amber-100 dark:bg-amber-900/30"},[e("svg",{class:"w-5 h-5 text-amber-600 dark:text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)])]),default:z(()=>[e("div",Nt,[m.value.length>0?(s(),a("div",Kt,[v[4]||(v[4]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mb-2"},"æœ€è¿‘ä½¿ç”¨",-1)),e("div",Jt,[(s(!0),a(E,null,R(m.value,k=>(s(),a("button",{key:k,type:"button",onClick:K(S=>w(k),["stop","prevent"]),class:"p-2 text-2xl hover:bg-gray-100 dark:hover:bg-gray-800 rounded transition-colors"},d(k),9,Xt))),128))])])):u("",!0),e("div",Gt,[e("div",Qt,[(s(),a(E,null,R(L,k=>e("button",{key:k.name,type:"button",onClick:K(S=>n.value=k.name,["stop","prevent"]),class:x(["px-3 py-1.5 rounded text-sm font-medium transition-colors whitespace-nowrap",n.value===k.name?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800"])},d(k.label),11,Zt)),64))])]),e("div",Yt,[e("div",er,[(s(!0),a(E,null,R(B.value,k=>(s(),a("button",{key:k,type:"button",onClick:K(S=>w(k),["stop","prevent"]),class:"p-3 text-2xl hover:bg-gray-100 dark:hover:bg-gray-800 rounded transition-colors active:scale-95"},d(k),9,tr))),128))])])])]),_:1},8,["modelValue"])):u("",!0)]))}},rr={class:"space-y-4"},sr={class:"bg-gray-50 dark:bg-gray-800 rounded p-3"},ar={class:"flex items-center justify-between"},or={class:"text-xs md:text-sm font-medium text-gray-900 dark:text-gray-100"},lr={class:"flex items-center gap-1 md:gap-2"},dr=["onClick","onMouseenter"],nr={class:"ml-1 md:ml-2 text-sm md:text-lg font-medium text-gray-900 dark:text-gray-100"},ir={class:"block text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},ur={class:"text-xs text-gray-500 dark:text-gray-400 ml-1 md:ml-2"},cr={class:"mt-2 flex flex-wrap gap-1.5 md:gap-2"},mr=["onClick"],xr={class:"flex items-start md:items-center"},gr={__name:"ReviewModal",props:{modelValue:Boolean,orderId:{type:Number,required:!0},orderNo:{type:String,required:!0},vendorName:{type:String,required:!0},fiatAmount:{type:[Number,String],required:!0},fiatCurrency:{type:String,required:!0},cryptoAmount:{type:[Number,String],required:!0},cryptoCurrency:{type:String,required:!0}},emits:["update:modelValue","success"],setup(r,{emit:c}){const y=r,b=c,g=I({get:()=>y.modelValue,set:v=>b("update:modelValue",v)}),n=$(!1),m=$(5),C=$(0),L=$(""),B=$(!1),T=["äº¤æ˜“è¿…é€Ÿ","ä¿¡èª‰è‰¯å¥½","æ²Ÿé€šé¡ºç•…","ä»·æ ¼åˆç†","æœåŠ¡ä¸“ä¸š","æ€åº¦å‹å¥½","å€¼å¾—ä¿¡èµ–"],H=I(()=>["","éå¸¸å·®","è¾ƒå·®","ä¸€èˆ¬","æ»¡æ„","éå¸¸æ»¡æ„"][m.value]||""),f=I(()=>m.value>0),w=()=>{g.value=!1},F=v=>{L.value.includes(v)||(L.value.length>0?L.value+="ï¼Œ"+v:L.value=v)},j=async()=>{if(!f.value){ke.error("è¯·é€‰æ‹©è¯„åˆ†");return}n.value=!0;try{const v=await G.post(`/web/api/orders/${y.orderId}/review`,{rating:m.value,comment:L.value,is_anonymous:B.value});v.data.success&&(b("success",v.data.review),w())}catch(v){console.error("æäº¤è¯„ä»·å¤±è´¥:",v),ke.error(v.response?.data?.message||"æäº¤è¯„ä»·å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{n.value=!1}};return ye(g,v=>{v&&(m.value=5,L.value="",B.value=!1,C.value=0)}),(v,k)=>(s(),ne(se,{show:g.value,title:"è¯„ä»·äº¤æ˜“",subtitle:`è¯„ä»·${r.vendorName}`,"icon-color":"amber","confirm-text":"æäº¤è¯„ä»·","cancel-text":"å–æ¶ˆ",persistent:n.value,onConfirm:j,onClose:w},{default:z(()=>[e("div",rr,[e("div",sr,[e("div",ar,[k[3]||(k[3]=e("span",{class:"text-xs md:text-sm text-gray-500 dark:text-gray-400"},"è®¢å•ç¼–å·",-1)),e("span",or,d(r.orderNo),1)])]),e("div",null,[k[5]||(k[5]=e("label",{class:"block text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 md:mb-3"},[_(" æ‚¨çš„è¯„åˆ† "),e("span",{class:"text-red-500"},"*")],-1)),e("div",lr,[(s(),a(E,null,R(5,S=>e("button",{key:S,onClick:U=>m.value=S,onMouseenter:U=>C.value=S,onMouseleave:k[0]||(k[0]=U=>C.value=0),class:"focus:outline-none transition-transform hover:scale-110 cursor-pointer"},[(s(),a("svg",{class:x(["w-8 h-8 md:w-10 md:h-10 transition-colors",(C.value||m.value)>=S?"text-amber-500":"text-gray-300 dark:text-gray-600"]),fill:"currentColor",viewBox:"0 0 20 20"},[...k[4]||(k[4]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)])],2))],40,dr)),64)),e("span",nr,d(H.value),1)])]),e("div",null,[e("label",ir,[k[6]||(k[6]=_(" è¯„ä»·å†…å®¹ ",-1)),e("span",ur," ("+d(L.value.length)+"/500) ",1)]),N(e("textarea",{"onUpdate:modelValue":k[1]||(k[1]=S=>L.value=S),rows:"3",maxlength:"500",placeholder:"åˆ†äº«æ‚¨çš„äº¤æ˜“ä½“éªŒ...",class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none"},null,512),[[te,L.value]]),e("div",cr,[(s(),a(E,null,R(T,S=>e("button",{key:S,onClick:U=>F(S),class:"px-2 md:px-3 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors cursor-pointer"},d(S),9,mr)),64))])]),e("div",xr,[N(e("input",{id:"anonymous","onUpdate:modelValue":k[2]||(k[2]=S=>B.value=S),type:"checkbox",class:"w-4 h-4 mt-0.5 md:mt-0 text-emerald-600 bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 rounded focus:ring-emerald-500 focus:ring-2 cursor-pointer"},null,512),[[re,B.value]]),k[7]||(k[7]=e("label",{for:"anonymous",class:"ml-2 text-xs md:text-sm text-gray-700 dark:text-gray-300 cursor-pointer"},[_(" åŒ¿åè¯„ä»· "),e("span",{class:"text-xs text-gray-500 dark:text-gray-400 block md:inline"},"ï¼ˆå…¶ä»–ç”¨æˆ·å°†çœ‹ä¸åˆ°æ‚¨çš„èº«ä»½ä¿¡æ¯ï¼‰")],-1))]),k[8]||(k[8]=e("div",{class:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded p-2 md:p-3"},[e("div",{class:"flex items-start gap-1.5 md:gap-2"},[e("svg",{class:"w-4 h-4 md:w-5 md:h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),e("div",{class:"text-xs text-amber-800 dark:text-amber-200"},[e("p",null,"è¯„ä»·æäº¤åå°†æ— æ³•ä¿®æ”¹æˆ–åˆ é™¤ï¼Œè¯·æ…é‡è¯„ä»·ã€‚"),e("p",{class:"mt-0.5 md:mt-1"},"æ‚¨çš„è¯„ä»·å°†å¸®åŠ©å…¶ä»–ç”¨æˆ·æ›´å¥½åœ°äº†è§£å•†å®¶ã€‚")])])],-1))])]),_:1},8,["show","subtitle","persistent"]))}};class vr{constructor(c={}){this.defaultOptions={maxWidth:1920,maxHeight:1920,quality:.85,mimeType:"image/jpeg",maxSizeMB:2,...c}}async compressImage(c,y={}){const b={...this.defaultOptions,...y};if(!c.type.startsWith("image/")||c.size/1024/1024<=b.maxSizeMB&&!this.needsResize(c,b))return c;try{const n=await this.loadImage(c),m=this.resizeImage(n,b),C=await this.canvasToBlob(m,b);return C.size>=c.size?c:new File([C],c.name,{type:C.type,lastModified:Date.now()})}catch(n){return console.error("Image compression failed:",n),c}}async compressMultiple(c,y={}){const g=Array.from(c).map(n=>this.compressImage(n,y));return Promise.all(g)}loadImage(c){return new Promise((y,b)=>{const g=new FileReader;g.onload=n=>{const m=new Image;m.onload=()=>y(m),m.onerror=b,m.src=n.target.result},g.onerror=b,g.readAsDataURL(c)})}async needsResize(c,y){return new Promise(b=>{const g=new FileReader;g.onload=n=>{const m=new Image;m.onload=()=>{b(m.width>y.maxWidth||m.height>y.maxHeight)},m.onerror=()=>b(!1),m.src=n.target.result},g.onerror=()=>b(!1),g.readAsDataURL(c)})}resizeImage(c,y){const b=document.createElement("canvas"),g=b.getContext("2d");let{width:n,height:m}=this.calculateDimensions(c.width,c.height,y.maxWidth,y.maxHeight);return b.width=n,b.height=m,g.imageSmoothingEnabled=!0,g.imageSmoothingQuality="high",g.drawImage(c,0,0,n,m),b}calculateDimensions(c,y,b,g){if(c<=b&&y<=g)return{width:c,height:y};const n=c/y;let m=b,C=b/n;return C>g&&(C=g,m=g*n),{width:Math.round(m),height:Math.round(C)}}async canvasToBlob(c,y){let b=y.quality,g=await this.createBlob(c,y.mimeType,b);const n=y.maxSizeMB*1024*1024;for(;g.size>n&&b>.3;)b-=.1,g=await this.createBlob(c,y.mimeType,b);return g}createBlob(c,y,b){return new Promise(g=>{c.toBlob(n=>g(n),y,b)})}async getImageDimensions(c){return new Promise((y,b)=>{const g=new FileReader;g.onload=n=>{const m=new Image;m.onload=()=>{y({width:m.width,height:m.height})},m.onerror=b,m.src=n.target.result},g.onerror=b,g.readAsDataURL(c)})}estimateCompressedSize(c,y={}){const b={...this.defaultOptions,...y},g=c.size/1024/1024,n=b.quality*.7,m=Math.min(g*n,b.maxSizeMB);return m<1?`~${Math.round(m*1024)} KB`:`~${m.toFixed(1)} MB`}formatFileSize(c){return c<1024?c+" B":c<1024*1024?(c/1024).toFixed(1)+" KB":(c/(1024*1024)).toFixed(1)+" MB"}}const br=new vr,yr={class:"flex items-center gap-2 flex-1"},fr={class:"flex -space-x-2"},kr=["src","alt"],pr={class:"text-white text-xs font-bold"},hr={class:"flex-1 min-w-0"},wr={class:"text-sm font-semibold text-gray-900 dark:text-gray-100 truncate"},_r={class:"text-xs text-gray-500 dark:text-gray-400"},Cr={class:"lg:min-h-screen lg:bg-gray-50 lg:dark:bg-gray-950 h-screen lg:h-auto overflow-hidden lg:overflow-visible fixed lg:relative inset-0"},$r={key:0,class:"relative z-10 bg-red-50 dark:bg-red-900/20 border-b border-red-200 dark:border-red-800"},Mr={key:1,class:"relative z-10 bg-amber-50 dark:bg-amber-900/20 border-b border-amber-200 dark:border-amber-800"},zr={class:"max-w-7xl mx-auto px-4 py-3 sm:px-6 lg:px-8"},Br={class:"flex flex-col sm:flex-row sm:items-center gap-3"},jr={class:"flex items-start gap-3 flex-1"},Fr={class:"flex-1"},Ar={key:0,class:"text-xs text-amber-700 dark:text-amber-300 mt-2"},Sr={key:0,class:"sm:ml-auto"},Lr={key:2,class:"hidden md:block relative z-10 bg-blue-50 dark:bg-blue-900/20 border-b border-blue-200 dark:border-blue-800"},Vr={class:"max-w-7xl mx-auto px-4 py-3 sm:px-6 lg:px-8"},Er={class:"flex flex-col sm:flex-row sm:items-center gap-3"},Ir={class:"sm:ml-auto"},Pr={class:"p-4 space-y-4"},Tr={class:"space-y-4"},Ur={class:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800"},Dr={class:"flex items-center gap-2"},qr={class:"text-sm font-semibold text-blue-700 dark:text-blue-300"},Rr={class:"text-xs text-blue-600 dark:text-blue-400"},Hr={class:"space-y-3"},Wr={class:"flex gap-3"},Or={class:"flex-1 pb-3"},Nr={class:"text-xs text-gray-500 dark:text-gray-400"},Kr={key:0,class:"mt-2"},Jr={class:"flex gap-3"},Xr={class:"flex flex-col items-center"},Gr={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Qr={key:1,class:"text-white text-xs font-bold"},Zr={class:"flex-1 pb-3"},Yr={class:"text-xs text-gray-500 dark:text-gray-400"},es={class:"flex gap-3"},ts={class:"flex flex-col items-center"},rs={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ss={key:1,class:"text-white text-xs font-bold"},as={class:"flex-1 pb-3"},os={class:"text-xs text-gray-500 dark:text-gray-400"},ls={class:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded text-xs space-y-1"},ds={class:"space-y-0.5"},ns={class:"text-gray-600 dark:text-gray-400"},is={class:"font-mono text-blue-600 dark:text-blue-400 break-all"},us={class:"text-gray-600 dark:text-gray-400"},cs={class:"font-mono text-blue-600 dark:text-blue-400 break-all"},ms={class:"text-gray-600 dark:text-gray-400"},xs={class:"font-bold text-emerald-600 dark:text-emerald-400"},gs={key:0,class:"text-xs text-blue-600 dark:text-blue-400 font-mono break-all mt-1"},vs={key:0,class:"mt-2"},bs={class:"flex gap-3"},ys={class:"flex flex-col items-center"},fs={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ks={key:1,class:"text-white text-xs font-bold"},ps={class:"flex-1 pb-3"},hs={class:"text-xs text-gray-500 dark:text-gray-400"},ws={class:"flex gap-3"},_s={class:"flex flex-col items-center"},Cs={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},$s={key:1,class:"text-white text-xs font-bold"},Ms={class:"flex-1 pb-3"},zs={class:"text-xs text-gray-500 dark:text-gray-400"},Bs={key:0,class:"mt-2"},js={class:"flex gap-3"},Fs={class:"flex flex-col items-center"},As={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ss={key:1,class:"text-white text-xs font-bold"},Ls={class:"flex-1 pb-3"},Vs={class:"text-xs text-gray-500 dark:text-gray-400"},Es={key:0,class:"mt-2"},Is={class:"flex gap-3"},Ps={class:"flex flex-col items-center"},Ts={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Us={key:1,class:"text-white text-xs font-bold"},Ds={class:"flex-1 pb-3"},qs={class:"text-xs text-gray-500 dark:text-gray-400"},Rs={key:0,class:"mt-2"},Hs={class:"flex gap-3"},Ws={class:"flex flex-col items-center"},Os={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ns={key:1,class:"text-white text-xs font-bold"},Ks={class:"flex-1"},Js={class:"text-xs text-gray-500 dark:text-gray-400"},Xs={key:0,class:"text-xs text-blue-600 dark:text-blue-400 font-mono break-all mt-1"},Gs={class:"grid grid-cols-2 gap-3 text-sm"},Qs={class:"font-mono text-gray-900 dark:text-gray-200"},Zs={class:"font-medium text-gray-900 dark:text-gray-200"},Ys={class:"font-medium text-gray-900 dark:text-gray-200"},ea={class:"font-medium text-gray-900 dark:text-gray-200"},ta={class:"font-medium text-gray-900 dark:text-gray-200"},ra={class:"font-medium text-gray-900 dark:text-gray-200"},sa={class:"font-medium text-gray-900 dark:text-gray-200"},aa={key:0,class:"text-xs text-amber-600 dark:text-amber-400 mt-0.5"},oa={class:"font-medium text-gray-900 dark:text-gray-200"},la={class:"font-bold text-emerald-600 dark:text-emerald-400"},da={key:0,class:"mt-3 pt-3 border-t border-gray-100 dark:border-gray-800"},na={class:"font-mono text-sm text-gray-900 dark:text-gray-200 break-all"},ia={key:1,class:"mt-3 pt-3 border-t border-gray-100 dark:border-gray-800"},ua={class:"font-mono text-sm text-blue-600 dark:text-blue-400 break-all"},ca={class:"mx-auto max-w-7xl"},ma={class:"hidden md:grid md:grid-cols-3 gap-4 p-4"},xa={class:"md:col-span-1 space-y-4"},ga={class:"bg-white dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-800 p-6"},va={class:"flex items-center justify-between mb-4"},ba={class:"mb-6"},ya={class:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mb-2"},fa={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},ka={class:"space-y-4 mb-6"},pa={class:"flex items-center gap-3"},ha={class:"flex-1"},wa={class:"text-xs text-gray-500 dark:text-gray-400"},_a={class:"flex items-center gap-3"},Ca={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},$a={key:1,class:"text-white font-bold text-xs"},Ma={class:"flex-1"},za={key:0,class:"ml-11 mt-2"},Ba={class:"flex items-center gap-3"},ja={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Fa={key:1,class:"text-white font-bold text-xs"},Aa={class:"flex-1"},Sa={class:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded text-xs space-y-1"},La={class:"space-y-0.5"},Va={class:"text-gray-600 dark:text-gray-400"},Ea={class:"font-mono text-blue-600 dark:text-blue-400 break-all"},Ia={class:"text-gray-600 dark:text-gray-400"},Pa={class:"font-mono text-blue-600 dark:text-blue-400 break-all"},Ta={class:"text-gray-600 dark:text-gray-400"},Ua={class:"font-bold text-emerald-600 dark:text-emerald-400"},Da={key:0,class:"text-xs text-blue-600 dark:text-blue-400 font-mono break-all mt-1"},qa={key:0,class:"ml-11 mt-2"},Ra={class:"flex items-center gap-3"},Ha={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Wa={key:1,class:"text-white font-bold text-xs"},Oa={class:"flex-1"},Na={class:"flex items-center gap-3"},Ka={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ja={key:1,class:"text-white font-bold text-xs"},Xa={class:"flex-1"},Ga={key:0,class:"ml-11 mt-2"},Qa={class:"flex items-center gap-3"},Za={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ya={key:1,class:"text-white font-bold text-xs"},eo={class:"flex-1"},to={class:"text-xs text-gray-500 dark:text-gray-400"},ro={key:0,class:"ml-11 mt-2"},so={class:"flex items-center gap-3"},ao={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},oo={key:1,class:"text-white font-bold text-xs"},lo={class:"flex-1"},no={key:0,class:"ml-11 mt-2"},io={class:"flex items-center gap-3"},uo={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},co={key:1,class:"text-white font-bold text-xs"},mo={class:"flex-1"},xo={key:0,class:"text-xs text-blue-600 dark:text-blue-400 font-mono break-all mt-1"},go={class:"space-y-3 border-t border-gray-200 dark:border-gray-800 pt-4"},vo={class:"flex justify-between"},bo={class:"text-sm font-mono text-gray-900 dark:text-gray-200"},yo={class:"flex justify-between"},fo={class:"text-sm font-medium text-gray-900 dark:text-gray-200"},ko={class:"flex justify-between"},po={class:"text-sm font-medium text-gray-900 dark:text-gray-200"},ho={class:"flex justify-between"},wo={class:"text-sm font-medium text-gray-900 dark:text-gray-200"},_o={class:"flex justify-between"},Co={class:"text-sm font-medium text-gray-900 dark:text-gray-200"},$o={class:"flex justify-between"},Mo={class:"text-sm font-medium text-gray-900 dark:text-gray-200"},zo={key:0,class:"flex justify-between"},Bo={class:"text-sm text-amber-600 dark:text-amber-400"},jo={class:"flex justify-between"},Fo={class:"text-sm font-medium text-gray-900 dark:text-gray-200"},Ao={class:"flex justify-between"},So={class:"text-lg font-bold text-emerald-600 dark:text-emerald-400"},Lo={key:1,class:"flex justify-between items-start pt-3 border-t border-gray-100 dark:border-gray-800"},Vo={class:"text-sm font-medium text-gray-900 dark:text-gray-200 text-right break-all max-w-[180px]"},Eo={key:2,class:"flex justify-between items-start pt-3 border-t border-gray-100 dark:border-gray-800"},Io={class:"text-sm font-medium text-blue-600 dark:text-blue-400 text-right break-all max-w-[180px]"},Po={class:"md:col-span-2"},To={class:"bg-white dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-800 flex flex-col",style:{height:"650px","min-height":"600px"}},Uo={class:"border-b border-gray-200 dark:border-gray-800"},Do={class:"px-6 py-4"},qo={class:"flex items-center justify-between"},Ro={class:"flex items-center gap-3"},Ho={class:"flex -space-x-2"},Wo=["href"],Oo=["src","alt"],No={key:1,class:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center ring-2 ring-white dark:ring-gray-900"},Ko={class:"text-white font-bold"},Jo={key:2,class:"absolute -bottom-0.5 -right-0.5 h-2.5 w-2.5 bg-emerald-500 rounded-full ring-2 ring-white dark:ring-gray-900"},Xo={class:"flex-1"},Go={class:"flex items-center gap-2"},Qo={class:"font-semibold text-gray-900 dark:text-gray-100"},Zo={class:"text-xs text-gray-500 dark:text-gray-400 ml-2"},Yo={class:"text-xs text-gray-500 dark:text-gray-400"},el={key:0,class:"text-gray-400"},tl={class:"flex flex-col items-center gap-1"},rl={class:"text-xs text-gray-400 dark:text-gray-500"},sl={key:0,class:"mb-4 mx-4"},al={class:"bg-blue-50 dark:bg-blue-900/20 rounded p-3 border border-blue-200 dark:border-blue-800"},ol={class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap"},ll={key:0,class:"mt-2 pt-2 border-t border-blue-200 dark:border-blue-700"},dl={class:"flex items-center gap-2"},nl={class:"text-xs text-gray-600 dark:text-gray-400"},il={class:"font-medium text-blue-600 dark:text-blue-400"},ul={key:1,class:"mb-4 mx-4"},cl={class:"bg-blue-50 dark:bg-blue-900/20 rounded p-3 border border-blue-200 dark:border-blue-800"},ml={class:"flex items-center gap-2"},xl={class:"text-xs text-gray-600 dark:text-gray-400"},gl={class:"font-medium text-blue-600 dark:text-blue-400"},vl={key:0,class:"flex flex-col items-center gap-1"},bl={class:"text-xs text-gray-400 dark:text-gray-500"},yl={key:0},fl={key:0},kl={key:0,class:"mt-3 p-3 bg-amber-50 dark:bg-amber-900/20 rounded border border-amber-200 dark:border-amber-800 max-w-sm"},pl={class:"flex flex-col items-center gap-2"},hl={key:1,class:"mt-3 p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded border border-emerald-200 dark:border-emerald-800 max-w-sm"},wl=["href"],_l=["src","alt"],Cl={key:1,class:"h-8 w-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center"},$l={class:"text-white text-sm font-bold"},Ml={class:"max-w-lg"},zl={class:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1 px-1"},Bl={key:0,class:"text-purple-600 dark:text-purple-400 font-bold"},jl={class:"inline-block bg-gray-100 dark:bg-gray-800 rounded rounded-tl-none px-4 py-3"},Fl={key:0,class:"mb-2"},Al={key:1,class:"text-sm text-gray-900 dark:text-gray-200 break-words"},Sl={class:"text-xs text-gray-400 dark:text-gray-500 mt-1 px-1"},Ll={class:"max-w-lg"},Vl={class:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1 px-1 text-right"},El={key:0,class:"text-purple-600 dark:text-purple-400 font-bold"},Il={class:"inline-block bg-emerald-600 text-white rounded rounded-tr-none px-4 py-3"},Pl={key:0,class:"mb-2"},Tl={key:1,class:"text-sm break-words"},Ul={class:"text-xs text-gray-400 dark:text-gray-500 mt-1 px-1 text-right"},Dl=["src","alt"],ql={key:1,class:"h-8 w-8 rounded-full bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center flex-shrink-0"},Rl={class:"text-white text-sm font-bold"},Hl={class:"border-t border-gray-200 dark:border-gray-800 p-4"},Wl={key:0,class:"mb-3 p-3 bg-gray-50 dark:bg-gray-800 rounded"},Ol={key:0,class:"flex items-center gap-3"},Nl={key:1,class:"flex items-start gap-3"},Kl=["src","alt"],Jl={key:1,class:"w-16 h-20 bg-red-100 dark:bg-red-900/30 rounded flex items-center justify-center"},Xl={class:"flex-1"},Gl={class:"text-sm font-medium text-gray-900 dark:text-gray-200"},Ql={class:"text-xs text-gray-500 dark:text-gray-400"},Zl=["disabled"],Yl=["placeholder","disabled"],ed=["disabled"],td={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},rd={key:1},sd={key:1,class:"flex mt-3 items-center justify-between"},ad={class:"flex gap-2 items-center"},od={key:0,class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ld={key:1,class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24"},dd={class:"mt-3 p-2 bg-gray-50 dark:bg-gray-800/50 rounded border border-gray-200 dark:border-gray-700"},nd={class:"flex items-center justify-between"},id={class:"flex items-center gap-2"},ud={class:"text-xs font-medium text-gray-700 dark:text-gray-300"},cd={class:"flex items-center gap-3 text-xs text-gray-500 dark:text-gray-400"},md={class:"text-emerald-600 dark:text-emerald-400 font-medium"},xd={class:"space-y-4 mt-3"},gd={key:0,class:"bg-white dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-800 p-4"},vd={class:"p-3 bg-gray-50 dark:bg-gray-800/50 rounded max-h-40 overflow-y-auto"},bd={class:"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap"},yd={class:"md:hidden fixed inset-x-0 bottom-0 flex flex-col bg-white dark:bg-gray-950",style:"top: calc(3.5rem + env(safe-area-inset-top))"},fd={key:0,class:"sticky top-0 z-10 bg-amber-50 dark:bg-amber-900/20 border-b border-amber-200 dark:border-amber-800 p-2"},kd={class:"p-4 space-y-4"},pd={class:"flex flex-col items-center gap-1"},hd={class:"text-xs text-gray-400 dark:text-gray-500"},wd={key:0,class:"mb-4 mx-4"},_d={class:"bg-blue-50 dark:bg-blue-900/20 rounded p-3 border border-blue-200 dark:border-blue-800"},Cd={class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap"},$d={key:0,class:"mt-2 pt-2 border-t border-blue-200 dark:border-blue-700"},Md={class:"flex items-center gap-2"},zd={class:"text-xs text-gray-600 dark:text-gray-400"},Bd={class:"font-medium text-blue-600 dark:text-blue-400"},jd={key:1,class:"mb-4 mx-4"},Fd={class:"bg-blue-50 dark:bg-blue-900/20 rounded p-3 border border-blue-200 dark:border-blue-800"},Ad={class:"flex items-center gap-2"},Sd={class:"text-xs text-gray-600 dark:text-gray-400"},Ld={class:"font-medium text-blue-600 dark:text-blue-400"},Vd={key:0,class:"flex flex-col items-center gap-1"},Ed={class:"text-xs text-gray-400 dark:text-gray-500"},Id={key:0},Pd={key:0},Td={key:0,class:"mt-3 p-3 bg-amber-50 dark:bg-amber-900/20 rounded border border-amber-200 dark:border-amber-800 max-w-sm"},Ud={class:"flex flex-col items-center gap-2"},Dd={key:1,class:"mt-3 p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded border border-emerald-200 dark:border-emerald-800 max-w-sm"},qd=["href"],Rd=["src","alt"],Hd={key:1,class:"h-7 w-7 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center"},Wd={class:"text-white text-xs font-bold"},Od={class:"max-w-[85%]"},Nd={class:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-0.5 px-1"},Kd={key:0,class:"text-purple-600 dark:text-purple-400 font-bold"},Jd={class:"inline-block bg-gray-100 dark:bg-gray-800 rounded rounded-tl-none px-3 py-2"},Xd={key:0,class:"mb-2"},Gd={key:1,class:"text-sm text-gray-900 dark:text-gray-200 break-words"},Qd={class:"text-xs text-gray-400 dark:text-gray-500 mt-1 px-1"},Zd={class:"max-w-[85%]"},Yd={class:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-0.5 px-1 text-right"},en={key:0,class:"text-purple-600 dark:text-purple-400 font-bold"},tn={class:"inline-block bg-emerald-600 text-white rounded rounded-tr-none px-3 py-2"},rn={key:0,class:"mb-2"},sn={key:1,class:"text-sm break-words"},an={class:"text-xs text-gray-400 dark:text-gray-500 mt-1 px-1 text-right"},on=["src","alt"],ln={key:1,class:"h-7 w-7 rounded-full bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center flex-shrink-0"},dn={class:"text-white text-xs font-bold"},nn={class:"bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800 pb-safe"},un={class:"p-3"},cn={key:0,class:"mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded"},mn={key:0,class:"flex items-center gap-3"},xn={key:1,class:"flex items-center gap-3"},gn={class:"flex-shrink-0"},vn=["src"],bn={key:1,class:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded flex items-center justify-center"},yn={class:"flex-1 min-w-0"},fn={class:"text-sm font-medium text-gray-900 dark:text-gray-200 truncate"},kn={class:"text-xs text-gray-500 dark:text-gray-400"},pn={class:"flex items-center"},hn=["disabled"],wn=["placeholder","disabled"],_n=["disabled"],Cn={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},$n={key:1},Mn={key:1,class:"flex mt-2 justify-between items-center"},zn={class:"flex gap-2 overflow-x-auto pb-1"},Bn=["title"],jn={class:"flex items-center justify-between"},Fn={class:"flex items-center gap-2"},An={class:"text-xs font-medium text-gray-700 dark:text-gray-300"},Sn={class:"flex items-center gap-2"},Ln={class:"text-xs text-gray-500 dark:text-gray-400"},Vn={key:0,class:"text-gray-700 dark:text-gray-300"},En={key:1,class:"mt-4"},In={key:0,class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Pn=["placeholder","required"],Tn={class:"space-y-3"},Un={class:"p-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded"},Dn={class:"space-y-2"},qn={key:0},Rn={class:"font-mono text-xs text-gray-900 dark:text-gray-100 break-all mt-1"},Hn={class:"font-mono text-xs text-gray-900 dark:text-gray-100 break-all mt-1"},Wn={class:"text-lg font-bold text-emerald-600 dark:text-emerald-400"},On={key:1},Nn={class:"font-mono text-xs text-blue-600 dark:text-blue-400 break-all mt-1"},Kn={class:"space-y-2"},Jn={class:"space-y-2"},Xn={class:"flex items-start"},Gn=["disabled"],Qn={class:"flex items-start"},Zn=["disabled"],Yn={class:"flex items-start"},ei=["disabled"],ti={class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},ri={class:"block font-mono text-xs text-blue-600 dark:text-blue-400 break-all mt-1"},si={class:"flex items-start"},ai=["disabled"],oi={class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},li={class:"block font-mono text-xs text-blue-600 dark:text-blue-400 break-all mt-1"},di={class:"flex items-start"},ni=["disabled"],ii={class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},ui={class:"font-bold text-emerald-600 dark:text-emerald-400"},ci={class:"space-y-3"},mi=["disabled"],xi={key:0,class:"p-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded"},gi={class:"space-y-2"},vi={class:"font-mono text-xs text-gray-900 dark:text-gray-100 break-all mt-1"},bi={class:"font-mono text-xs text-blue-600 dark:text-blue-400 break-all mt-1"},yi={class:"text-lg font-bold text-emerald-600 dark:text-emerald-400"},fi={class:"space-y-3"},ki=["disabled"],pi={key:0},hi={key:1,class:"p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded"},wi={key:2,class:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded"},_i={class:"space-y-3"},Ci={key:0},$i={key:1,class:"p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded"},Mi={key:2,class:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded"},zi={class:"p-4"},Bi={key:0,class:"bg-gray-50 dark:bg-gray-800/50 rounded p-4 max-h-80 overflow-y-auto"},ji={class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap"},Fi={key:1,class:"bg-gray-50 dark:bg-gray-800/50 rounded p-4"},Pi={__name:"Chat",props:{userHas2FA:{type:Boolean,default:!1},order:{type:Object,required:!0},otherUser:{type:Object,default:null},messages:{type:Array,default:()=>[]},currentUserId:{type:Number,required:!0},userRole:{type:String,required:!0},availableActions:{type:Array,default:()=>[]}},setup(r){Ze();const c=r,y=$(!1),b=$(!1),g=$(!1),n=$({...c.order}),m=$(c.messages),C=$(""),L=$(null),B=$(null),T=$(null),H=$(null),f=$(null),w=$(!1),F=$(!1),j=$(null),v=$(!1),k=$(!0);let S=null,U=null,X=null;const Q=$(!1),V=$([]),h=$([]),he=()=>{const l=[];n.value.vendor&&l.push({id:n.value.vendor.id,name:n.value.vendor.name,role:"å•†å®¶",avatar:n.value.vendor.avatar,profile_photo_url:n.value.vendor.avatar,is_self:n.value.vendor.id===c.currentUserId,is_online:n.value.vendor.id===c.currentUserId,is_admin:!1}),n.value.client&&l.push({id:n.value.client.id,name:n.value.client.name,role:"å®¢æˆ·",avatar:n.value.client.avatar,profile_photo_url:n.value.client.avatar,is_self:n.value.client.id===c.currentUserId,is_online:n.value.client.id===c.currentUserId,is_admin:!1}),h.value=l},i=$({show:!1,title:"",message:"",inputMode:!1,inputValue:"",inputLabel:"",inputPlaceholder:"",inputRequired:!1,danger:!1,confirmVariant:"primary",confirmText:"ç¡®è®¤",cancelText:"å–æ¶ˆ",loading:!1,pendingAction:null,pendingData:{},require2FA:!1,twoFactorCode:"",twoFactorError:""}),Z=$(""),Y=$(""),D=$({txExists:!1,confirmations:!1,fromAddress:!1,toAddress:!1,amount:!1}),we=I(()=>D.value.txExists&&D.value.confirmations&&D.value.fromAddress&&D.value.toAddress&&D.value.amount),J=I(()=>n.value.status==="completed"||n.value.status==="cancelled"||n.value.escrow_status==="escrow_released"),ie=$({orderId:n.value.order_no,type:c.userRole==="buyer"?"buy":"sell",cryptocurrency:n.value.currency_key||n.value.crypto_currency,amount:n.value.crypto_amount,price:n.value.price,total:n.value.fiat_amount,status:n.value.escrow_status,progress:ue(n.value.escrow_status),timeRemaining:765});function ue(l){return{order_initiated:12.5,vendor_confirmed:25,seller_paid:37.5,escrow_received:50,buyer_confirmed_escrow:62.5,buyer_paid:75,seller_received:87.5,escrow_released:100}[l]||0}function Re(l){return{order_initiated:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400",vendor_confirmed:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",seller_paid:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400",escrow_received:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400",buyer_paid:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400",seller_received:"bg-teal-100 dark:bg-teal-900/30 text-teal-700 dark:text-teal-400",escrow_released:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400"}[l]||"bg-gray-100 dark:bg-gray-900/30 text-gray-700 dark:text-gray-400"}function Fe(l){return{order_initiated:"ç­‰å¾…ç¡®è®¤",vendor_confirmed:"ç­‰å¾…è½¬å¸",seller_paid:"æ‰˜ç®¡ç¡®è®¤ä¸­",escrow_received:"æ‰˜ç®¡ä¿æŠ¤ä¸­",buyer_paid:"ç­‰å¾…æ”¶æ¬¾ç¡®è®¤",seller_received:"é‡Šæ”¾ä¸­",escrow_released:"å·²å®Œæˆ"}[l]||"å¤„ç†ä¸­"}function Ae(l){return{order_initiated:"ç­‰å¾…å•†å®¶ç¡®è®¤",vendor_confirmed:"ç­‰å¾…å–å®¶è½¬å¸",seller_paid:"ç­‰å¾…æ‰˜ç®¡ç¡®è®¤",escrow_received:"æ‰˜ç®¡ä¿æŠ¤ä¸­",buyer_confirmed_escrow:"ç­‰å¾…ä¹°å®¶ä»˜æ¬¾",buyer_paid:"ç­‰å¾…å–å®¶ç¡®è®¤æ”¶æ¬¾",seller_received:"å‡†å¤‡é‡Šæ”¾æ‰˜ç®¡",escrow_released:"äº¤æ˜“å®Œæˆ"}[l]||"å¤„ç†ä¸­"}function Se(l){return{order_initiated:"bg-amber-500",vendor_confirmed:"bg-amber-500",seller_paid:"bg-blue-500",escrow_received:"bg-blue-500",buyer_confirmed_escrow:"bg-blue-500",buyer_paid:"bg-blue-500",seller_received:"bg-emerald-500",escrow_released:"bg-emerald-500"}[l]||"bg-gray-500"}const He=$("12:45");let ce=null;const We=()=>{ce=setInterval(()=>{if(ie.value.timeRemaining>0){ie.value.timeRemaining--;const l=Math.floor(ie.value.timeRemaining/60),t=ie.value.timeRemaining%60;He.value=`${l}:${t.toString().padStart(2,"0")}`}else clearInterval(ce)},1e3)},ee=()=>{ae(()=>{const l=()=>{L.value&&(L.value.scrollTop=L.value.scrollHeight),j.value&&(j.value.scrollTop=j.value.scrollHeight)};l();const t=L.value||j.value;if(t){const o=t.querySelectorAll("img");if(o.length>0){let p=0;o.forEach(q=>{q.complete?p++:(q.addEventListener("load",()=>{l()},{once:!0}),q.addEventListener("error",()=>{l()},{once:!0}))}),p===o.length&&setTimeout(l,100)}}})},P=l=>new Date(l).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),Oe=l=>{n.value.has_review=!0,n.value.review=l,n.value.status="completed",b.value=!1},Le=l=>{if(l===0)return"0 Bytes";const t=1024,o=["Bytes","KB","MB","GB"],p=Math.floor(Math.log(l)/Math.log(t));return Math.round(l/Math.pow(t,p)*100)/100+" "+o[p]},Ve=async l=>{const t=l.target.files[0];if(!t)return;const o=2*1024*1024;let p=t;if(t.type.startsWith("image/")){F.value=!0;try{const q=(t.size/1024/1024).toFixed(2);console.log(`åŸå§‹å›¾ç‰‡å¤§å°: ${q} MB`),p=await br.compressImage(t,{maxWidth:1920,maxHeight:1920,maxSizeMB:2,quality:.85});const $e=(p.size/1024/1024).toFixed(2);if(console.log(`å‹ç¼©åå›¾ç‰‡å¤§å°: ${$e} MB`),p.size<t.size*.8){const Me=Math.round((1-p.size/t.size)*100);console.log(`å›¾ç‰‡å·²å‹ç¼© ${Me}%`)}}catch(q){console.error("å›¾ç‰‡å‹ç¼©å¤±è´¥:",q),p=t}finally{F.value=!1}}if(p.size>o){alert(`æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡ ${o/1024/1024}MBï¼Œå½“å‰æ–‡ä»¶å¤§å°ä¸º ${(p.size/1024/1024).toFixed(2)}MB`),l.target.value="";return}B.value=p,p.type.startsWith("image/")&&(T.value=URL.createObjectURL(p))},_e=()=>{B.value=null,T.value&&(URL.revokeObjectURL(T.value),T.value=null),H.value&&(H.value.value=""),f.value&&(f.value.value="")},Ee=async()=>{if(!C.value.trim()&&!B.value||!v.value||w.value)return;const l=C.value,t=B.value;C.value="",w.value=!0;try{let o=null;if(t){const ge=new FormData;ge.append("file",t);const Te=await G.post(`/web/api/orders/${n.value.order_no}/chat/upload`,ge,{headers:{"Content-Type":"multipart/form-data"}});Te.data.success&&(o=Te.data.file)}const p=n.value.vendor_id===c.currentUserId?n.value.client_id:n.value.vendor_id,q=h.value.find(ge=>ge.id===p),$e=q?q.is_online:!1,Me=await G.post(`/web/api/orders/${n.value.order_no}/chat/send`,{message:l,attachment:o,recipient_online:$e});m.value.push(Me.data),_e(),ae(()=>{ee()})}catch(o){console.error("å‘é€æ¶ˆæ¯å¤±è´¥:",o),C.value=l,alert("å‘é€å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{w.value=!1}},A=l=>{console.log("handleEscrowAction called with:",l);const t={vendor_confirm:{title:"ç¡®è®¤æ¥å•",message:"ç¡®è®¤æ¥å—æ­¤è®¢å•å—ï¼Ÿæ¥å•åéœ€è¦ç­‰å¾…å–å®¶è½¬å¸åˆ°æ‰˜ç®¡ã€‚",confirmVariant:"primary",confirmText:"ç¡®è®¤æ¥å•"},mark_seller_paid:{title:"æ ‡è®°å·²è½¬å¸",message:"è¯·ç¡®è®¤æ‚¨å·²å°†å¸è½¬å…¥æ‰˜ç®¡åœ°å€ï¼Œå¹¶æä¾›äº¤æ˜“å“ˆå¸Œä½œä¸ºå‡­è¯",inputMode:!0,inputLabel:"äº¤æ˜“å“ˆå¸Œ (TX ID)",inputPlaceholder:"è¯·è¾“å…¥åŒºå—é“¾äº¤æ˜“å“ˆå¸Œ...",inputRequired:!0,confirmVariant:"primary",confirmText:"ç¡®è®¤å·²è½¬å¸"},confirm_escrow:{},mark_buyer_paid:{title:"æ ‡è®°å·²ä»˜æ¬¾",message:"è¯·ç¡®è®¤æ‚¨å·²å‘å–å®¶ä»˜æ¬¾",inputMode:!0,inputLabel:"ä»˜æ¬¾è¯´æ˜ï¼ˆå¯é€‰ï¼‰",inputPlaceholder:"è¯·è¾“å…¥ä»˜æ¬¾å‡­è¯æˆ–è¯´æ˜...",inputRequired:!1,confirmVariant:"primary",confirmText:"ç¡®è®¤å·²ä»˜æ¬¾",require2FA:!0},mark_seller_received:{title:"ç¡®è®¤æ”¶æ¬¾",message:"è¯·ç¡®è®¤æ‚¨å·²æ”¶åˆ°ä¹°å®¶çš„ä»˜æ¬¾ã€‚ç¡®è®¤åï¼Œæ‰˜ç®¡çš„å¸å°†é‡Šæ”¾ç»™ä¹°å®¶ã€‚",confirmVariant:"success",confirmText:"ç¡®è®¤å·²æ”¶æ¬¾",require2FA:!0},cancel:{},create_dispute:{title:"å‘èµ·äº‰è®®",message:"å‘èµ·äº‰è®®åï¼Œè®¢å•å°†è¢«å†»ç»“ï¼Œæš‚åœæ‰€æœ‰äº¤æ˜“æ“ä½œï¼Œç­‰å¾…å¹³å°å®¢æœä»‹å…¥å¤„ç†ã€‚è¯·è¯¦ç»†è¯´æ˜é—®é¢˜ã€‚",inputMode:!0,inputLabel:"äº‰è®®åŸå› ",inputPlaceholder:"è¯·è¯¦ç»†æè¿°æ‚¨é‡åˆ°çš„é—®é¢˜...",inputRequired:!0,confirmVariant:"warning",confirmText:"ç¡®è®¤å‘èµ·äº‰è®®"},resolve_dispute:{title:"è§£é™¤äº‰è®®",message:"ç¡®å®šè¦è§£é™¤äº‰è®®å—ï¼Ÿè§£é™¤åè®¢å•å°†æ¢å¤æ­£å¸¸ï¼Œå¯ä»¥ç»§ç»­è¿›è¡Œäº¤æ˜“ã€‚",inputMode:!0,inputLabel:"è§£é™¤åŸå› ï¼ˆå¯é€‰ï¼‰",inputPlaceholder:"è¯·è¾“å…¥è§£é™¤äº‰è®®çš„åŸå› ...",inputRequired:!1,confirmVariant:"success",confirmText:"ç¡®è®¤è§£é™¤"}};if(l==="cancel"){const p=n.value.escrow_status;let q={title:"å–æ¶ˆè®¢å•",inputMode:!0,inputLabel:"å–æ¶ˆåŸå› ",inputPlaceholder:"è¯·è¾“å…¥å–æ¶ˆåŸå› ...",inputRequired:!0,danger:!0,confirmVariant:"danger",confirmText:"ç¡®è®¤å–æ¶ˆ"};["seller_paid","escrow_received","buyer_confirmed_escrow"].includes(p)?q.message=`âš ï¸ è­¦å‘Šï¼šå½“å‰å·²è¿›å…¥æ‰˜ç®¡é˜¶æ®µï¼Œå–æ¶ˆè®¢å•å°†æ‰£é™¤æ‚¨çš„ä¿¡èª‰åˆ† -1

ç¡®å®šè¦å–æ¶ˆæ­¤è®¢å•å—ï¼Ÿ`:q.message="ç¡®å®šè¦å–æ¶ˆæ­¤è®¢å•å—ï¼Ÿ",t[l]=q}const o=t[l];!o&&l!=="confirm_escrow"||(Object.assign(i.value,{show:!0,...o||{},cancelText:"è¿”å›",pendingAction:l,pendingData:{},loading:!1}),console.log("dialogState after setting:",i.value))},Ne=async l=>{const t=i.value.pendingAction;if(t)try{let o="",p={};switch(t){case"vendor_confirm":o=`/web/api/orders/${n.value.id}/vendor-confirm`;break;case"mark_seller_paid":if(o=`/web/api/orders/${n.value.id}/seller-paid`,!l||!l.trim()){i.value.loading=!1,i.value.show=!1;return}p.tx_hash=l.trim();break;case"confirm_escrow":o=`/web/api/orders/${n.value.id}/buyer-confirm-escrow`;break;case"mark_buyer_paid":o=`/web/api/orders/${n.value.id}/buyer-paid`,l&&(p.payment_proof=l),i.value.require2FA&&i.value.twoFactorCode&&(p.two_factor_code=i.value.twoFactorCode);break;case"mark_seller_received":o=`/web/api/orders/${n.value.id}/seller-received`,i.value.require2FA&&i.value.twoFactorCode&&(p.two_factor_code=i.value.twoFactorCode);break;case"cancel":o=`/web/api/orders/${n.value.id}/cancel`,p.reason=l;break;case"create_dispute":o=`/web/api/orders/${n.value.id}/dispute`,p.reason=l;break;case"resolve_dispute":o=`/web/api/orders/${n.value.id}/resolve-dispute`,l&&(p.reason=l);break}i.value.loading=!0,(await G.post(o,p)).data.success&&(i.value.show=!1,W.reload())}catch(o){console.error("æ“ä½œå¤±è´¥:",o),i.value.loading=!1,i.value.show=!1}},oe=()=>{i.value={show:!1,title:"",message:"",inputMode:!1,inputValue:"",inputLabel:"",inputPlaceholder:"",inputRequired:!1,danger:!1,confirmVariant:"primary",confirmText:"ç¡®è®¤",cancelText:"å–æ¶ˆ",loading:!1,pendingAction:null,pendingData:{},require2FA:!1,twoFactorCode:"",twoFactorError:""},Z.value="",Y.value="",D.value={txExists:!1,confirmations:!1,fromAddress:!1,toAddress:!1,amount:!1}},Ie=l=>{i.value.twoFactorCode=l,i.value.twoFactorError=""},Ke=async()=>{if(!c.userHas2FA){alert("ä¹°å®¶ä»˜æ¬¾å¿…é¡»å¯ç”¨åŒé‡éªŒè¯"),W.visit("/user/profile#tab-2fa");return}if(!i.value.twoFactorCode||i.value.twoFactorCode.length!==6){i.value.twoFactorError="è¯·è¾“å…¥6ä½éªŒè¯ç ";return}i.value.loading=!0,i.value.twoFactorError="";try{const l={two_factor_code:i.value.twoFactorCode};Z.value&&Z.value.trim()&&(l.payment_proof=Z.value.trim()),(await G.post(`/web/api/orders/${n.value.id}/buyer-paid`,l)).data.success&&(i.value.show=!1,Z.value="",i.value.twoFactorCode="",i.value.twoFactorError="",W.reload())}catch(l){i.value.loading=!1,l.response?.data?.errors?.two_factor_code?i.value.twoFactorError=l.response.data.errors.two_factor_code[0]:l.response?.data?.message?l.response.data.require_2fa?(i.value.show=!1,alert("ä¸ºäº†æ‚¨çš„èµ„é‡‘å®‰å…¨ï¼Œè¯·å…ˆåœ¨ä¸ªäººè®¾ç½®ä¸­å¯ç”¨åŒé‡éªŒè¯"),W.visit("/user/profile#tab-2fa")):i.value.twoFactorError=l.response.data.message:i.value.twoFactorError="éªŒè¯å¤±è´¥ï¼Œè¯·é‡è¯•"}},Je=async()=>{if(!we.value){ke.error("è¯·ç¡®è®¤æ‰€æœ‰æ£€æŸ¥é¡¹");return}i.value.loading=!0;try{(await G.post(`/web/api/orders/${n.value.id}/buyer-confirm-escrow`)).data.success&&(i.value.show=!1,D.value={txExists:!1,confirmations:!1,fromAddress:!1,toAddress:!1,amount:!1},W.reload())}catch(l){i.value.loading=!1,console.error("ç¡®è®¤æ‰˜ç®¡å¤±è´¥:",l)}},Xe=async()=>{if(!Y.value||!Y.value.trim()){ke.error("è¯·è¾“å…¥äº¤æ˜“å“ˆå¸Œ");return}i.value.loading=!0;try{(await G.post(`/web/api/orders/${n.value.id}/seller-paid`,{tx_hash:Y.value.trim()})).data.success&&(i.value.show=!1,Y.value="",W.reload())}catch(l){i.value.loading=!1,console.error("æ ‡è®°è½¬å¸å¤±è´¥:",l)}},Ge=async()=>{if(!c.userHas2FA){alert("å–å®¶ç¡®è®¤æ”¶æ¬¾å¿…é¡»å¯ç”¨åŒé‡éªŒè¯"),W.visit("/user/profile#tab-2fa");return}if(!i.value.twoFactorCode||i.value.twoFactorCode.length!==6){i.value.twoFactorError="è¯·è¾“å…¥6ä½éªŒè¯ç ";return}i.value.loading=!0,i.value.twoFactorError="";try{const l={two_factor_code:i.value.twoFactorCode};(await G.post(`/web/api/orders/${n.value.id}/seller-received`,l)).data.success&&(i.value.show=!1,i.value.twoFactorCode="",i.value.twoFactorError="",W.reload())}catch(l){i.value.loading=!1,l.response?.data?.errors?.two_factor_code?i.value.twoFactorError=l.response.data.errors.two_factor_code[0]:l.response?.data?.message?l.response.data.require_2fa?(i.value.show=!1,alert("ä¸ºäº†æ‚¨çš„èµ„é‡‘å®‰å…¨ï¼Œè¯·å…ˆåœ¨ä¸ªäººè®¾ç½®ä¸­å¯ç”¨åŒé‡éªŒè¯"),W.visit("/user/profile#tab-2fa")):i.value.twoFactorError=l.response.data.message:i.value.twoFactorError="éªŒè¯å¤±è´¥ï¼Œè¯·é‡è¯•"}},Ce=()=>{console.log("[WebSocket] æ–­å¼€è¿æ¥"),U&&(U.stopListening(".MessageSent"),U.stopListening(".EscrowStatusUpdated"),U.stopListening(".OrderStatusUpdated"),U.stopListening(".dispute.resolved"),S.leave(`order.${n.value.id}`),U=null),v.value=!1},le=()=>{typeof window.Echo<"u"&&!U?(S=window.Echo,console.log("[WebSocket] å»ºç«‹è¿æ¥"),U=S.join(`order.${n.value.id}`).here(l=>{console.log("å½“å‰åœ¨çº¿ç”¨æˆ·:",l),V.value=l,h.value.forEach(t=>{t.is_online=l.some(o=>o.id===t.id)}),l.forEach(t=>{[3].includes(t.id)&&(h.value.find(q=>q.id===t.id)||h.value.push({id:t.id,name:t.name,role:"ä»²è£å‘˜",avatar:null,is_self:t.id===c.currentUserId,is_online:!0,is_admin:!0}))}),Q.value=l.some(t=>t.id===c.otherUser?.id)}).joining(l=>{if(console.log("ç”¨æˆ·åŠ å…¥:",l),V.value.push(l),l.id!==c.currentUserId){const o=new Date;m.value.push({id:`join-${l.id}-${Date.now()}`,type:"system",content:`${l.name} åŠ å…¥äº†èŠå¤©`,created_at:o.toISOString(),is_temporary:!0}),ae(()=>ee())}const t=h.value.find(o=>o.id===l.id);t?t.is_online=!0:[3].includes(l.id)&&h.value.push({id:l.id,name:l.name,role:"ä»²è£å‘˜",avatar:null,is_self:l.id===c.currentUserId,is_online:!0,is_admin:!0}),l.id===c.otherUser?.id&&(Q.value=!0)}).leaving(l=>{if(console.log("ç”¨æˆ·ç¦»å¼€:",l),V.value=V.value.filter(o=>o.id!==l.id),l.id!==c.currentUserId){const o=new Date;m.value.push({id:`leave-${l.id}-${Date.now()}`,type:"system",content:`${l.name} ç¦»å¼€äº†èŠå¤©`,created_at:o.toISOString(),is_temporary:!0}),ae(()=>ee())}const t=h.value.find(o=>o.id===l.id);t&&(t.is_online=!1),l.id===c.otherUser?.id&&(Q.value=!1)}).error(l=>{console.error("Presence channel error:",l)}).listen("MessageSent",l=>{if(l.type==="admin"&&l.user){const t=h.value.find(o=>o.id===l.user.id);t?t&&!t.is_admin&&(t.role="ä»²è£å‘˜",t.is_admin=!0,t.is_online=!0):h.value.push({id:l.user.id,name:l.user.name,role:"ä»²è£å‘˜",avatar:null,is_self:l.user.id===c.currentUserId,is_online:!0,is_admin:!0})}(l.type==="system"||!l.user||l.user.id!==c.currentUserId)&&(m.value.push({id:l.id,message:l.message,type:l.type||"text",attachment:l.attachment,user:l.user,created_at:l.created_at}),ee())}).listen("EscrowStatusUpdated",l=>{console.log("æ‰˜ç®¡çŠ¶æ€æ›´æ–°:",l),n.value.escrow_status=l.escrow_status||l.new_status,n.value.status=l.status||n.value.status,n.value.is_disputed=l.is_disputed,n.value.disputed_by=l.disputed_by,l.escrow_status==="buyer_confirmed_escrow"&&(n.value.buyer_confirmed_escrow_at=l.updated_at);const t=`æ‰˜ç®¡çŠ¶æ€æ›´æ–°: ${l.message}`,o={id:Date.now(),message:t,type:"system",user:null,created_at:new Date().toISOString()};(l.escrow_status==="escrow_released"||l.new_status==="escrow_released")&&c.currentUserId===n.value.client_id&&(o.show_review_button=!0,n.value.has_review&&(o.message="æ‰˜ç®¡å·²é‡Šæ”¾ï¼Œäº¤æ˜“å®Œæˆï¼Œæ‚¨å·²è¯„ä»·æ­¤äº¤æ˜“")),m.value.push(o),ee(),setTimeout(()=>{W.reload()},2e3)}).listen("OrderStatusUpdated",l=>{console.log("è®¢å•çŠ¶æ€æ›´æ–°:",l),l.status==="cancelled"&&setTimeout(()=>{W.reload()},1e3)}).listen(".dispute.resolved",l=>{console.log("äº‰è®®å·²è§£é™¤:",l),n.value.is_disputed=!1,n.value.disputed_by=null,l.escrow_status&&(n.value.escrow_status=l.escrow_status),l.status&&(n.value.status=l.status),setTimeout(()=>{W.reload({only:["availableActions","order"]})},1e3),showNotification("success",l.message||"äº‰è®®å·²è§£é™¤ï¼Œè®¢å•æ¢å¤æ­£å¸¸")}),v.value=!0,console.log("[WebSocket] è¿æ¥æˆåŠŸï¼ŒåŠ è½½æœ€æ–°æ¶ˆæ¯"),me()):(console.warn("Echo not available, retrying..."),setTimeout(le,1e3))},me=async()=>{try{console.log("[WebSocket] é‡æ–°åŠ è½½æ‰€æœ‰æ¶ˆæ¯");const l=await G.get(`/web/api/orders/${n.value.order_no}/chat/messages`);l.data&&l.data.length>0?(console.log("[WebSocket] åŠ è½½æ¶ˆæ¯æˆåŠŸ:",l.data.length,"æ¡"),m.value=l.data,ee()):console.log("[WebSocket] æ²¡æœ‰æ¶ˆæ¯")}catch(l){console.error("[WebSocket] åŠ è½½æ¶ˆæ¯å¤±è´¥:",l)}},xe=()=>{if(k.value=!document.hidden,document.hidden){console.log("[WebSocket] é¡µé¢éšè—ï¼Œå‡†å¤‡æ–­å¼€");const t=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?1e4:3e4;X=setTimeout(()=>{Ce()},t)}else{console.log("[WebSocket] é¡µé¢æ˜¾ç¤º, è¿æ¥çŠ¶æ€:",v.value,"é¢‘é“:",!!U),X&&(clearTimeout(X),X=null);const l=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);!v.value&&!U?(console.log("[WebSocket] æ£€æµ‹åˆ°æ–­å¼€çŠ¶æ€ï¼Œé‡æ–°è¿æ¥..."),le()):!v.value||!U?(console.log("[WebSocket] è¿æ¥çŠ¶æ€ä¸ä¸€è‡´ï¼Œé‡æ–°è¿æ¥..."),le()):(console.log("[WebSocket] å·²è¿æ¥"),l&&(console.log("[WebSocket] ç§»åŠ¨ç«¯æ¢å¤ï¼Œé‡æ–°åŠ è½½æ¶ˆæ¯"),me()))}},Pe=()=>{/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)&&v.value&&(console.log("[WebSocket] é¡µé¢è·å¾—ç„¦ç‚¹ï¼Œé‡æ–°åŠ è½½æ¶ˆæ¯"),me())};return pe(()=>{if(he(),We(),n.value.escrow_status==="escrow_released"&&c.currentUserId===n.value.client_id&&!m.value.some(t=>t.show_review_button===!0)){const t={id:Date.now(),message:n.value.has_review?"äº¤æ˜“å·²å®Œæˆï¼Œæ‚¨å·²è¯„ä»·æ­¤äº¤æ˜“":"äº¤æ˜“å·²å®Œæˆï¼è¯·å¯¹æœ¬æ¬¡äº¤æ˜“è¿›è¡Œè¯„ä»·",type:"system",user:null,created_at:new Date().toISOString(),show_review_button:!0};console.log("Adding review message:",t),m.value.push(t)}ee(),le(),document.addEventListener("visibilitychange",xe),document.addEventListener("focusin",Pe),document.addEventListener("pause",()=>{console.log("[WebSocket] PWAè¿›å…¥åå°"),Ce()}),document.addEventListener("resume",()=>{console.log("[WebSocket] PWAæ¢å¤å‰å°"),v.value?(console.log("[WebSocket] PWAæ¢å¤ï¼Œé‡æ–°åŠ è½½æ¶ˆæ¯"),me()):le()})}),je(()=>{ce&&clearInterval(ce),X&&clearTimeout(X),Ce(),document.removeEventListener("visibilitychange",xe),document.removeEventListener("focusin",Pe),document.removeEventListener("pause",xe),document.removeEventListener("resume",xe)}),(l,t)=>(s(),a(E,null,[M(et,{"hide-nav":!0,"hide-footer":!0,"show-mobile-bottom-nav":!1,"show-breadcrumbs":!0,breadcrumbs:[{label:"è®¢å•",url:"/orders"},{label:`è®¢å• #${r.order.order_no}`,url:null},{label:"äº¤æ˜“èŠå¤©"}]},{default:z(()=>[M(gt,{title:`è®¢å• #${r.order.order_no}`,"back-url":"/orders"},{custom:z(()=>[e("div",yr,[e("div",fr,[(s(!0),a(E,null,R(h.value,(o,p)=>(s(),a("div",{key:o.id,class:"relative",style:be(`z-index: ${h.value.length-p}`)},[o.profile_photo_url?(s(),a("img",{key:0,src:o.profile_photo_url,alt:o.name,class:x(["h-8 w-8 rounded-full object-cover ring-2",o.is_online?"ring-emerald-500":"ring-gray-400 dark:ring-gray-600"])},null,10,kr)):(s(),a("div",{key:1,class:x(["h-8 w-8 rounded-full flex items-center justify-center ring-2 ring-white dark:ring-gray-950",o.is_online?"bg-gradient-to-br from-emerald-500 to-emerald-600":"bg-gray-400 dark:bg-gray-600"])},[e("span",pr,d(o.name?.[0]?.toUpperCase()||"U"),1)],2))],4))),128))]),e("div",hr,[e("p",wr," è®¢å• #"+d(r.order.order_no),1),e("p",_r,d(h.value.filter(o=>o.is_online).length)+"/"+d(h.value.length)+" åœ¨æˆ¿é—´ ",1)])])]),actions:z(()=>[e("button",{onClick:t[0]||(t[0]=o=>g.value=!g.value),class:"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"},[...t[54]||(t[54]=[e("svg",{class:"w-5 h-5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])]),e("button",{onClick:t[1]||(t[1]=o=>y.value=!y.value),class:"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"},[...t[55]||(t[55]=[e("svg",{class:"w-5 h-5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])])]),_:1},8,["title"]),e("div",Cr,[r.order.status==="cancelled"?(s(),a("div",$r,[...t[56]||(t[56]=[e("div",{class:"max-w-7xl mx-auto px-4 py-3 sm:px-6 lg:px-8"},[e("div",{class:"flex items-center gap-3"},[e("svg",{class:"w-5 h-5 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("p",{class:"text-sm font-medium text-red-800 dark:text-red-200"},"æ­¤è®¢å•å·²å–æ¶ˆï¼Œæ— æ³•è¿›è¡Œä»»ä½•æ“ä½œ")])],-1)])])):u("",!0),r.order.is_disputed&&r.order.status!=="cancelled"?(s(),a("div",Mr,[e("div",zr,[e("div",Br,[e("div",jr,[t[60]||(t[60]=e("svg",{class:"w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("div",Fr,[t[58]||(t[58]=e("p",{class:"text-sm font-medium text-amber-800 dark:text-amber-200"},"è¯¥è®¢å•å¤„äºäº‰è®®ä¸­",-1)),t[59]||(t[59]=e("p",{class:"text-xs text-amber-700 dark:text-amber-300 mt-1"},[_(" è¯·ç­‰å¾…ä»²è£ç®¡ç†å‘˜åŠ å…¥èŠå¤©ï¼Œç®¡ç†å‘˜å°†åœ¨ "),e("span",{class:"font-semibold"},"24å°æ—¶å†…"),_(" åŠ å…¥å¤„ç†ã€‚ åœ¨æ­¤æœŸé—´ï¼Œæ‚¨å¯ä»¥ä¸å¯¹æ–¹è‡ªè¡Œåå•†è§£å†³ã€‚ ")],-1)),r.order.dispute_reason?(s(),a("p",Ar,[t[57]||(t[57]=e("span",{class:"font-medium"},"äº‰è®®åŸå› ï¼š",-1)),_(d(r.order.dispute_reason),1)])):u("",!0)])]),r.availableActions.includes("resolve_dispute")?(s(),a("div",Sr,[M(O,{onClick:t[2]||(t[2]=o=>A("resolve_dispute")),variant:"outline",size:"sm"},{default:z(()=>[...t[61]||(t[61]=[_(" è§£é™¤äº‰è®® ",-1)])]),_:1})])):u("",!0)])])])):u("",!0),!l.$page.props.auth.user?.telegram_chat_id&&r.order.status!=="cancelled"&&r.order.status!=="completed"?(s(),a("div",Lr,[e("div",Vr,[e("div",Er,[t[63]||(t[63]=e("div",{class:"flex items-start gap-3 flex-1"},[e("svg",{class:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.56c-.21 2.27-1.13 7.75-1.6 10.29-.2 1.08-.59 1.44-.97 1.47-.82.07-1.45-.54-2.24-.99-1.24-.71-1.94-1.16-3.14-1.85-1.39-.8-.49-1.24.3-1.96.21-.19 3.85-3.52 3.91-3.82.01-.04.01-.19-.07-.27-.08-.08-.2-.05-.28-.03-.12.03-2.02.13-5.7 3.75-.54.54-1.03.8-1.48.78-.49-.02-1.42-.27-2.11-.5-.85-.28-1.53-.42-1.47-.89.03-.25.37-.51 1.02-.77 4-1.74 6.67-2.89 8.01-3.44 3.81-1.57 4.61-1.84 5.13-1.85.11 0 .37.03.53.18.14.12.18.28.2.45-.01.06-.01.24-.02.38z"})]),e("div",{class:"flex-1"},[e("p",{class:"text-sm font-medium text-blue-800 dark:text-blue-200"},"å»ºè®®è®¾ç½® Telegram æ¥æ”¶å®æ—¶é€šçŸ¥"),e("p",{class:"text-xs text-blue-700 dark:text-blue-300 mt-1"}," è¿æ¥ Telegram åï¼Œæ‚¨å¯ä»¥å®æ—¶æ”¶åˆ°äº¤æ˜“çŠ¶æ€æ›´æ–°ã€å¯¹æ–¹æ¶ˆæ¯æé†’ç­‰é‡è¦é€šçŸ¥ï¼Œç¡®ä¿ä¸é”™è¿‡ä»»ä½•å…³é”®ä¿¡æ¯ã€‚ ")])],-1)),e("div",Ir,[M(ze(Ye),{href:"/notifications/settings",class:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm font-medium transition-colors"},{default:z(()=>[...t[62]||(t[62]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.56c-.21 2.27-1.13 7.75-1.6 10.29-.2 1.08-.59 1.44-.97 1.47-.82.07-1.45-.54-2.24-.99-1.24-.71-1.94-1.16-3.14-1.85-1.39-.8-.49-1.24.3-1.96.21-.19 3.85-3.52 3.91-3.82.01-.04.01-.19-.07-.27-.08-.08-.2-.05-.28-.03-.12.03-2.02.13-5.7 3.75-.54.54-1.03.8-1.48.78-.49-.02-1.42-.27-2.11-.5-.85-.28-1.53-.42-1.47-.89.03-.25.37-.51 1.02-.77 4-1.74 6.67-2.89 8.01-3.44 3.81-1.57 4.61-1.84 5.13-1.85.11 0 .37.03.53.18.14.12.18.28.2.45-.01.06-.01.24-.02.38z"})],-1),_(" ç«‹å³è®¾ç½® ",-1)])]),_:1})])])])])):u("",!0),M(Be,{modelValue:y.value,"onUpdate:modelValue":t[8]||(t[8]=o=>y.value=o),title:"äº¤æ˜“è¯¦æƒ…",subtitle:`è®¢å• #${r.order.order_no}`,position:"bottom",size:"default","icon-color":"blue"},{"header-icon":z(()=>[...t[64]||(t[64]=[e("div",{class:"p-2 rounded bg-blue-100 dark:bg-blue-900/30"},[e("svg",{class:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})])],-1)])]),default:z(()=>[e("div",Pr,[e("div",Tr,[e("div",Ur,[e("div",Dr,[t[65]||(t[65]=e("svg",{class:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"})],-1)),e("div",null,[e("p",qr,d(Fe(r.order.escrow_status)),1),e("p",Rr,"å½“å‰è¿›åº¦: "+d(ue(r.order.escrow_status))+"%",1)])])]),e("div",null,[t[90]||(t[90]=e("p",{class:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3"},"äº¤æ˜“æµç¨‹",-1)),e("div",Hr,[e("div",Wr,[t[68]||(t[68]=e("div",{class:"flex flex-col items-center"},[e("div",{class:"w-8 h-8 rounded-full bg-emerald-600 text-white flex items-center justify-center"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])]),e("div",{class:"w-0.5 h-16 bg-gray-300 dark:bg-gray-600"})],-1)),e("div",Or,[t[67]||(t[67]=e("p",{class:"text-sm font-medium text-gray-900 dark:text-gray-100"},"è®¢å•åˆ›å»º",-1)),e("p",Nr,d(r.order.created_at?P(r.order.created_at):"å·²å®Œæˆ"),1),r.order.escrow_status==="order_initiated"&&r.availableActions.includes("vendor_confirm")?(s(),a("div",Kr,[M(O,{onClick:t[3]||(t[3]=o=>A("vendor_confirm")),variant:"primary",size:"sm"},{default:z(()=>[...t[66]||(t[66]=[_(" ç¡®è®¤æ¥å• ",-1)])]),_:1})])):u("",!0)])]),e("div",Jr,[e("div",Xr,[e("div",{class:x(["w-8 h-8 rounded-full flex items-center justify-center",r.order.escrow_status==="order_initiated"?"bg-amber-500 animate-pulse":["vendor_confirmed","seller_paid","escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"bg-emerald-600":"bg-gray-300 dark:bg-gray-700"])},[["vendor_confirmed","seller_paid","escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?(s(),a("svg",Gr,[...t[69]||(t[69]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(s(),a("span",Qr,"2"))],2),t[70]||(t[70]=e("div",{class:"w-0.5 h-16 bg-gray-300 dark:bg-gray-600"},null,-1))]),e("div",Zr,[e("p",{class:x(["text-sm font-medium",["vendor_confirmed","seller_paid","escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"text-gray-900 dark:text-gray-100":"text-gray-600 dark:text-gray-300"])}," å•†å®¶ç¡®è®¤ ",2),e("p",Yr,d(r.order.vendor_confirmed_at?P(r.order.vendor_confirmed_at):"ç­‰å¾…å•†å®¶ç¡®è®¤è®¢å•"),1)])]),e("div",es,[e("div",ts,[e("div",{class:x(["w-8 h-8 rounded-full flex items-center justify-center",r.order.escrow_status==="vendor_confirmed"?"bg-amber-500 animate-pulse":["seller_paid","escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"bg-emerald-600":"bg-gray-300 dark:bg-gray-700"])},[["seller_paid","escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?(s(),a("svg",rs,[...t[71]||(t[71]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(s(),a("span",ss,"3"))],2),t[72]||(t[72]=e("div",{class:"w-0.5 h-16 bg-gray-300 dark:bg-gray-600"},null,-1))]),e("div",as,[e("p",{class:x(["text-sm font-medium",["seller_paid","escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"text-gray-900 dark:text-gray-100":"text-gray-600 dark:text-gray-300"])}," å–å®¶è½¬å¸åˆ°æ‰˜ç®¡ ",2),e("p",os,d(r.order.seller_paid_at?P(r.order.seller_paid_at):"ç­‰å¾…å–å®¶è½¬å…¥"),1),e("div",ls,[t[76]||(t[76]=e("p",{class:"text-gray-700 dark:text-gray-300 font-medium"},"è¯·å–å®¶è½¬å¸ï¼š",-1)),e("div",ds,[e("p",ns,[t[73]||(t[73]=e("span",{class:"inline-block w-12"},"ä»:",-1)),e("span",is,d(r.order.seller_address),1)]),e("p",us,[t[74]||(t[74]=e("span",{class:"inline-block w-12"},"åˆ°:",-1)),e("span",cs,d(r.order.escrow_address),1)]),e("p",ms,[t[75]||(t[75]=e("span",{class:"inline-block w-12"},"é‡‘é¢:",-1)),e("span",xs,d(parseFloat(r.order.crypto_amount).toFixed(4))+" "+d(r.order.currency_label||r.order.currency_key||r.order.crypto_currency),1)]),r.order.escrow_tx_hash?(s(),a("p",gs," äº¤æ˜“å“ˆå¸Œ: "+d(r.order.escrow_tx_hash),1)):u("",!0)])]),r.order.escrow_status==="vendor_confirmed"&&r.availableActions.includes("mark_seller_paid")?(s(),a("div",vs,[M(O,{onClick:t[4]||(t[4]=o=>A("mark_seller_paid")),variant:"primary",size:"sm"},{default:z(()=>[...t[77]||(t[77]=[_(" æˆ‘å·²è½¬å¸ ",-1)])]),_:1})])):u("",!0)])]),e("div",bs,[e("div",ys,[e("div",{class:x(["w-8 h-8 rounded-full flex items-center justify-center",r.order.escrow_status==="seller_paid"?"bg-amber-500 animate-pulse":["escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"bg-emerald-600":"bg-gray-300 dark:bg-gray-700"])},[["escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?(s(),a("svg",fs,[...t[78]||(t[78]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(s(),a("span",ks,"4"))],2),t[79]||(t[79]=e("div",{class:"w-0.5 h-16 bg-gray-300 dark:bg-gray-600"},null,-1))]),e("div",ps,[e("p",{class:x(["text-sm font-medium",["seller_paid","escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"text-gray-900 dark:text-gray-100":"text-gray-600 dark:text-gray-300"])}," æ‰˜ç®¡ç¡®è®¤åˆ°è´¦ ",2),e("p",hs,d(r.order.escrow_received_at?P(r.order.escrow_received_at):"ç³»ç»Ÿç¡®è®¤ä¸­"),1)])]),e("div",ws,[e("div",_s,[e("div",{class:x(["w-8 h-8 rounded-full flex items-center justify-center",r.order.escrow_status==="escrow_received"?"bg-amber-500 animate-pulse":["buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"bg-emerald-600":"bg-gray-300 dark:bg-gray-700"])},[["buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?(s(),a("svg",Cs,[...t[80]||(t[80]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(s(),a("span",$s,"5"))],2),t[81]||(t[81]=e("div",{class:"w-0.5 h-16 bg-gray-300 dark:bg-gray-600"},null,-1))]),e("div",Ms,[e("p",{class:x(["text-sm font-medium",["escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"text-gray-900 dark:text-gray-100":"text-gray-600 dark:text-gray-300"])}," ä¹°å®¶ç¡®è®¤æ‰˜ç®¡åˆ°è´¦ ",2),e("p",zs,d(r.order.buyer_confirmed_escrow_at?P(r.order.buyer_confirmed_escrow_at):"ç­‰å¾…ä¹°å®¶ç¡®è®¤"),1),r.order.escrow_status==="escrow_received"&&r.availableActions.includes("confirm_escrow")?(s(),a("div",Bs,[M(O,{onClick:t[5]||(t[5]=o=>A("confirm_escrow")),variant:"primary",size:"sm"},{default:z(()=>[...t[82]||(t[82]=[_(" ç¡®è®¤æ‰˜ç®¡åˆ°è´¦ ",-1)])]),_:1})])):u("",!0)])]),e("div",js,[e("div",Fs,[e("div",{class:x(["w-8 h-8 rounded-full flex items-center justify-center",r.order.escrow_status==="buyer_confirmed_escrow"?"bg-amber-500 animate-pulse":["buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"bg-emerald-600":"bg-gray-300 dark:bg-gray-700"])},[["buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?(s(),a("svg",As,[...t[83]||(t[83]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(s(),a("span",Ss,"6"))],2),t[84]||(t[84]=e("div",{class:"w-0.5 h-16 bg-gray-300 dark:bg-gray-600"},null,-1))]),e("div",Ls,[e("p",{class:x(["text-sm font-medium",["buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"text-gray-900 dark:text-gray-100":"text-gray-600 dark:text-gray-300"])}," ä¹°å®¶ä»˜æ¬¾ ",2),e("p",Vs,d(r.order.buyer_paid_at?P(r.order.buyer_paid_at):"ç­‰å¾…ä¹°å®¶ä»˜æ¬¾"),1),r.order.escrow_status==="buyer_confirmed_escrow"&&r.availableActions.includes("mark_buyer_paid")?(s(),a("div",Es,[M(O,{onClick:t[6]||(t[6]=o=>A("mark_buyer_paid")),variant:"primary",size:"sm"},{default:z(()=>[...t[85]||(t[85]=[_(" æˆ‘å·²ä»˜æ¬¾ ",-1)])]),_:1})])):u("",!0)])]),e("div",Is,[e("div",Ps,[e("div",{class:x(["w-8 h-8 rounded-full flex items-center justify-center",r.order.escrow_status==="buyer_paid"?"bg-amber-500 animate-pulse":["seller_received","escrow_released"].includes(r.order.escrow_status)?"bg-emerald-600":"bg-gray-300 dark:bg-gray-700"])},[["seller_received","escrow_released"].includes(r.order.escrow_status)?(s(),a("svg",Ts,[...t[86]||(t[86]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(s(),a("span",Us,"7"))],2),t[87]||(t[87]=e("div",{class:"w-0.5 h-16 bg-gray-300 dark:bg-gray-600"},null,-1))]),e("div",Ds,[e("p",{class:x(["text-sm font-medium",["buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"text-gray-900 dark:text-gray-100":"text-gray-600 dark:text-gray-300"])}," å–å®¶ç¡®è®¤æ”¶æ¬¾ ",2),e("p",qs,d(r.order.seller_received_at?P(r.order.seller_received_at):"ç­‰å¾…å–å®¶ç¡®è®¤"),1),r.order.escrow_status==="buyer_paid"&&r.availableActions.includes("mark_seller_received")?(s(),a("div",Rs,[M(O,{onClick:t[7]||(t[7]=o=>A("mark_seller_received")),variant:"success",size:"sm"},{default:z(()=>[...t[88]||(t[88]=[_(" ç¡®è®¤æ”¶æ¬¾ ",-1)])]),_:1})])):u("",!0)])]),e("div",Hs,[e("div",Ws,[e("div",{class:x(["w-8 h-8 rounded-full flex items-center justify-center",r.order.escrow_status==="seller_received"?"bg-amber-500 animate-pulse":r.order.escrow_status==="escrow_released"?"bg-emerald-600":"bg-gray-300 dark:bg-gray-700"])},[r.order.escrow_status==="escrow_released"?(s(),a("svg",Os,[...t[89]||(t[89]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(s(),a("span",Ns,"8"))],2)]),e("div",Ks,[e("p",{class:x(["text-sm font-medium",["seller_received","escrow_released"].includes(r.order.escrow_status)?"text-gray-900 dark:text-gray-100":"text-gray-600 dark:text-gray-300"])}," æ‰˜ç®¡é‡Šæ”¾ ",2),e("p",Js,d(r.order.escrow_released_at?P(r.order.escrow_released_at):r.order.escrow_status==="seller_received"?"å¤„ç†ä¸­...æ³¨æ„ï¼šå¦‚æœé“¾ä¸Šå·²åˆ°è´¦ï¼Œä½†æ˜¯ç³»ç»Ÿé•¿æ—¶é—´è¿˜æœªç¡®è®¤ï¼Œè¯·è”ç³»å®˜æ–¹Telegramã€‚":"å¾…å®Œæˆ"),1),r.order.release_tx_hash?(s(),a("p",Xs," äº¤æ˜“å“ˆå¸Œ: "+d(r.order.release_tx_hash),1)):u("",!0)])])])]),e("div",null,[t[102]||(t[102]=e("p",{class:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2"},"äº¤æ˜“ä¿¡æ¯",-1)),e("div",Gs,[e("div",null,[t[91]||(t[91]=e("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"è®¢å•ç¼–å·",-1)),e("p",Qs,"#"+d(r.order.order_no),1)]),e("div",null,[t[92]||(t[92]=e("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"å•†å®¶",-1)),e("p",Zs,d(r.order.vendor?.name||"åŠ è½½ä¸­..."),1)]),e("div",null,[t[93]||(t[93]=e("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"å®¢æˆ·",-1)),e("p",Ys,d(r.order.client?.name||"åŠ è½½ä¸­..."),1)]),e("div",null,[t[94]||(t[94]=e("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"ä¹°å®¶",-1)),e("p",ea,d(r.order.buyer?.name||"åŠ è½½ä¸­..."),1)]),e("div",null,[t[95]||(t[95]=e("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"å–å®¶",-1)),e("p",ta,d(r.order.seller?.name||"åŠ è½½ä¸­..."),1)]),e("div",null,[t[96]||(t[96]=e("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"å¸ç§",-1)),e("p",ra,d(r.order.currency_label||r.order.currency_key||r.order.crypto_currency),1)]),e("div",null,[t[97]||(t[97]=e("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"æ•°é‡ï¼ˆå«äº¤æ˜“è´¹ï¼‰",-1)),e("p",sa,d(parseFloat(r.order.crypto_amount).toFixed(4))+" "+d(r.order.currency_label||r.order.currency_key||r.order.crypto_currency),1),r.order.fee&&r.order.fee>0?(s(),a("p",aa," äº¤æ˜“è´¹ï¼ˆå•†å®¶ï¼‰: "+d(parseFloat(r.order.fee).toFixed(8))+" "+d(r.order.currency_label||r.order.currency_key||r.order.crypto_currency),1)):u("",!0)]),e("div",null,[t[98]||(t[98]=e("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"å•ä»·",-1)),e("p",oa,"Â¥"+d(parseFloat(r.order.price).toFixed(2)),1)]),e("div",null,[t[99]||(t[99]=e("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"æ€»é‡‘é¢",-1)),e("p",la,"Â¥"+d(parseFloat(r.order.fiat_amount).toFixed(2)),1)])]),r.order.seller_address?(s(),a("div",da,[t[100]||(t[100]=e("span",{class:"text-xs text-gray-500 dark:text-gray-400 block mb-1"},"å–å®¶åœ°å€",-1)),e("p",na,d(r.order.seller_address),1)])):u("",!0),r.order.escrow_address?(s(),a("div",ia,[t[101]||(t[101]=e("span",{class:"text-xs text-gray-500 dark:text-gray-400 block mb-1"},"æ‰˜ç®¡åœ°å€",-1)),e("p",ua,d(r.order.escrow_address),1)])):u("",!0)])])])]),_:1},8,["modelValue","subtitle"]),e("div",ca,[e("div",ma,[e("div",xa,[e("div",ga,[e("div",va,[t[103]||(t[103]=e("h3",{class:"text-lg font-bold text-gray-900 dark:text-gray-100"},"äº¤æ˜“è¯¦æƒ…",-1)),e("span",{class:x([Re(r.order.escrow_status),"px-3 py-1 text-xs font-semibold rounded-full"])},d(Fe(r.order.escrow_status)),3)]),e("div",ba,[e("div",ya,[t[104]||(t[104]=e("span",null,"äº¤æ˜“è¿›åº¦",-1)),e("span",null,d(ue(r.order.escrow_status))+"%",1)]),e("div",fa,[e("div",{class:"bg-gradient-to-r from-emerald-500 to-emerald-600 h-2 rounded-full",style:be(`width: ${ue(r.order.escrow_status)}%`)},null,4)])]),e("div",ka,[e("div",null,[e("div",pa,[t[106]||(t[106]=e("div",{class:"w-8 h-8 bg-emerald-500 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),e("div",ha,[t[105]||(t[105]=e("p",{class:"text-sm font-medium text-gray-900 dark:text-gray-100"},"è®¢å•åˆ›å»º",-1)),e("p",wa,d(r.order.created_at?P(r.order.created_at):"å·²å®Œæˆ"),1)])])]),e("div",null,[e("div",_a,[e("div",{class:x(["w-8 h-8 rounded-full flex items-center justify-center",r.order.escrow_status==="order_initiated"?"bg-amber-500 animate-pulse":["vendor_confirmed","seller_paid","escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"bg-emerald-500":"bg-gray-300 dark:bg-gray-700"])},[["vendor_confirmed","seller_paid","escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?(s(),a("svg",Ca,[...t[107]||(t[107]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(s(),a("span",$a,"2"))],2),e("div",Ma,[e("p",{class:x(["text-sm font-medium",["vendor_confirmed","seller_paid","escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"text-gray-900 dark:text-gray-100":"text-gray-400 dark:text-gray-500"])}," å•†å®¶ç¡®è®¤ ",2),e("p",{class:x(["text-xs",["vendor_confirmed","seller_paid","escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"text-gray-500 dark:text-gray-400":"text-gray-400 dark:text-gray-600"])},d(r.order.vendor_confirmed_at?P(r.order.vendor_confirmed_at):r.order.escrow_status==="order_initiated"?"ç­‰å¾…ä¸­...":"å¾…å®Œæˆ"),3)])]),r.order.escrow_status==="order_initiated"&&r.availableActions.includes("vendor_confirm")?(s(),a("div",za,[M(O,{onClick:t[9]||(t[9]=o=>A("vendor_confirm")),variant:"primary",size:"sm",fullWidth:""},{default:z(()=>[...t[108]||(t[108]=[_(" ç¡®è®¤æ¥å• ",-1)])]),_:1})])):u("",!0)]),e("div",null,[e("div",Ba,[e("div",{class:x(["w-8 h-8 rounded-full flex items-center justify-center",r.order.escrow_status==="vendor_confirmed"?"bg-amber-500 animate-pulse":["seller_paid","escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"bg-emerald-500":"bg-gray-300 dark:bg-gray-700"])},[["seller_paid","escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?(s(),a("svg",ja,[...t[109]||(t[109]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(s(),a("span",Fa,"3"))],2),e("div",Aa,[e("p",{class:x(["text-sm font-medium",["seller_paid","escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"text-gray-900 dark:text-gray-100":"text-gray-400 dark:text-gray-500"])}," å–å®¶è½¬å¸åˆ°æ‰˜ç®¡ ",2),e("p",{class:x(["text-xs",["seller_paid","escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"text-gray-500 dark:text-gray-400":"text-gray-400 dark:text-gray-600"])},d(r.order.seller_paid_at?P(r.order.seller_paid_at):r.order.escrow_status==="vendor_confirmed"?"ç­‰å¾…å–å®¶è½¬å…¥":"å¾…å®Œæˆ"),3),e("div",Sa,[t[113]||(t[113]=e("p",{class:"text-gray-700 dark:text-gray-300 font-medium"},"è¯·å–å®¶è½¬å¸ï¼š",-1)),e("div",La,[e("p",Va,[t[110]||(t[110]=e("span",{class:"inline-block w-12"},"ä»:",-1)),e("span",Ea,d(r.order.seller_address),1)]),e("p",Ia,[t[111]||(t[111]=e("span",{class:"inline-block w-12"},"åˆ°:",-1)),e("span",Pa,d(r.order.escrow_address),1)]),e("p",Ta,[t[112]||(t[112]=e("span",{class:"inline-block w-12"},"é‡‘é¢:",-1)),e("span",Ua,d(parseFloat(r.order.crypto_amount).toFixed(4))+" "+d(r.order.currency_label||r.order.currency_key||r.order.crypto_currency),1)]),r.order.escrow_tx_hash?(s(),a("p",Da," äº¤æ˜“å“ˆå¸Œ: "+d(r.order.escrow_tx_hash),1)):u("",!0)])])])]),r.order.escrow_status==="vendor_confirmed"&&r.availableActions.includes("mark_seller_paid")?(s(),a("div",qa,[M(O,{onClick:t[10]||(t[10]=o=>A("mark_seller_paid")),variant:"primary",size:"sm"},{default:z(()=>[...t[114]||(t[114]=[_(" æˆ‘å·²è½¬å¸åˆ°æ‰˜ç®¡ ",-1)])]),_:1})])):u("",!0)]),e("div",null,[e("div",Ra,[e("div",{class:x(["w-8 h-8 rounded-full flex items-center justify-center",r.order.escrow_status==="seller_paid"?"bg-amber-500 animate-pulse":["escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"bg-emerald-500":"bg-gray-300 dark:bg-gray-700"])},[["escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?(s(),a("svg",Ha,[...t[115]||(t[115]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(s(),a("span",Wa,"4"))],2),e("div",Oa,[e("p",{class:x(["text-sm font-medium",["escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"text-gray-900 dark:text-gray-100":"text-gray-400 dark:text-gray-500"])}," æ‰˜ç®¡ç¡®è®¤åˆ°è´¦ ",2),e("p",{class:x(["text-xs",["escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"text-gray-500 dark:text-gray-400":"text-gray-400 dark:text-gray-600"])},d(r.order.escrow_received_at?P(r.order.escrow_received_at):r.order.escrow_status==="seller_paid"?"ç³»ç»Ÿç¡®è®¤ä¸­...":"å¾…å®Œæˆ"),3)])])]),e("div",null,[e("div",Na,[e("div",{class:x(["w-8 h-8 rounded-full flex items-center justify-center",r.order.escrow_status==="escrow_received"?"bg-amber-500 animate-pulse":["buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"bg-emerald-500":"bg-gray-300 dark:bg-gray-700"])},[["buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?(s(),a("svg",Ka,[...t[116]||(t[116]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(s(),a("span",Ja,"5"))],2),e("div",Xa,[e("p",{class:x(["text-sm font-medium",["escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"text-gray-900 dark:text-gray-100":"text-gray-400 dark:text-gray-500"])}," ä¹°å®¶ç¡®è®¤æ‰˜ç®¡åˆ°è´¦ ",2),e("p",{class:x(["text-xs",["escrow_received","buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"text-gray-500 dark:text-gray-400":"text-gray-400 dark:text-gray-600"])},d(r.order.buyer_confirmed_escrow_at?P(r.order.buyer_confirmed_escrow_at):r.order.escrow_status==="escrow_received"?"ç­‰å¾…ç¡®è®¤...":"å¾…å®Œæˆ"),3)])]),r.order.escrow_status==="escrow_received"&&r.availableActions.includes("confirm_escrow")?(s(),a("div",Ga,[M(O,{onClick:t[11]||(t[11]=o=>A("confirm_escrow")),variant:"primary",size:"sm",fullWidth:""},{default:z(()=>[...t[117]||(t[117]=[_(" ç¡®è®¤æ‰˜ç®¡åˆ°è´¦ ",-1)])]),_:1})])):u("",!0)]),e("div",null,[e("div",Qa,[e("div",{class:x(["w-8 h-8 rounded-full flex items-center justify-center",r.order.escrow_status==="buyer_confirmed_escrow"?"bg-amber-500 animate-pulse":["buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"bg-emerald-500":"bg-gray-300 dark:bg-gray-700"])},[["buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?(s(),a("svg",Za,[...t[118]||(t[118]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(s(),a("span",Ya,"6"))],2),e("div",eo,[e("p",{class:x(["text-sm font-medium",["buyer_confirmed_escrow","buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"text-gray-900 dark:text-gray-100":"text-gray-400 dark:text-gray-500"])}," ä¹°å®¶ä»˜æ¬¾ ",2),e("p",to,d(r.order.buyer_paid_at?P(r.order.buyer_paid_at):r.order.escrow_status==="buyer_confirmed_escrow"?"ç­‰å¾…ä¸­...":"å¾…å®Œæˆ"),1)])]),r.order.escrow_status==="buyer_confirmed_escrow"&&r.availableActions.includes("mark_buyer_paid")?(s(),a("div",ro,[M(O,{onClick:t[12]||(t[12]=o=>A("mark_buyer_paid")),variant:"primary",size:"sm",fullWidth:""},{default:z(()=>[...t[119]||(t[119]=[_(" æˆ‘å·²ä»˜æ¬¾ ",-1)])]),_:1})])):u("",!0)]),e("div",null,[e("div",so,[e("div",{class:x(["w-8 h-8 rounded-full flex items-center justify-center",r.order.escrow_status==="buyer_paid"?"bg-amber-500 animate-pulse":["seller_received","escrow_released"].includes(r.order.escrow_status)?"bg-emerald-500":"bg-gray-300 dark:bg-gray-700"])},[["seller_received","escrow_released"].includes(r.order.escrow_status)?(s(),a("svg",ao,[...t[120]||(t[120]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(s(),a("span",oo,"7"))],2),e("div",lo,[e("p",{class:x(["text-sm font-medium",["buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"text-gray-900 dark:text-gray-100":"text-gray-400 dark:text-gray-500"])}," å–å®¶ç¡®è®¤æ”¶æ¬¾ ",2),e("p",{class:x(["text-xs",["buyer_paid","seller_received","escrow_released"].includes(r.order.escrow_status)?"text-gray-500 dark:text-gray-400":"text-gray-400 dark:text-gray-600"])},d(r.order.seller_received_at?P(r.order.seller_received_at):r.order.escrow_status==="buyer_paid"?"ç­‰å¾…ä¸­...":"å¾…å®Œæˆ"),3)])]),r.order.escrow_status==="buyer_paid"&&r.availableActions.includes("mark_seller_received")?(s(),a("div",no,[M(O,{onClick:t[13]||(t[13]=o=>A("mark_seller_received")),variant:"success",size:"sm",fullWidth:""},{default:z(()=>[...t[121]||(t[121]=[_(" ç¡®è®¤æ”¶æ¬¾ ",-1)])]),_:1})])):u("",!0)]),e("div",null,[e("div",io,[e("div",{class:x(["w-8 h-8 rounded-full flex items-center justify-center",r.order.escrow_status==="seller_received"?"bg-amber-500 animate-pulse":r.order.escrow_status==="escrow_released"?"bg-emerald-500":"bg-gray-300 dark:bg-gray-700"])},[r.order.escrow_status==="escrow_released"?(s(),a("svg",uo,[...t[122]||(t[122]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(s(),a("span",co,"8"))],2),e("div",mo,[e("p",{class:x(["text-sm font-medium",["seller_received","escrow_released"].includes(r.order.escrow_status)?"text-gray-900 dark:text-gray-100":"text-gray-400 dark:text-gray-500"])}," æ‰˜ç®¡é‡Šæ”¾ ",2),e("p",{class:x(["text-xs",["seller_received","escrow_released"].includes(r.order.escrow_status)?"text-gray-500 dark:text-gray-400":"text-gray-400 dark:text-gray-600"])},d(r.order.escrow_released_at?P(r.order.escrow_released_at):r.order.escrow_status==="seller_received"?"å¤„ç†ä¸­...":"å¾…å®Œæˆ"),3),r.order.release_tx_hash?(s(),a("p",xo," äº¤æ˜“å“ˆå¸Œ: "+d(r.order.release_tx_hash),1)):u("",!0)])])])]),e("div",go,[e("div",vo,[t[123]||(t[123]=e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"è®¢å•ç¼–å·",-1)),e("span",bo,"#"+d(r.order.order_no),1)]),e("div",yo,[t[124]||(t[124]=e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"å•†å®¶",-1)),e("span",fo,d(r.order.vendor?.name||"åŠ è½½ä¸­..."),1)]),e("div",ko,[t[125]||(t[125]=e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"å®¢æˆ·",-1)),e("span",po,d(r.order.client?.name||"åŠ è½½ä¸­..."),1)]),e("div",ho,[t[126]||(t[126]=e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"ä¹°å®¶",-1)),e("span",wo,d(r.order.buyer?.name||"åŠ è½½ä¸­..."),1)]),e("div",_o,[t[127]||(t[127]=e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"å–å®¶",-1)),e("span",Co,d(r.order.seller?.name||"åŠ è½½ä¸­..."),1)]),e("div",$o,[t[128]||(t[128]=e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"æ•°é‡ï¼ˆå«äº¤æ˜“è´¹ï¼‰",-1)),e("span",Mo,d(parseFloat(r.order.crypto_amount).toFixed(4))+" "+d(r.order.currency_label||r.order.currency_key||r.order.crypto_currency),1)]),r.order.fee&&r.order.fee>0?(s(),a("div",zo,[t[129]||(t[129]=e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"äº¤æ˜“è´¹ï¼ˆå•†å®¶ï¼‰",-1)),e("span",Bo,d(parseFloat(r.order.fee).toFixed(8))+" "+d(r.order.currency_label||r.order.currency_key||r.order.crypto_currency),1)])):u("",!0),e("div",jo,[t[130]||(t[130]=e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"å•ä»·",-1)),e("span",Fo,"Â¥"+d(parseFloat(r.order.price).toFixed(2)),1)]),e("div",Ao,[t[131]||(t[131]=e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"æ€»é‡‘é¢",-1)),e("span",So,"Â¥"+d(parseFloat(r.order.fiat_amount).toFixed(2)),1)]),r.order.seller_address?(s(),a("div",Lo,[t[132]||(t[132]=e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"å–å®¶åœ°å€",-1)),e("span",Vo,d(r.order.seller_address),1)])):u("",!0),r.order.escrow_address?(s(),a("div",Eo,[t[133]||(t[133]=e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"æ‰˜ç®¡åœ°å€",-1)),e("span",Io,d(r.order.escrow_address),1)])):u("",!0)])])]),e("div",Po,[e("div",To,[e("div",Uo,[e("div",Do,[e("div",qo,[e("div",Ro,[e("div",Ho,[(s(!0),a(E,null,R(h.value,(o,p)=>(s(),a("a",{key:o.id,href:`/trader/profile/${o.id}`,target:"_blank",class:"relative hover:opacity-80 transition-opacity cursor-pointer",style:be(`z-index: ${h.value.length-p}`)},[o.profile_photo_url?(s(),a("img",{key:0,src:o.profile_photo_url,alt:o.name,class:"h-10 w-10 rounded-full object-cover ring-2 ring-white dark:ring-gray-900"},null,8,Oo)):(s(),a("div",No,[e("span",Ko,d(o.name?.[0]?.toUpperCase()||"U"),1)])),o.is_online?(s(),a("div",Jo)):u("",!0)],12,Wo))),128))]),e("div",Xo,[e("div",Go,[e("p",Qo,[_(" è®¢å• #"+d(r.order.order_no)+" èŠå¤©å®¤ ",1),e("span",Zo,"("+d(h.value.length)+"äºº)",1)])]),e("p",Yo,[(s(!0),a(E,null,R(h.value,(o,p)=>(s(),a("span",{key:o.id},[e("span",{class:x([o.is_online?"text-emerald-600 dark:text-emerald-400":"text-gray-400 dark:text-gray-500",o.is_admin?"font-medium":""])},d(o.name),3),p<h.value.length-1?(s(),a("span",el," Â· ")):u("",!0)]))),128))])])]),t[134]||(t[134]=e("div",{class:"flex items-center gap-2"},null,-1))])])]),e("div",{ref_key:"messageContainer",ref:L,class:"flex-1 overflow-y-auto p-6 space-y-4"},[e("div",tl,[e("div",rl,d(new Date(r.order.created_at).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})),1),t[135]||(t[135]=e("div",{class:"px-3 py-1 bg-gray-100 dark:bg-gray-800 rounded text-xs text-gray-500 dark:text-gray-400"}," è®¢å•å·²åˆ›å»ºï¼Œç­‰å¾…å•†å®¶ç¡®è®¤ ",-1))]),t[147]||(t[147]=e("div",{class:"mb-4 mx-4"},[e("div",{class:"bg-amber-50 dark:bg-amber-900/20 rounded p-3 border border-amber-200 dark:border-amber-800"},[e("div",{class:"flex items-start gap-2"},[e("svg",{class:"w-4 h-4 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),e("div",{class:"text-xs"},[e("p",{class:"font-medium text-amber-700 dark:text-amber-300 mb-1"},"å®‰å…¨æé†’"),e("p",{class:"text-amber-600 dark:text-amber-400"},"è¯·å‹¿ç›¸ä¿¡ä»»ä½•å¹³å°å¤–çš„äº¤æ˜“é‚€è¯·ï¼Œè°¨é˜²è¯ˆéª—ã€‚ä»»ä½•å¹³å°ä»¥å¤–çš„äº¤æµéƒ½æ— æ³•ä½œä¸ºäº‰è®®ææ–™ã€‚")])])])],-1)),r.order.ad_snapshot?.welcome_message?(s(),a("div",sl,[e("div",al,[t[139]||(t[139]=e("div",{class:"flex items-center gap-2 mb-2"},[e("svg",{class:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 3a1 1 0 00-1.447-.894L8.763 6H5a3 3 0 000 6h.28l1.771 5.316A1 1 0 008 18h1a1 1 0 001-1v-4.382l6.553 3.276A1 1 0 0018 15V3z","clip-rule":"evenodd"})]),e("span",{class:"text-xs font-medium text-blue-700 dark:text-blue-300"},"å•†å®¶å…¬å‘Š")],-1)),e("p",ol,d(r.order.ad_snapshot.welcome_message),1),r.order.vendor?.response_time?(s(),a("div",ll,[e("div",dl,[t[138]||(t[138]=e("svg",{class:"w-3.5 h-3.5 text-blue-500 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",nl,[t[136]||(t[136]=_(" è¯¥å•†å®¶çš„å“åº”æ—¶é—´æ˜¯ ",-1)),e("span",il,d(r.order.vendor.response_time)+" åˆ†é’Ÿ",1),t[137]||(t[137]=_("ï¼Œè¯·åœ¨è¯¥æ—¶é—´å†…ç­‰å¾…å•†å®¶åŠ å…¥èŠå¤©å®¤ã€‚ ",-1))])])])):u("",!0)])])):u("",!0),r.order.vendor?.response_time&&!r.order.ad_snapshot?.welcome_message?(s(),a("div",ul,[e("div",cl,[e("div",ml,[t[142]||(t[142]=e("svg",{class:"w-3.5 h-3.5 text-blue-500 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",xl,[t[140]||(t[140]=_(" è¯¥å•†å®¶çš„å“åº”æ—¶é—´æ˜¯ ",-1)),e("span",gl,d(r.order.vendor.response_time)+" åˆ†é’Ÿ",1),t[141]||(t[141]=_("ï¼Œè¯·åœ¨è¯¥æ—¶é—´å†…ç­‰å¾…å•†å®¶åŠ å…¥èŠå¤©å®¤ã€‚ ",-1))])])])])):u("",!0),(s(!0),a(E,null,R(m.value,o=>(s(),a("div",{key:o.id,class:x(["flex",o.type==="system"?"justify-center":"gap-3",o.type!=="system"&&o.user?.id===l.$page.props.auth.user?.id?"justify-end":""])},[o.type==="system"?(s(),a("div",vl,[e("div",bl,d(P(o.created_at)),1),e("div",{class:x(["px-3 py-1 rounded text-xs max-w-md",o.is_temporary?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400"])},[o.user?(s(),a("span",yl,d(o.user.name),1)):u("",!0),_(" "+d(o.message||o.content),1)],2),o.show_review_button?(s(),a("div",fl,[n.value.has_review?(s(),a("div",hl,[...t[146]||(t[146]=[e("div",{class:"flex items-center justify-center gap-2"},[e("svg",{class:"w-5 h-5 text-emerald-600 dark:text-emerald-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),e("span",{class:"text-sm font-medium text-emerald-800 dark:text-emerald-300"},"æ‚¨å·²è¯„ä»·æ­¤äº¤æ˜“")],-1)])])):(s(),a("div",kl,[e("div",pl,[t[145]||(t[145]=e("div",{class:"flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-amber-600 dark:text-amber-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]),e("span",{class:"text-sm font-medium text-amber-800 dark:text-amber-300"},"è¯·è¯„ä»·æœ¬æ¬¡äº¤æ˜“")],-1)),M(O,{onClick:t[14]||(t[14]=p=>b.value=!0),variant:"warning",size:"sm",fullWidth:""},{icon:z(()=>[...t[143]||(t[143]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1)])]),default:z(()=>[t[144]||(t[144]=_(" ç«‹å³è¯„ä»· ",-1))]),_:1})])]))])):u("",!0)])):o.user?.id!==l.$page.props.auth.user?.id?(s(),a(E,{key:1},[e("a",{href:`/trader/profile/${o.user.id}`,target:"_blank",class:"h-8 w-8 rounded-full flex-shrink-0 hover:opacity-80 transition-opacity cursor-pointer"},[o.user.profile_photo_url?(s(),a("img",{key:0,src:o.user.profile_photo_url,alt:o.user.name,class:"h-8 w-8 rounded-full object-cover border border-gray-200 dark:border-gray-700"},null,8,_l)):(s(),a("div",Cl,[e("span",$l,d(o.user.name.charAt(0)),1)]))],8,wl),e("div",Ml,[e("p",zl,[_(d(o.user.name)+" ",1),o.type==="admin"?(s(),a("span",Bl,"(Admin)")):u("",!0)]),e("div",jl,[o.attachment?(s(),a("div",Fl,[M(ve,{attachment:o.attachment,variant:"default","thumbnail-size":"md"},null,8,["attachment"])])):u("",!0),o.message?(s(),a("p",Al,d(o.message),1)):u("",!0)]),e("p",Sl,d(P(o.created_at)),1)])],64)):(s(),a(E,{key:2},[e("div",Ll,[e("p",Vl,[_(d(o.user.name)+" ",1),o.type==="admin"?(s(),a("span",El,"(Admin)")):u("",!0)]),e("div",Il,[o.attachment?(s(),a("div",Pl,[M(ve,{attachment:o.attachment,variant:"primary","thumbnail-size":"md"},null,8,["attachment"])])):u("",!0),o.message?(s(),a("p",Tl,d(o.message),1)):u("",!0)]),e("p",Ul,d(P(o.created_at)),1)]),l.$page.props.auth.user?.profile_photo_url?(s(),a("img",{key:0,src:l.$page.props.auth.user.profile_photo_url,alt:l.$page.props.auth.user.name,class:"h-8 w-8 rounded-full object-cover border border-gray-200 dark:border-gray-700 flex-shrink-0"},null,8,Dl)):(s(),a("div",ql,[e("span",Rl,d(l.$page.props.auth.user?.name?.charAt(0).toUpperCase()||"U"),1)]))],64))],2))),128))],512),e("div",Hl,[B.value||F.value?(s(),a("div",Wl,[F.value?(s(),a("div",Ol,[...t[148]||(t[148]=[e("div",{class:"animate-spin h-8 w-8 border-4 border-blue-600 border-t-transparent rounded-full"},null,-1),e("div",null,[e("p",{class:"text-sm font-medium text-gray-900 dark:text-gray-200"},"æ­£åœ¨å‹ç¼©å›¾ç‰‡..."),e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"ä¼˜åŒ–å›¾ç‰‡å¤§å°ä»¥å¿«é€Ÿä¸Šä¼ ")],-1)])])):B.value?(s(),a("div",Nl,[B.value.type.startsWith("image/")?(s(),a("img",{key:0,src:T.value,alt:B.value.name,class:"max-h-32 rounded"},null,8,Kl)):B.value.type==="application/pdf"?(s(),a("div",Jl,[...t[149]||(t[149]=[e("svg",{class:"w-8 h-8 text-red-600 dark:text-red-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-5L9 2H4z","clip-rule":"evenodd"})],-1)])])):u("",!0),e("div",Xl,[e("p",Gl,d(B.value.name),1),e("p",Ql,d(Le(B.value.size)),1)]),e("button",{onClick:_e,type:"button",class:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},[...t[150]||(t[150]=[e("svg",{class:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):u("",!0)])):u("",!0),e("form",{onSubmit:K(Ee,["prevent"]),class:"flex gap-2"},[e("input",{ref_key:"fileInput",ref:H,type:"file",onChange:Ve,accept:".pdf,image/*","data-max-size":"2097152",class:"hidden"},null,544),e("button",{type:"button",onClick:t[15]||(t[15]=o=>!J.value&&!F.value&&l.$refs.fileInput.click()),disabled:J.value||F.value,class:"p-2 rounded text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent"},[...t[151]||(t[151]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1)])],8,Zl),M(De,{onSelect:t[16]||(t[16]=o=>C.value+=o),disabled:J.value,placement:"top"},null,8,["disabled"]),N(e("input",{"onUpdate:modelValue":t[17]||(t[17]=o=>C.value=o),type:"text",placeholder:J.value?"äº¤æ˜“å·²ç»“æŸï¼Œæ— æ³•å‘é€æ¶ˆæ¯":"è¾“å…¥æ¶ˆæ¯...",class:"flex-1 px-4 py-2 bg-gray-100 dark:bg-gray-800 border-0 rounded text-base md:text-sm text-gray-900 dark:text-gray-200 placeholder-gray-500 dark:placeholder-gray-400 focus:bg-white dark:focus:bg-gray-700 focus:ring-2 focus:ring-emerald-500 focus:outline-none disabled:opacity-50 transition-colors",disabled:!v.value||J.value},null,8,Yl),[[te,C.value]]),e("button",{type:"submit",disabled:!C.value.trim()&&!B.value||!v.value||w.value||J.value,class:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded font-medium text-sm transition-colors flex items-center gap-2"},[w.value?(s(),a("svg",td,[...t[152]||(t[152]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(s(),a("span",rd,"å‘é€"))],8,ed)],32),r.availableActions.length>0&&r.order.status!=="completed"&&r.order.status!=="cancelled"&&r.order.escrow_status!=="escrow_released"||r.order.status!=="cancelled"&&r.order.status!=="completed"?(s(),a("div",sd,[e("div",ad,[(s(!0),a(E,null,R(r.availableActions,o=>(s(),a(E,{key:o},[o==="vendor_confirm"?(s(),a("button",{key:0,onClick:t[18]||(t[18]=p=>A("vendor_confirm")),class:"px-3 py-1.5 bg-emerald-600 hover:bg-emerald-700 text-white text-xs font-medium rounded transition-colors cursor-pointer"}," ç¡®è®¤è®¢å• ")):u("",!0),o==="mark_seller_paid"?(s(),a("button",{key:1,onClick:t[19]||(t[19]=p=>A("mark_seller_paid")),class:"px-3 py-1.5 bg-emerald-600 hover:bg-emerald-700 text-white text-xs font-medium rounded transition-colors cursor-pointer"}," æˆ‘å·²è½¬å¸ ")):u("",!0),o==="confirm_escrow"?(s(),a("button",{key:2,onClick:t[20]||(t[20]=p=>A("confirm_escrow")),class:"px-3 py-1.5 bg-emerald-600 hover:bg-emerald-700 text-white text-xs font-medium rounded transition-colors cursor-pointer"}," ç¡®è®¤æ‰˜ç®¡ ")):u("",!0),o==="mark_buyer_paid"?(s(),a("button",{key:3,onClick:t[21]||(t[21]=p=>A("mark_buyer_paid")),class:"px-3 py-1.5 bg-emerald-600 hover:bg-emerald-700 text-white text-xs font-medium rounded transition-colors cursor-pointer"}," æˆ‘å·²ä»˜æ¬¾ ")):u("",!0),o==="mark_seller_received"?(s(),a("button",{key:4,onClick:t[22]||(t[22]=p=>A("mark_seller_received")),class:"px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white text-xs font-medium rounded transition-colors cursor-pointer"}," ç¡®è®¤æ”¶æ¬¾ ")):u("",!0),o==="cancel"?(s(),a("button",{key:5,onClick:t[23]||(t[23]=p=>A("cancel")),class:"px-3 py-1.5 bg-gray-600 hover:bg-gray-700 text-white text-xs font-medium rounded transition-colors cursor-pointer"}," å–æ¶ˆè®¢å• ")):u("",!0)],64))),128)),r.availableActions.includes("create_dispute")?(s(),a("button",{key:0,onClick:t[24]||(t[24]=o=>A("create_dispute")),class:"px-3 py-1.5 bg-amber-600 hover:bg-amber-700 text-white text-xs font-medium rounded transition-colors cursor-pointer"}," å‘èµ·äº‰è®® ")):u("",!0),r.availableActions.includes("resolve_dispute")?(s(),a("button",{key:1,onClick:t[25]||(t[25]=o=>A("resolve_dispute")),class:"px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white text-xs font-medium rounded transition-colors cursor-pointer"}," è§£é™¤äº‰è®® ")):u("",!0)]),r.order.status!=="cancelled"&&r.order.status!=="completed"?(s(),a("a",{key:0,href:"/notifications/settings",target:"_blank",class:x(["inline-flex items-center gap-1 px-3 py-1 text-xs rounded transition-colors cursor-pointer",l.$page.props.auth.user?.telegram_chat_id?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 hover:bg-emerald-200 dark:hover:bg-emerald-900/50":"bg-blue-500 hover:bg-blue-600 text-white"])},[l.$page.props.auth.user?.telegram_chat_id?(s(),a("svg",od,[...t[153]||(t[153]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(s(),a("svg",ld,[...t[154]||(t[154]=[e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.56c-.21 2.27-1.13 7.75-1.6 10.29-.2 1.08-.59 1.44-.97 1.47-.82.07-1.45-.54-2.24-.99-1.24-.71-1.94-1.16-3.14-1.85-1.39-.8-.49-1.24.3-1.96.21-.19 3.85-3.52 3.91-3.82.01-.04.01-.19-.07-.27-.08-.08-.2-.05-.28-.03-.12.03-2.02.13-5.7 3.75-.54.54-1.03.8-1.48.78-.49-.02-1.42-.27-2.11-.5-.85-.28-1.53-.42-1.47-.89.03-.25.37-.51 1.02-.77 4-1.74 6.67-2.89 8.01-3.44 3.81-1.57 4.61-1.84 5.13-1.85.11 0 .37.03.53.18.14.12.18.28.2.45-.01.06-.01.24-.02.38z"},null,-1)])])),_(" "+d(l.$page.props.auth.user?.telegram_chat_id?"å·²å¼€å¯é€šçŸ¥":"è®¾ç½®å®æ—¶é€šçŸ¥"),1)],2)):u("",!0)])):u("",!0),e("div",dd,[e("div",nd,[e("div",id,[e("div",{class:x([Se(r.order.escrow_status),"w-2 h-2 rounded-full animate-pulse"])},null,2),e("span",ud,d(Ae(r.order.escrow_status)),1)]),e("div",cd,[e("span",null,"è®¢å• #"+d(r.order.trade_id),1),e("span",null,d(r.order.crypto_amount)+" "+d(r.order.currency_label||r.order.currency_key),1),e("span",md,"Â¥"+d(r.order.fiat_amount),1)])])])])]),e("div",xd,[r.order.ad_snapshot?.vendor_toc?(s(),a("div",gd,[t[155]||(t[155]=e("div",{class:"flex items-center gap-2 mb-3"},[e("svg",{class:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("h3",{class:"text-sm font-bold text-gray-900 dark:text-gray-100"},"äº¤æ˜“æ¡æ¬¾")],-1)),e("div",vd,[e("p",bd,d(r.order.ad_snapshot?.vendor_toc||"æ— äº¤æ˜“æ¡æ¬¾"),1)]),t[156]||(t[156]=e("div",{class:"mt-3 p-2 bg-amber-50 dark:bg-amber-900/20 rounded border border-amber-200 dark:border-amber-800"},[e("div",{class:"flex items-start gap-2"},[e("svg",{class:"w-4 h-4 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),e("p",{class:"text-xs text-amber-700 dark:text-amber-300"}," è¯·ä»”ç»†é˜…è¯»å¹¶éµå®ˆä»¥ä¸Šäº¤æ˜“æ¡æ¬¾ï¼Œè¿åæ¡æ¬¾å¯èƒ½å¯¼è‡´äº¤æ˜“å–æ¶ˆ ")])],-1))])):u("",!0)])])]),e("div",yd,[e("div",{ref_key:"mobileMessageContainer",ref:j,class:"flex-1 overflow-y-auto overscroll-contain bg-white dark:bg-gray-950"},[!v.value&&k.value?(s(),a("div",fd,[...t[157]||(t[157]=[e("div",{class:"flex items-center justify-center gap-2"},[e("svg",{class:"animate-spin h-4 w-4 text-amber-600 dark:text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("span",{class:"text-xs text-amber-700 dark:text-amber-300"},"é‡æ–°è¿æ¥ä¸­...")],-1)])])):u("",!0),e("div",kd,[e("div",pd,[e("div",hd,d(new Date(r.order.created_at).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})),1),t[158]||(t[158]=e("div",{class:"px-3 py-1 bg-gray-100 dark:bg-gray-800 rounded text-xs text-gray-500 dark:text-gray-400"}," è®¢å•å·²åˆ›å»ºï¼Œç­‰å¾…å•†å®¶ç¡®è®¤ ",-1))]),t[170]||(t[170]=e("div",{class:"mb-4 mx-4"},[e("div",{class:"bg-amber-50 dark:bg-amber-900/20 rounded p-3 border border-amber-200 dark:border-amber-800"},[e("div",{class:"flex items-start gap-2"},[e("svg",{class:"w-4 h-4 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),e("div",{class:"text-xs"},[e("p",{class:"font-medium text-amber-700 dark:text-amber-300 mb-1"},"å®‰å…¨æé†’"),e("p",{class:"text-amber-600 dark:text-amber-400"},"è¯·å‹¿ç›¸ä¿¡ä»»ä½•å¹³å°å¤–çš„äº¤æ˜“é‚€è¯·ï¼Œè°¨é˜²è¯ˆéª—ã€‚ä»»ä½•å¹³å°ä»¥å¤–çš„äº¤æµéƒ½æ— æ³•ä½œä¸ºäº‰è®®ææ–™ã€‚")])])])],-1)),r.order.ad_snapshot?.welcome_message?(s(),a("div",wd,[e("div",_d,[t[162]||(t[162]=e("div",{class:"flex items-center gap-2 mb-2"},[e("svg",{class:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 3a1 1 0 00-1.447-.894L8.763 6H5a3 3 0 000 6h.28l1.771 5.316A1 1 0 008 18h1a1 1 0 001-1v-4.382l6.553 3.276A1 1 0 0018 15V3z","clip-rule":"evenodd"})]),e("span",{class:"text-xs font-medium text-blue-700 dark:text-blue-300"},"å•†å®¶å…¬å‘Š")],-1)),e("p",Cd,d(r.order.ad_snapshot.welcome_message),1),r.order.vendor?.response_time?(s(),a("div",$d,[e("div",Md,[t[161]||(t[161]=e("svg",{class:"w-3.5 h-3.5 text-blue-500 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",zd,[t[159]||(t[159]=_(" è¯¥å•†å®¶çš„å“åº”æ—¶é—´æ˜¯ ",-1)),e("span",Bd,d(r.order.vendor.response_time)+" åˆ†é’Ÿ",1),t[160]||(t[160]=_("ï¼Œè¯·åœ¨è¯¥æ—¶é—´å†…ç­‰å¾…å•†å®¶åŠ å…¥èŠå¤©å®¤ã€‚ ",-1))])])])):u("",!0)])])):u("",!0),r.order.vendor?.response_time&&!r.order.ad_snapshot?.welcome_message?(s(),a("div",jd,[e("div",Fd,[e("div",Ad,[t[165]||(t[165]=e("svg",{class:"w-3.5 h-3.5 text-blue-500 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",Sd,[t[163]||(t[163]=_(" è¯¥å•†å®¶çš„å“åº”æ—¶é—´æ˜¯ ",-1)),e("span",Ld,d(r.order.vendor.response_time)+" åˆ†é’Ÿ",1),t[164]||(t[164]=_("ï¼Œè¯·åœ¨è¯¥æ—¶é—´å†…ç­‰å¾…å•†å®¶åŠ å…¥èŠå¤©å®¤ã€‚ ",-1))])])])])):u("",!0),(s(!0),a(E,null,R(m.value,o=>(s(),a("div",{key:o.id,class:x(["flex",o.type==="system"?"justify-center":"gap-2",o.type!=="system"&&o.user?.id===l.$page.props.auth.user?.id?"justify-end":""])},[o.type==="system"?(s(),a("div",Vd,[e("div",Ed,d(P(o.created_at)),1),e("div",{class:x(["px-3 py-1 rounded text-xs",o.is_temporary?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400"])},[o.user?(s(),a("span",Id,d(o.user.name),1)):u("",!0),_(" "+d(o.message||o.content),1)],2),o.show_review_button?(s(),a("div",Pd,[n.value.has_review?(s(),a("div",Dd,[...t[169]||(t[169]=[e("div",{class:"flex items-center justify-center gap-2"},[e("svg",{class:"w-5 h-5 text-emerald-600 dark:text-emerald-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),e("span",{class:"text-sm font-medium text-emerald-800 dark:text-emerald-300"},"æ‚¨å·²è¯„ä»·æ­¤äº¤æ˜“")],-1)])])):(s(),a("div",Td,[e("div",Ud,[t[168]||(t[168]=e("div",{class:"flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-amber-600 dark:text-amber-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]),e("span",{class:"text-sm font-medium text-amber-800 dark:text-amber-300"},"è¯·è¯„ä»·æœ¬æ¬¡äº¤æ˜“")],-1)),M(O,{onClick:t[26]||(t[26]=p=>b.value=!0),variant:"warning",size:"sm",fullWidth:""},{icon:z(()=>[...t[166]||(t[166]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1)])]),default:z(()=>[t[167]||(t[167]=_(" ç«‹å³è¯„ä»· ",-1))]),_:1})])]))])):u("",!0)])):o.user?.id!==l.$page.props.auth.user?.id?(s(),a(E,{key:1},[e("a",{href:`/trader/profile/${o.user.id}`,target:"_blank",class:"h-7 w-7 rounded-full flex-shrink-0 hover:opacity-80 transition-opacity cursor-pointer"},[o.user.profile_photo_url?(s(),a("img",{key:0,src:o.user.profile_photo_url,alt:o.user.name,class:"h-7 w-7 rounded-full object-cover border border-gray-200 dark:border-gray-700"},null,8,Rd)):(s(),a("div",Hd,[e("span",Wd,d(o.user.name.charAt(0)),1)]))],8,qd),e("div",Od,[e("p",Nd,[_(d(o.user.name)+" ",1),o.type==="admin"?(s(),a("span",Kd,"(Admin)")):u("",!0)]),e("div",Jd,[o.attachment?(s(),a("div",Xd,[M(ve,{attachment:o.attachment,variant:"default","thumbnail-size":"sm"},null,8,["attachment"])])):u("",!0),o.message?(s(),a("p",Gd,d(o.message),1)):u("",!0)]),e("p",Qd,d(P(o.created_at)),1)])],64)):(s(),a(E,{key:2},[e("div",Zd,[e("p",Yd,[_(d(o.user.name)+" ",1),o.type==="admin"?(s(),a("span",en,"(Admin)")):u("",!0)]),e("div",tn,[o.attachment?(s(),a("div",rn,[M(ve,{attachment:o.attachment,variant:"primary","thumbnail-size":"sm"},null,8,["attachment"])])):u("",!0),o.message?(s(),a("p",sn,d(o.message),1)):u("",!0)]),e("p",an,d(P(o.created_at)),1)]),l.$page.props.auth.user?.profile_photo_url?(s(),a("img",{key:0,src:l.$page.props.auth.user.profile_photo_url,alt:l.$page.props.auth.user.name,class:"h-7 w-7 rounded-full object-cover border border-gray-200 dark:border-gray-700 flex-shrink-0"},null,8,on)):(s(),a("div",ln,[e("span",dn,d(l.$page.props.auth.user?.name?.charAt(0).toUpperCase()||"U"),1)]))],64))],2))),128))])],512),e("div",nn,[e("div",un,[B.value||F.value?(s(),a("div",cn,[F.value?(s(),a("div",mn,[...t[171]||(t[171]=[e("div",{class:"flex-shrink-0"},[e("div",{class:"animate-spin h-12 w-12 border-4 border-blue-600 border-t-transparent rounded-full"})],-1),e("div",{class:"flex-1 min-w-0"},[e("p",{class:"text-sm font-medium text-gray-900 dark:text-gray-200"},"æ­£åœ¨å‹ç¼©å›¾ç‰‡..."),e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"ä¼˜åŒ–ä¸­")],-1)])])):B.value?(s(),a("div",xn,[e("div",gn,[T.value&&B.value.type.startsWith("image/")?(s(),a("img",{key:0,src:T.value,class:"w-12 h-12 object-cover rounded border",alt:"é¢„è§ˆ"},null,8,vn)):(s(),a("div",bn,[...t[172]||(t[172]=[e("svg",{class:"w-6 h-6 text-gray-500 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-5L9 2H4z","clip-rule":"evenodd"})],-1)])]))]),e("div",yn,[e("p",fn,d(B.value.name),1),e("p",kn,d(Le(B.value.size)),1)]),e("button",{onClick:_e,type:"button",class:"flex-shrink-0 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors"},[...t[173]||(t[173]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):u("",!0)])):u("",!0),e("form",{onSubmit:K(Ee,["prevent"]),class:"flex items-center gap-1"},[e("input",{ref_key:"mobileFileInput",ref:f,type:"file",onChange:Ve,accept:".pdf,image/*","data-max-size":"2097152",class:"hidden"},null,544),e("div",pn,[e("button",{type:"button",onClick:t[27]||(t[27]=o=>!J.value&&!F.value&&l.$refs.mobileFileInput.click()),disabled:J.value||F.value,class:"p-2 rounded text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[...t[174]||(t[174]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1)])],8,hn),M(De,{onSelect:t[28]||(t[28]=o=>C.value+=o),disabled:J.value,placement:"top"},null,8,["disabled"])]),N(e("input",{"onUpdate:modelValue":t[29]||(t[29]=o=>C.value=o),type:"text",placeholder:J.value?"äº¤æ˜“å·²ç»“æŸ":"è¾“å…¥æ¶ˆæ¯...",class:"flex-1 px-3 py-2 bg-gray-100 dark:bg-gray-800 border-0 rounded text-sm text-gray-900 dark:text-gray-200 placeholder-gray-500 dark:placeholder-gray-400 focus:bg-white dark:focus:bg-gray-700 focus:ring-2 focus:ring-emerald-500 focus:outline-none disabled:opacity-50 transition-colors",disabled:!v.value||J.value},null,8,wn),[[te,C.value]]),e("button",{type:"submit",disabled:!C.value.trim()&&!B.value||!v.value||w.value||J.value,class:"px-3 py-2 bg-emerald-600 disabled:bg-gray-400 text-white rounded font-medium text-sm transition-colors"},[w.value?(s(),a("svg",Cn,[...t[175]||(t[175]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(s(),a("span",$n,"å‘é€"))],8,_n)],32),r.availableActions.length>0&&r.order.status!=="completed"&&r.order.status!=="cancelled"&&r.order.escrow_status!=="escrow_released"||r.order.status!=="cancelled"&&r.order.status!=="completed"?(s(),a("div",Mn,[e("div",zn,[(s(!0),a(E,null,R(r.availableActions,o=>(s(),a(E,{key:o},[o==="vendor_confirm"?(s(),a("button",{key:0,onClick:t[30]||(t[30]=p=>A("vendor_confirm")),class:"px-3 py-1.5 bg-emerald-600 text-white text-xs font-medium rounded whitespace-nowrap cursor-pointer"}," ç¡®è®¤è®¢å• ")):u("",!0),o==="mark_seller_paid"?(s(),a("button",{key:1,onClick:t[31]||(t[31]=p=>A("mark_seller_paid")),class:"px-3 py-1.5 bg-emerald-600 text-white text-xs font-medium rounded whitespace-nowrap cursor-pointer"}," æˆ‘å·²è½¬å¸ ")):u("",!0),o==="confirm_escrow"?(s(),a("button",{key:2,onClick:t[32]||(t[32]=p=>A("confirm_escrow")),class:"px-3 py-1.5 bg-emerald-600 text-white text-xs font-medium rounded whitespace-nowrap cursor-pointer"}," ç¡®è®¤æ‰˜ç®¡ ")):u("",!0),o==="mark_buyer_paid"?(s(),a("button",{key:3,onClick:t[33]||(t[33]=p=>A("mark_buyer_paid")),class:"px-3 py-1.5 bg-emerald-600 text-white text-xs font-medium rounded whitespace-nowrap cursor-pointer"}," æˆ‘å·²ä»˜æ¬¾ ")):u("",!0),o==="mark_seller_received"?(s(),a("button",{key:4,onClick:t[34]||(t[34]=p=>A("mark_seller_received")),class:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded whitespace-nowrap cursor-pointer"}," ç¡®è®¤æ”¶æ¬¾ ")):u("",!0),o==="cancel"?(s(),a("button",{key:5,onClick:t[35]||(t[35]=p=>A("cancel")),class:"px-3 py-1.5 bg-gray-600 text-white text-xs font-medium rounded whitespace-nowrap cursor-pointer"}," å–æ¶ˆè®¢å• ")):u("",!0)],64))),128)),r.availableActions.includes("create_dispute")?(s(),a("button",{key:0,onClick:t[36]||(t[36]=o=>A("create_dispute")),class:"px-3 py-1.5 bg-amber-600 text-white text-xs font-medium rounded whitespace-nowrap cursor-pointer"}," å‘èµ·äº‰è®® ")):u("",!0),r.availableActions.includes("resolve_dispute")?(s(),a("button",{key:1,onClick:t[37]||(t[37]=o=>A("resolve_dispute")),class:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded whitespace-nowrap cursor-pointer"}," è§£é™¤äº‰è®® ")):u("",!0)]),r.order.status!=="cancelled"&&r.order.status!=="completed"?(s(),a("a",{key:0,href:"/notifications/settings",target:"_blank",class:x(["px-3 py-1.5 rounded inline-flex items-center justify-center cursor-pointer",l.$page.props.auth.user?.telegram_chat_id?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"bg-blue-500 text-white"]),title:l.$page.props.auth.user?.telegram_chat_id?"Telegram é€šçŸ¥å·²å¼€å¯":"è®¾ç½® Telegram é€šçŸ¥"},[...t[176]||(t[176]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.56c-.21 2.27-1.13 7.75-1.6 10.29-.2 1.08-.59 1.44-.97 1.47-.82.07-1.45-.54-2.24-.99-1.24-.71-1.94-1.16-3.14-1.85-1.39-.8-.49-1.24.3-1.96.21-.19 3.85-3.52 3.91-3.82.01-.04.01-.19-.07-.27-.08-.08-.2-.05-.28-.03-.12.03-2.02.13-5.7 3.75-.54.54-1.03.8-1.48.78-.49-.02-1.42-.27-2.11-.5-.85-.28-1.53-.42-1.47-.89.03-.25.37-.51 1.02-.77 4-1.74 6.67-2.89 8.01-3.44 3.81-1.57 4.61-1.84 5.13-1.85.11 0 .37.03.53.18.14.12.18.28.2.45-.01.06-.01.24-.02.38z"})],-1)])],10,Bn)):u("",!0)])):u("",!0),e("div",{onClick:t[38]||(t[38]=o=>y.value=!0),class:"mt-2 p-2 bg-gray-50 dark:bg-gray-800/50 rounded border border-gray-200 dark:border-gray-700 cursor-pointer active:bg-gray-100 dark:active:bg-gray-800 transition-colors"},[e("div",jn,[e("div",Fn,[e("div",{class:x([Se(r.order.escrow_status),"w-2 h-2 rounded-full animate-pulse"])},null,2),e("span",An,d(Ae(r.order.escrow_status)),1)]),e("div",Sn,[e("span",Ln,d(r.order.crypto_amount)+" "+d(r.order.currency_label||r.order.currency_key),1),t[177]||(t[177]=e("svg",{class:"w-4 h-4 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])])])])])])])]),M(se,{show:i.value.show&&i.value.pendingAction!=="confirm_escrow"&&i.value.pendingAction!=="mark_buyer_paid"&&i.value.pendingAction!=="mark_seller_received"&&i.value.pendingAction!=="mark_seller_paid",title:i.value.title,"confirm-text":i.value.confirmText,"cancel-text":i.value.cancelText,loading:i.value.loading,onConfirm:t[40]||(t[40]=()=>Ne(i.value.inputValue)),onClose:oe},{default:z(()=>[i.value.message?(s(),a("div",Vn,d(i.value.message),1)):u("",!0),i.value.inputMode?(s(),a("div",En,[i.value.inputLabel?(s(),a("label",In,d(i.value.inputLabel),1)):u("",!0),N(e("input",{"onUpdate:modelValue":t[39]||(t[39]=o=>i.value.inputValue=o),type:"text",placeholder:i.value.inputPlaceholder,required:i.value.inputRequired,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"},null,8,Pn),[[te,i.value.inputValue]])])):u("",!0)]),_:1},8,["show","title","confirm-text","cancel-text","loading"]),M(se,{show:i.value.pendingAction==="confirm_escrow"&&i.value.show,title:"ç¡®è®¤æ‰˜ç®¡åˆ°è´¦",subtitle:"è¯·ä»”ç»†æ ¸å¯¹æ‰˜ç®¡äº¤æ˜“ä¿¡æ¯","icon-color":"amber","requires-agreement":!0,"agreement-disabled":!we.value,"agreement-text":we.value?"æˆ‘å·²æ ¸å¯¹æ‰€æœ‰ä¿¡æ¯æ— è¯¯ï¼Œç¡®è®¤æ‰˜ç®¡å·²åˆ°è´¦":"è¯·å…ˆå‹¾é€‰ä¸Šæ–¹æ‰€æœ‰ç¡®è®¤é¡¹","confirm-text":"ç¡®è®¤æ‰˜ç®¡åˆ°è´¦","cancel-text":"è¿”å›æ£€æŸ¥",loading:i.value.loading,persistent:i.value.loading,onConfirm:Je,onClose:oe},{default:z(()=>[e("div",Tn,[e("div",Un,[e("div",Dn,[n.value.seller_address?(s(),a("div",qn,[t[178]||(t[178]=e("label",{class:"text-xs text-gray-500 dark:text-gray-400"},"æ¥æºåœ°å€ï¼ˆå–å®¶ï¼‰",-1)),e("p",Rn,d(n.value.seller_address),1)])):u("",!0),e("div",null,[t[179]||(t[179]=e("label",{class:"text-xs text-gray-500 dark:text-gray-400"},"æ‰˜ç®¡åœ°å€",-1)),e("p",Hn,d(n.value.escrow_address),1)]),e("div",null,[t[180]||(t[180]=e("label",{class:"text-xs text-gray-500 dark:text-gray-400"},"äº¤æ˜“é‡‘é¢",-1)),e("p",Wn,d(parseFloat(n.value.crypto_amount).toFixed(4))+" "+d(n.value.currency_label||n.value.currency_key||n.value.crypto_currency),1)]),n.value.escrow_tx_hash?(s(),a("div",On,[t[181]||(t[181]=e("label",{class:"text-xs text-gray-500 dark:text-gray-400"},"äº¤æ˜“å“ˆå¸Œ",-1)),e("p",Nn,d(n.value.escrow_tx_hash),1)])):u("",!0)])]),t[189]||(t[189]=e("div",{class:"p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded"},[e("div",{class:"flex items-start gap-2"},[e("svg",{class:"w-4 h-4 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),e("div",{class:"text-xs"},[e("p",{class:"font-medium text-amber-800 dark:text-amber-300"},"è¯·æ‰“å¼€åŒºå—é“¾æµè§ˆå™¨ä»”ç»†æ ¸å¯¹"),e("p",{class:"text-amber-700 dark:text-amber-400 mt-1"}," ç¡®è®¤å‰å¿…é¡»é€é¡¹æ£€æŸ¥ä»¥ä¸‹æ‰€æœ‰ä¿¡æ¯ ")])])],-1)),e("div",Kn,[t[188]||(t[188]=e("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"è¯·ç¡®è®¤ä»¥ä¸‹æ‰€æœ‰é¡¹ç›®ï¼š",-1)),e("div",Jn,[e("div",Xn,[N(e("input",{"onUpdate:modelValue":t[41]||(t[41]=o=>D.value.txExists=o),type:"checkbox",class:"mt-0.5 h-4 w-4 text-emerald-600 bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 rounded focus:ring-emerald-500 focus:ring-2",disabled:i.value.loading},null,8,Gn),[[re,D.value.txExists]]),t[182]||(t[182]=e("label",{class:"ml-2 text-sm text-gray-700 dark:text-gray-300"}," æˆ‘å·²æ‰“å¼€åŒºå—é“¾æµè§ˆå™¨ï¼Œç¡®è®¤äº¤æ˜“è®°å½•å­˜åœ¨ ",-1))]),e("div",Qn,[N(e("input",{"onUpdate:modelValue":t[42]||(t[42]=o=>D.value.confirmations=o),type:"checkbox",class:"mt-0.5 h-4 w-4 text-emerald-600 bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 rounded focus:ring-emerald-500 focus:ring-2",disabled:i.value.loading},null,8,Zn),[[re,D.value.confirmations]]),t[183]||(t[183]=e("label",{class:"ml-2 text-sm text-gray-700 dark:text-gray-300"}," äº¤æ˜“å·²æœ‰è¶³å¤Ÿçš„ç¡®è®¤æ•°ï¼ˆå»ºè®®è‡³å°‘6ä¸ªç¡®è®¤ï¼‰ ",-1))]),e("div",Yn,[N(e("input",{"onUpdate:modelValue":t[43]||(t[43]=o=>D.value.fromAddress=o),type:"checkbox",class:"mt-0.5 h-4 w-4 text-emerald-600 bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 rounded focus:ring-emerald-500 focus:ring-2",disabled:i.value.loading},null,8,ei),[[re,D.value.fromAddress]]),e("label",ti,[t[184]||(t[184]=_(" æ¥æºåœ°å€ä¸å–å®¶åœ°å€å®Œå…¨ä¸€è‡´ ",-1)),e("span",ri,d(n.value.seller_address||"æ— å–å®¶åœ°å€"),1)])]),e("div",si,[N(e("input",{"onUpdate:modelValue":t[44]||(t[44]=o=>D.value.toAddress=o),type:"checkbox",class:"mt-0.5 h-4 w-4 text-emerald-600 bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 rounded focus:ring-emerald-500 focus:ring-2",disabled:i.value.loading},null,8,ai),[[re,D.value.toAddress]]),e("label",oi,[t[185]||(t[185]=_(" ç›®æ ‡åœ°å€ä¸æ‰˜ç®¡åœ°å€å®Œå…¨ä¸€è‡´ ",-1)),e("span",li,d(n.value.escrow_address),1)])]),e("div",di,[N(e("input",{"onUpdate:modelValue":t[45]||(t[45]=o=>D.value.amount=o),type:"checkbox",class:"mt-0.5 h-4 w-4 text-emerald-600 bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 rounded focus:ring-emerald-500 focus:ring-2",disabled:i.value.loading},null,8,ni),[[re,D.value.amount]]),e("label",ii,[t[186]||(t[186]=_(" äº¤æ˜“é‡‘é¢ä¸º ",-1)),e("span",ui,d(parseFloat(n.value.crypto_amount).toFixed(4))+" "+d(n.value.currency_label||n.value.currency_key||n.value.crypto_currency),1),t[187]||(t[187]=_("ï¼Œå®Œå…¨æ­£ç¡® ",-1))])])])]),t[190]||(t[190]=e("div",{class:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded"},[e("div",{class:"flex items-start gap-2"},[e("svg",{class:"w-4 h-4 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),e("div",{class:"text-xs"},[e("p",{class:"font-bold text-red-800 dark:text-red-300"},"æœ€ç»ˆç¡®è®¤"),e("p",{class:"text-red-700 dark:text-red-400 mt-1"}," ç¡®è®¤åæ‚¨å°†è¿›å…¥ä»˜æ¬¾é˜¶æ®µï¼Œå¿…é¡»æŒ‰æ—¶å®Œæˆä»˜æ¬¾ã€‚å¦‚ä¿¡æ¯æœ‰è¯¯å¯¼è‡´çš„æŸå¤±ï¼Œè´£ä»»è‡ªè´Ÿï¼ ")])])],-1))])]),_:1},8,["show","agreement-disabled","agreement-text","loading","persistent"]),M(se,{show:i.value.pendingAction==="mark_seller_paid"&&i.value.show,title:"æ ‡è®°å·²è½¬å¸åˆ°æ‰˜ç®¡",subtitle:"è¯·ç¡®è®¤æ‚¨å·²å°†å¸è½¬å…¥æ‰˜ç®¡åœ°å€","icon-color":"blue","requires-agreement":!0,"agreement-text":"æˆ‘å·²ä»”ç»†æ ¸å¯¹é‡‘é¢å’Œåœ°å€ï¼Œç¡®è®¤è½¬å¸ä¿¡æ¯æ— è¯¯","confirm-text":"ç¡®è®¤å·²è½¬å¸","cancel-text":"è¿”å›",loading:i.value.loading,persistent:i.value.loading,onConfirm:Xe,onClose:oe},{default:z(()=>[e("div",ci,[e("div",null,[t[191]||(t[191]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[_(" äº¤æ˜“å“ˆå¸Œ (TX ID) "),e("span",{class:"text-red-500"},"*")],-1)),N(e("input",{"onUpdate:modelValue":t[46]||(t[46]=o=>Y.value=o),type:"text",placeholder:"è¯·è¾“å…¥åŒºå—é“¾äº¤æ˜“å“ˆå¸Œ...",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",disabled:i.value.loading},null,8,mi),[[te,Y.value]]),t[192]||(t[192]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," è½¬å¸åè¯·æä¾›äº¤æ˜“å“ˆå¸Œä½œä¸ºå‡­è¯ ",-1))]),n.value.seller_address?(s(),a("div",xi,[e("div",gi,[e("div",null,[t[193]||(t[193]=e("label",{class:"text-xs text-gray-500 dark:text-gray-400"},"æ‚¨çš„åœ°å€ï¼ˆæ¥æºåœ°å€ï¼‰",-1)),e("p",vi,d(n.value.seller_address),1)]),e("div",null,[t[194]||(t[194]=e("label",{class:"text-xs text-gray-500 dark:text-gray-400"},"æ‰˜ç®¡åœ°å€ï¼ˆè½¬å…¥åœ°å€ï¼‰",-1)),e("p",bi,d(n.value.escrow_address),1)]),e("div",null,[t[195]||(t[195]=e("label",{class:"text-xs text-gray-500 dark:text-gray-400"},"è½¬å¸é‡‘é¢",-1)),e("p",yi,d(parseFloat(n.value.crypto_amount).toFixed(4))+" "+d(n.value.currency_label||n.value.currency_key||n.value.crypto_currency),1)])])])):u("",!0),t[196]||(t[196]=e("div",{class:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded"},[e("div",{class:"flex items-start gap-2"},[e("svg",{class:"w-4 h-4 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),e("div",{class:"text-xs"},[e("p",{class:"font-bold text-red-800 dark:text-red-300 text-sm"},"æå…¶é‡è¦ï¼è¯·ä»”ç»†æ ¸å¯¹ï¼"),e("ul",{class:"mt-1 space-y-1 text-red-700 dark:text-red-400"},[e("li",null,"â€¢ è¯·ç¡®ä¿è½¬å¸åœ°å€å®Œå…¨æ­£ç¡®"),e("li",null,[_("â€¢ "),e("span",{class:"font-bold"},"è¯·ä¸€å®šè¦ç¡®ä¿é‡‘é¢æ˜¯ä¸€æ¬¡æ€§ä»æ‚¨çš„åœ°å€è½¬å…¥ï¼Œå¦åˆ™ç³»ç»Ÿæ— æ³•ç¡®è®¤")]),e("li",null,"â€¢ è¯·ç¡®ä¿è½¬å¸é‡‘é¢å‡†ç¡®æ— è¯¯"),e("li",null,[_("â€¢ "),e("span",{class:"font-bold"},"å¦‚æœåœ°å€æˆ–é‡‘é¢é”™è¯¯ï¼Œæ‰˜ç®¡å°†æ— æ³•ç¡®è®¤ï¼")]),e("li",null,[_("â€¢ "),e("span",{class:"font-bold text-red-800 dark:text-red-200"},"ä»»ä½•æŸå¤±æ¦‚ä¸è´Ÿè´£ï¼")])])])])],-1))])]),_:1},8,["show","loading","persistent"]),M(se,{show:i.value.pendingAction==="mark_buyer_paid"&&i.value.show,title:"æ ‡è®°å·²ä»˜æ¬¾",subtitle:`è¯·ç¡®è®¤æ‚¨å·²å‘å–å®¶ä»˜æ¬¾ Â¥${parseFloat(r.order.fiat_amount).toFixed(2)}`,"icon-color":"emerald","requires-agreement":r.userHas2FA,"agreement-disabled":r.userHas2FA&&(!i.value.twoFactorCode||i.value.twoFactorCode.length!==6),"agreement-text":r.userHas2FA?i.value.twoFactorCode&&i.value.twoFactorCode.length===6?"æˆ‘ç¡®è®¤å·²å®Œæˆä»˜æ¬¾ï¼Œç†è§£è™šå‡ä»˜æ¬¾å°†å¯¼è‡´è´¦æˆ·å°ç¦":"è¯·å…ˆè¾“å…¥6ä½éªŒè¯ç ":"","confirm-text":r.userHas2FA?"ç¡®è®¤å·²ä»˜æ¬¾":"å‰å¾€å¯ç”¨åŒé‡éªŒè¯","cancel-text":"è¿”å›",loading:i.value.loading,persistent:i.value.loading,onConfirm:t[49]||(t[49]=o=>r.userHas2FA?Ke():ze(W).visit("/user/profile#tab-2fa")),onClose:oe},{default:z(()=>[e("div",fi,[e("div",null,[t[197]||(t[197]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ä»˜æ¬¾è¯´æ˜ï¼ˆå¯é€‰ï¼‰ ",-1)),N(e("textarea",{"onUpdate:modelValue":t[47]||(t[47]=o=>Z.value=o),rows:"3",class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"è¯·è¾“å…¥ä»˜æ¬¾å‡­è¯æˆ–è¯´æ˜ï¼Œå¦‚è½¬è´¦å•å·...",disabled:i.value.loading},null,8,ki),[[te,Z.value]])]),r.userHas2FA?(s(),a("div",pi,[M(Ue,{modelValue:i.value.twoFactorCode,"onUpdate:modelValue":t[48]||(t[48]=o=>i.value.twoFactorCode=o),error:i.value.twoFactorError,disabled:i.value.loading,onComplete:Ie},null,8,["modelValue","error","disabled"])])):(s(),a("div",hi,[...t[198]||(t[198]=[e("div",{class:"flex items-start gap-2"},[e("svg",{class:"w-4 h-4 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),e("div",{class:"text-xs"},[e("p",{class:"font-medium text-amber-800 dark:text-amber-300"},"éœ€è¦åŒé‡éªŒè¯"),e("p",{class:"text-amber-700 dark:text-amber-400 mt-1"}," ä¸ºä¿æŠ¤æ‚¨çš„èµ„é‡‘å®‰å…¨ï¼Œä¹°å®¶ä»˜æ¬¾å¿…é¡»å¯ç”¨åŒé‡éªŒè¯ ")])],-1)])])),r.userHas2FA?(s(),a("div",wi,[...t[199]||(t[199]=[e("div",{class:"flex items-start gap-2"},[e("svg",{class:"w-4 h-4 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})]),e("div",{class:"text-xs"},[e("p",{class:"font-medium text-red-800 dark:text-red-300"},"æ³¨æ„äº‹é¡¹"),e("p",{class:"text-red-700 dark:text-red-400 mt-1"}," è¯·ç¡®ä¿å·²å®Œæˆä»˜æ¬¾å†ç‚¹å‡»ç¡®è®¤ï¼Œè™šå‡ä»˜æ¬¾å°†å¯¼è‡´è´¦æˆ·å°ç¦ ")])],-1)])])):u("",!0)])]),_:1},8,["show","subtitle","requires-agreement","agreement-disabled","agreement-text","confirm-text","loading","persistent"]),M(se,{show:i.value.pendingAction==="mark_seller_received"&&i.value.show,title:"ç¡®è®¤æ”¶æ¬¾",subtitle:`è¯·ç¡®è®¤æ‚¨å·²æ”¶åˆ°ä¹°å®¶ä»˜æ¬¾ Â¥${parseFloat(r.order.fiat_amount).toFixed(2)}`,"icon-color":"emerald","requires-agreement":r.userHas2FA,"agreement-disabled":r.userHas2FA&&(!i.value.twoFactorCode||i.value.twoFactorCode.length!==6),"agreement-text":r.userHas2FA?i.value.twoFactorCode&&i.value.twoFactorCode.length===6?"æˆ‘ç¡®è®¤å·²æ”¶åˆ°æ¬¾é¡¹ï¼ŒåŒæ„é‡Šæ”¾æ‰˜ç®¡çš„åŠ å¯†è´§å¸ç»™ä¹°å®¶":"è¯·å…ˆè¾“å…¥6ä½éªŒè¯ç ":"","confirm-text":r.userHas2FA?"ç¡®è®¤æ”¶æ¬¾":"å‰å¾€å¯ç”¨åŒé‡éªŒè¯","cancel-text":"è¿”å›",loading:i.value.loading,persistent:i.value.loading,onConfirm:t[51]||(t[51]=o=>r.userHas2FA?Ge():ze(W).visit("/user/profile#tab-2fa")),onClose:oe},{default:z(()=>[e("div",_i,[r.userHas2FA?(s(),a("div",Ci,[M(Ue,{modelValue:i.value.twoFactorCode,"onUpdate:modelValue":t[50]||(t[50]=o=>i.value.twoFactorCode=o),error:i.value.twoFactorError,disabled:i.value.loading,onComplete:Ie},null,8,["modelValue","error","disabled"])])):(s(),a("div",$i,[...t[200]||(t[200]=[e("div",{class:"flex items-start gap-2"},[e("svg",{class:"w-4 h-4 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),e("div",{class:"text-xs"},[e("p",{class:"font-medium text-amber-800 dark:text-amber-300"},"éœ€è¦åŒé‡éªŒè¯"),e("p",{class:"text-amber-700 dark:text-amber-400 mt-1"}," ä¸ºä¿æŠ¤æ‚¨çš„èµ„é‡‘å®‰å…¨ï¼Œå–å®¶ç¡®è®¤æ”¶æ¬¾å¿…é¡»å¯ç”¨åŒé‡éªŒè¯ ")])],-1)])])),r.userHas2FA?(s(),a("div",Mi,[...t[201]||(t[201]=[e("div",{class:"flex items-start gap-2"},[e("svg",{class:"w-4 h-4 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})]),e("div",{class:"text-xs"},[e("p",{class:"font-medium text-red-800 dark:text-red-300"},"é‡è¦æé†’"),e("p",{class:"text-red-700 dark:text-red-400 mt-1"}," ç¡®è®¤æ”¶æ¬¾åï¼Œæ‰˜ç®¡çš„åŠ å¯†è´§å¸å°†ç«‹å³é‡Šæ”¾ç»™ä¹°å®¶ï¼Œæ­¤æ“ä½œä¸å¯æ’¤é”€ ")])],-1)])])):u("",!0)])]),_:1},8,["show","subtitle","requires-agreement","agreement-disabled","agreement-text","confirm-text","loading","persistent"]),M(Be,{modelValue:g.value,"onUpdate:modelValue":t[52]||(t[52]=o=>g.value=o),title:"å•†å®¶äº¤æ˜“æ¡æ¬¾",subtitle:`è®¢å• #${r.order.order_no}`,position:"bottom",size:"default","icon-color":"purple"},{"header-icon":z(()=>[...t[202]||(t[202]=[e("div",{class:"p-2 rounded bg-purple-100 dark:bg-purple-900/30"},[e("svg",{class:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)])]),default:z(()=>[e("div",zi,[r.order.ad_snapshot?.vendor_toc?(s(),a("div",Bi,[e("p",ji,d(r.order.ad_snapshot?.vendor_toc),1)])):(s(),a("div",Fi,[...t[203]||(t[203]=[e("p",{class:"text-sm text-gray-500 dark:text-gray-400 text-center"},"å•†å®¶æœªè®¾ç½®äº¤æ˜“æ¡æ¬¾",-1)])])),t[204]||(t[204]=e("div",{class:"mt-4 p-3 bg-amber-50 dark:bg-amber-900/20 rounded border border-amber-200 dark:border-amber-800"},[e("div",{class:"flex items-start gap-2"},[e("svg",{class:"w-4 h-4 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),e("p",{class:"text-xs text-amber-700 dark:text-amber-300"}," è¯·ä»”ç»†é˜…è¯»å¹¶éµå®ˆä»¥ä¸Šäº¤æ˜“æ¡æ¬¾ï¼Œè¿åæ¡æ¬¾å¯èƒ½å¯¼è‡´äº¤æ˜“å–æ¶ˆ ")])],-1))])]),_:1},8,["modelValue","subtitle"])]),_:1},8,["breadcrumbs"]),M(gr,{modelValue:b.value,"onUpdate:modelValue":t[53]||(t[53]=o=>b.value=o),"order-id":n.value.id,"order-no":n.value.order_no,"vendor-name":n.value.vendor?.name||"å•†å®¶","fiat-amount":n.value.fiat_amount,"fiat-currency":n.value.fiat_currency,"crypto-amount":n.value.crypto_amount,"crypto-currency":n.value.currency_key||n.value.crypto_currency,onSuccess:Oe},null,8,["modelValue","order-id","order-no","vendor-name","fiat-amount","fiat-currency","crypto-amount","crypto-currency"])],64))}};export{Pi as default};
