export const countriesWithPhoneCodes = [
    { code: 'cn', name: 'China', name_zh: '中国', flag: '🇨🇳', phone_code: '+86' },
    { code: 'us', name: 'United States', name_zh: '美国', flag: '🇺🇸', phone_code: '+1' },
    { code: 'ca', name: 'Canada', name_zh: '加拿大', flag: '🇨🇦', phone_code: '+1' },
    { code: 'uk', name: 'United Kingdom', name_zh: '英国', flag: '🇬🇧', phone_code: '+44' },
    { code: 'au', name: 'Australia', name_zh: '澳大利亚', flag: '🇦🇺', phone_code: '+61' },
    { code: 'sg', name: 'Singapore', name_zh: '新加坡', flag: '🇸🇬', phone_code: '+65' },
    { code: 'hk', name: 'Hong Kong', name_zh: '香港', flag: '🇭🇰', phone_code: '+852' },
    { code: 'tw', name: 'Taiwan', name_zh: '台湾', flag: '🇹🇼', phone_code: '+886' },
    { code: 'jp', name: 'Japan', name_zh: '日本', flag: '🇯🇵', phone_code: '+81' },
    { code: 'kr', name: 'South Korea', name_zh: '韩国', flag: '🇰🇷', phone_code: '+82' },
    { code: 'in', name: 'India', name_zh: '印度', flag: '🇮🇳', phone_code: '+91' },
    { code: 'de', name: 'Germany', name_zh: '德国', flag: '🇩🇪', phone_code: '+49' },
    { code: 'fr', name: 'France', name_zh: '法国', flag: '🇫🇷', phone_code: '+33' },
    { code: 'it', name: 'Italy', name_zh: '意大利', flag: '🇮🇹', phone_code: '+39' },
    { code: 'es', name: 'Spain', name_zh: '西班牙', flag: '🇪🇸', phone_code: '+34' },
    { code: 'ru', name: 'Russia', name_zh: '俄罗斯', flag: '🇷🇺', phone_code: '+7' },
    { code: 'br', name: 'Brazil', name_zh: '巴西', flag: '🇧🇷', phone_code: '+55' },
    { code: 'mx', name: 'Mexico', name_zh: '墨西哥', flag: '🇲🇽', phone_code: '+52' },
    { code: 'ae', name: 'United Arab Emirates', name_zh: '阿联酋', flag: '🇦🇪', phone_code: '+971' },
    { code: 'th', name: 'Thailand', name_zh: '泰国', flag: '🇹🇭', phone_code: '+66' },
    { code: 'vn', name: 'Vietnam', name_zh: '越南', flag: '🇻🇳', phone_code: '+84' },
    { code: 'ph', name: 'Philippines', name_zh: '菲律宾', flag: '🇵🇭', phone_code: '+63' },
    { code: 'my', name: 'Malaysia', name_zh: '马来西亚', flag: '🇲🇾', phone_code: '+60' },
    { code: 'id', name: 'Indonesia', name_zh: '印度尼西亚', flag: '🇮🇩', phone_code: '+62' },
    { code: 'nz', name: 'New Zealand', name_zh: '新西兰', flag: '🇳🇿', phone_code: '+64' },
    { code: 'ch', name: 'Switzerland', name_zh: '瑞士', flag: '🇨🇭', phone_code: '+41' },
    { code: 'nl', name: 'Netherlands', name_zh: '荷兰', flag: '🇳🇱', phone_code: '+31' },
    { code: 'se', name: 'Sweden', name_zh: '瑞典', flag: '🇸🇪', phone_code: '+46' },
    { code: 'no', name: 'Norway', name_zh: '挪威', flag: '🇳🇴', phone_code: '+47' },
    { code: 'dk', name: 'Denmark', name_zh: '丹麦', flag: '🇩🇰', phone_code: '+45' },
    { code: 'fi', name: 'Finland', name_zh: '芬兰', flag: '🇫🇮', phone_code: '+358' },
    { code: 'be', name: 'Belgium', name_zh: '比利时', flag: '🇧🇪', phone_code: '+32' },
    { code: 'at', name: 'Austria', name_zh: '奥地利', flag: '🇦🇹', phone_code: '+43' },
    { code: 'pl', name: 'Poland', name_zh: '波兰', flag: '🇵🇱', phone_code: '+48' },
    { code: 'cz', name: 'Czech Republic', name_zh: '捷克', flag: '🇨🇿', phone_code: '+420' },
    { code: 'ie', name: 'Ireland', name_zh: '爱尔兰', flag: '🇮🇪', phone_code: '+353' },
    { code: 'pt', name: 'Portugal', name_zh: '葡萄牙', flag: '🇵🇹', phone_code: '+351' },
    { code: 'gr', name: 'Greece', name_zh: '希腊', flag: '🇬🇷', phone_code: '+30' },
    { code: 'tr', name: 'Turkey', name_zh: '土耳其', flag: '🇹🇷', phone_code: '+90' },
    { code: 'sa', name: 'Saudi Arabia', name_zh: '沙特阿拉伯', flag: '🇸🇦', phone_code: '+966' },
    { code: 'za', name: 'South Africa', name_zh: '南非', flag: '🇿🇦', phone_code: '+27' },
    { code: 'eg', name: 'Egypt', name_zh: '埃及', flag: '🇪🇬', phone_code: '+20' },
    { code: 'ng', name: 'Nigeria', name_zh: '尼日利亚', flag: '🇳🇬', phone_code: '+234' },
    { code: 'ar', name: 'Argentina', name_zh: '阿根廷', flag: '🇦🇷', phone_code: '+54' },
    { code: 'cl', name: 'Chile', name_zh: '智利', flag: '🇨🇱', phone_code: '+56' },
    { code: 'co', name: 'Colombia', name_zh: '哥伦比亚', flag: '🇨🇴', phone_code: '+57' },
    { code: 'pe', name: 'Peru', name_zh: '秘鲁', flag: '🇵🇪', phone_code: '+51' },
    { code: 've', name: 'Venezuela', name_zh: '委内瑞拉', flag: '🇻🇪', phone_code: '+58' },
    { code: 'ua', name: 'Ukraine', name_zh: '乌克兰', flag: '🇺🇦', phone_code: '+380' },
    { code: 'ro', name: 'Romania', name_zh: '罗马尼亚', flag: '🇷🇴', phone_code: '+40' },
    { code: 'hu', name: 'Hungary', name_zh: '匈牙利', flag: '🇭🇺', phone_code: '+36' },
    { code: 'il', name: 'Israel', name_zh: '以色列', flag: '🇮🇱', phone_code: '+972' },
    { code: 'pk', name: 'Pakistan', name_zh: '巴基斯坦', flag: '🇵🇰', phone_code: '+92' },
    { code: 'bd', name: 'Bangladesh', name_zh: '孟加拉国', flag: '🇧🇩', phone_code: '+880' },
    { code: 'lk', name: 'Sri Lanka', name_zh: '斯里兰卡', flag: '🇱🇰', phone_code: '+94' },
    { code: 'mm', name: 'Myanmar', name_zh: '缅甸', flag: '🇲🇲', phone_code: '+95' },
    { code: 'kh', name: 'Cambodia', name_zh: '柬埔寨', flag: '🇰🇭', phone_code: '+855' },
    { code: 'mo', name: 'Macau', name_zh: '澳门', flag: '🇲🇴', phone_code: '+853' }
];

// 按中文名称排序
export const sortedCountriesWithPhoneCodes = [...countriesWithPhoneCodes].sort((a, b) =>
    a.name_zh.localeCompare(b.name_zh, 'zh-CN')
);

// 常用国家（可以放在列表顶部）
export const popularCountries = ['cn', 'us', 'au', 'sg', 'hk', 'jp', 'kr', 'uk', 'ca', 'tw'];

// 获取按人气排序的国家列表
export function getCountriesWithPopularFirst() {
    const popular = countriesWithPhoneCodes.filter(c => popularCountries.includes(c.code));
    const others = countriesWithPhoneCodes.filter(c => !popularCountries.includes(c.code));
    return [...popular, ...others];
}

// 根据电话号码找出对应的国家代码
export function findCountryByPhoneNumber(phoneNumber) {
    if (!phoneNumber) return null;

    // 按phone_code长度降序排序，确保更长的代码先匹配（如+1246比+1）
    const sortedByCodeLength = [...countriesWithPhoneCodes].sort((a, b) =>
        b.phone_code.length - a.phone_code.length
    );

    return sortedByCodeLength.find(country =>
        phoneNumber.startsWith(country.phone_code)
    );
}

// 格式化电话号码显示
export function formatPhoneNumber(phoneNumber) {
    if (!phoneNumber) return '';

    const country = findCountryByPhoneNumber(phoneNumber);
    if (!country) return phoneNumber;

    const localNumber = phoneNumber.substring(country.phone_code.length);

    // 根据不同国家格式化
    switch (country.code) {
        case 'cn':
            // 中国: +86 138 0000 0000
            return localNumber.replace(/(\d{3})(\d{4})(\d{4})/, `${country.phone_code} $1 $2 $3`);
        case 'us':
        case 'ca':
            // 美国/加拿大: +1 (555) 123-4567
            return localNumber.replace(/(\d{3})(\d{3})(\d{4})/, `${country.phone_code} ($1) $2-$3`);
        case 'au':
            // 澳大利亚: +61 4XX XXX XXX
            return localNumber.replace(/(\d{3})(\d{3})(\d{3})/, `${country.phone_code} $1 $2 $3`);
        case 'uk':
            // 英国: +44 20 1234 5678
            return localNumber.replace(/(\d{2})(\d{4})(\d{4})/, `${country.phone_code} $1 $2 $3`);
        case 'jp':
            // 日本: +81 90-1234-5678
            return localNumber.replace(/(\d{2})(\d{4})(\d{4})/, `${country.phone_code} $1-$2-$3`);
        default:
            // 默认格式: +XX XXX XXX XXXX
            return `${country.phone_code} ${localNumber}`;
    }
}

export default countriesWithPhoneCodes;