export const countriesWithPhoneCodes = [
    { code: 'cn', name: 'China', name_zh: 'ä¸­å›½', flag: 'ğŸ‡¨ğŸ‡³', phone_code: '+86' },
    { code: 'us', name: 'United States', name_zh: 'ç¾å›½', flag: 'ğŸ‡ºğŸ‡¸', phone_code: '+1' },
    { code: 'ca', name: 'Canada', name_zh: 'åŠ æ‹¿å¤§', flag: 'ğŸ‡¨ğŸ‡¦', phone_code: '+1' },
    { code: 'uk', name: 'United Kingdom', name_zh: 'è‹±å›½', flag: 'ğŸ‡¬ğŸ‡§', phone_code: '+44' },
    { code: 'au', name: 'Australia', name_zh: 'æ¾³å¤§åˆ©äºš', flag: 'ğŸ‡¦ğŸ‡º', phone_code: '+61' },
    { code: 'sg', name: 'Singapore', name_zh: 'æ–°åŠ å¡', flag: 'ğŸ‡¸ğŸ‡¬', phone_code: '+65' },
    { code: 'hk', name: 'Hong Kong', name_zh: 'é¦™æ¸¯', flag: 'ğŸ‡­ğŸ‡°', phone_code: '+852' },
    { code: 'tw', name: 'Taiwan', name_zh: 'å°æ¹¾', flag: 'ğŸ‡¹ğŸ‡¼', phone_code: '+886' },
    { code: 'jp', name: 'Japan', name_zh: 'æ—¥æœ¬', flag: 'ğŸ‡¯ğŸ‡µ', phone_code: '+81' },
    { code: 'kr', name: 'South Korea', name_zh: 'éŸ©å›½', flag: 'ğŸ‡°ğŸ‡·', phone_code: '+82' },
    { code: 'in', name: 'India', name_zh: 'å°åº¦', flag: 'ğŸ‡®ğŸ‡³', phone_code: '+91' },
    { code: 'de', name: 'Germany', name_zh: 'å¾·å›½', flag: 'ğŸ‡©ğŸ‡ª', phone_code: '+49' },
    { code: 'fr', name: 'France', name_zh: 'æ³•å›½', flag: 'ğŸ‡«ğŸ‡·', phone_code: '+33' },
    { code: 'it', name: 'Italy', name_zh: 'æ„å¤§åˆ©', flag: 'ğŸ‡®ğŸ‡¹', phone_code: '+39' },
    { code: 'es', name: 'Spain', name_zh: 'è¥¿ç­ç‰™', flag: 'ğŸ‡ªğŸ‡¸', phone_code: '+34' },
    { code: 'ru', name: 'Russia', name_zh: 'ä¿„ç½—æ–¯', flag: 'ğŸ‡·ğŸ‡º', phone_code: '+7' },
    { code: 'br', name: 'Brazil', name_zh: 'å·´è¥¿', flag: 'ğŸ‡§ğŸ‡·', phone_code: '+55' },
    { code: 'mx', name: 'Mexico', name_zh: 'å¢¨è¥¿å“¥', flag: 'ğŸ‡²ğŸ‡½', phone_code: '+52' },
    { code: 'ae', name: 'United Arab Emirates', name_zh: 'é˜¿è”é…‹', flag: 'ğŸ‡¦ğŸ‡ª', phone_code: '+971' },
    { code: 'th', name: 'Thailand', name_zh: 'æ³°å›½', flag: 'ğŸ‡¹ğŸ‡­', phone_code: '+66' },
    { code: 'vn', name: 'Vietnam', name_zh: 'è¶Šå—', flag: 'ğŸ‡»ğŸ‡³', phone_code: '+84' },
    { code: 'ph', name: 'Philippines', name_zh: 'è²å¾‹å®¾', flag: 'ğŸ‡µğŸ‡­', phone_code: '+63' },
    { code: 'my', name: 'Malaysia', name_zh: 'é©¬æ¥è¥¿äºš', flag: 'ğŸ‡²ğŸ‡¾', phone_code: '+60' },
    { code: 'id', name: 'Indonesia', name_zh: 'å°åº¦å°¼è¥¿äºš', flag: 'ğŸ‡®ğŸ‡©', phone_code: '+62' },
    { code: 'nz', name: 'New Zealand', name_zh: 'æ–°è¥¿å…°', flag: 'ğŸ‡³ğŸ‡¿', phone_code: '+64' },
    { code: 'ch', name: 'Switzerland', name_zh: 'ç‘å£«', flag: 'ğŸ‡¨ğŸ‡­', phone_code: '+41' },
    { code: 'nl', name: 'Netherlands', name_zh: 'è·å…°', flag: 'ğŸ‡³ğŸ‡±', phone_code: '+31' },
    { code: 'se', name: 'Sweden', name_zh: 'ç‘å…¸', flag: 'ğŸ‡¸ğŸ‡ª', phone_code: '+46' },
    { code: 'no', name: 'Norway', name_zh: 'æŒªå¨', flag: 'ğŸ‡³ğŸ‡´', phone_code: '+47' },
    { code: 'dk', name: 'Denmark', name_zh: 'ä¸¹éº¦', flag: 'ğŸ‡©ğŸ‡°', phone_code: '+45' },
    { code: 'fi', name: 'Finland', name_zh: 'èŠ¬å…°', flag: 'ğŸ‡«ğŸ‡®', phone_code: '+358' },
    { code: 'be', name: 'Belgium', name_zh: 'æ¯”åˆ©æ—¶', flag: 'ğŸ‡§ğŸ‡ª', phone_code: '+32' },
    { code: 'at', name: 'Austria', name_zh: 'å¥¥åœ°åˆ©', flag: 'ğŸ‡¦ğŸ‡¹', phone_code: '+43' },
    { code: 'pl', name: 'Poland', name_zh: 'æ³¢å…°', flag: 'ğŸ‡µğŸ‡±', phone_code: '+48' },
    { code: 'cz', name: 'Czech Republic', name_zh: 'æ·å…‹', flag: 'ğŸ‡¨ğŸ‡¿', phone_code: '+420' },
    { code: 'ie', name: 'Ireland', name_zh: 'çˆ±å°”å…°', flag: 'ğŸ‡®ğŸ‡ª', phone_code: '+353' },
    { code: 'pt', name: 'Portugal', name_zh: 'è‘¡è„ç‰™', flag: 'ğŸ‡µğŸ‡¹', phone_code: '+351' },
    { code: 'gr', name: 'Greece', name_zh: 'å¸Œè…Š', flag: 'ğŸ‡¬ğŸ‡·', phone_code: '+30' },
    { code: 'tr', name: 'Turkey', name_zh: 'åœŸè€³å…¶', flag: 'ğŸ‡¹ğŸ‡·', phone_code: '+90' },
    { code: 'sa', name: 'Saudi Arabia', name_zh: 'æ²™ç‰¹é˜¿æ‹‰ä¼¯', flag: 'ğŸ‡¸ğŸ‡¦', phone_code: '+966' },
    { code: 'za', name: 'South Africa', name_zh: 'å—é', flag: 'ğŸ‡¿ğŸ‡¦', phone_code: '+27' },
    { code: 'eg', name: 'Egypt', name_zh: 'åŸƒåŠ', flag: 'ğŸ‡ªğŸ‡¬', phone_code: '+20' },
    { code: 'ng', name: 'Nigeria', name_zh: 'å°¼æ—¥åˆ©äºš', flag: 'ğŸ‡³ğŸ‡¬', phone_code: '+234' },
    { code: 'ar', name: 'Argentina', name_zh: 'é˜¿æ ¹å»·', flag: 'ğŸ‡¦ğŸ‡·', phone_code: '+54' },
    { code: 'cl', name: 'Chile', name_zh: 'æ™ºåˆ©', flag: 'ğŸ‡¨ğŸ‡±', phone_code: '+56' },
    { code: 'co', name: 'Colombia', name_zh: 'å“¥ä¼¦æ¯”äºš', flag: 'ğŸ‡¨ğŸ‡´', phone_code: '+57' },
    { code: 'pe', name: 'Peru', name_zh: 'ç§˜é²', flag: 'ğŸ‡µğŸ‡ª', phone_code: '+51' },
    { code: 've', name: 'Venezuela', name_zh: 'å§”å†…ç‘æ‹‰', flag: 'ğŸ‡»ğŸ‡ª', phone_code: '+58' },
    { code: 'ua', name: 'Ukraine', name_zh: 'ä¹Œå…‹å…°', flag: 'ğŸ‡ºğŸ‡¦', phone_code: '+380' },
    { code: 'ro', name: 'Romania', name_zh: 'ç½—é©¬å°¼äºš', flag: 'ğŸ‡·ğŸ‡´', phone_code: '+40' },
    { code: 'hu', name: 'Hungary', name_zh: 'åŒˆç‰™åˆ©', flag: 'ğŸ‡­ğŸ‡º', phone_code: '+36' },
    { code: 'il', name: 'Israel', name_zh: 'ä»¥è‰²åˆ—', flag: 'ğŸ‡®ğŸ‡±', phone_code: '+972' },
    { code: 'pk', name: 'Pakistan', name_zh: 'å·´åŸºæ–¯å¦', flag: 'ğŸ‡µğŸ‡°', phone_code: '+92' },
    { code: 'bd', name: 'Bangladesh', name_zh: 'å­ŸåŠ æ‹‰å›½', flag: 'ğŸ‡§ğŸ‡©', phone_code: '+880' },
    { code: 'lk', name: 'Sri Lanka', name_zh: 'æ–¯é‡Œå…°å¡', flag: 'ğŸ‡±ğŸ‡°', phone_code: '+94' },
    { code: 'mm', name: 'Myanmar', name_zh: 'ç¼…ç”¸', flag: 'ğŸ‡²ğŸ‡²', phone_code: '+95' },
    { code: 'kh', name: 'Cambodia', name_zh: 'æŸ¬åŸ”å¯¨', flag: 'ğŸ‡°ğŸ‡­', phone_code: '+855' },
    { code: 'mo', name: 'Macau', name_zh: 'æ¾³é—¨', flag: 'ğŸ‡²ğŸ‡´', phone_code: '+853' }
];

// æŒ‰ä¸­æ–‡åç§°æ’åº
export const sortedCountriesWithPhoneCodes = [...countriesWithPhoneCodes].sort((a, b) =>
    a.name_zh.localeCompare(b.name_zh, 'zh-CN')
);

// å¸¸ç”¨å›½å®¶ï¼ˆå¯ä»¥æ”¾åœ¨åˆ—è¡¨é¡¶éƒ¨ï¼‰
export const popularCountries = ['cn', 'us', 'au', 'sg', 'hk', 'jp', 'kr', 'uk', 'ca', 'tw'];

// è·å–æŒ‰äººæ°”æ’åºçš„å›½å®¶åˆ—è¡¨
export function getCountriesWithPopularFirst() {
    const popular = countriesWithPhoneCodes.filter(c => popularCountries.includes(c.code));
    const others = countriesWithPhoneCodes.filter(c => !popularCountries.includes(c.code));
    return [...popular, ...others];
}

// æ ¹æ®ç”µè¯å·ç æ‰¾å‡ºå¯¹åº”çš„å›½å®¶ä»£ç 
export function findCountryByPhoneNumber(phoneNumber) {
    if (!phoneNumber) return null;

    // æŒ‰phone_codeé•¿åº¦é™åºæ’åºï¼Œç¡®ä¿æ›´é•¿çš„ä»£ç å…ˆåŒ¹é…ï¼ˆå¦‚+1246æ¯”+1ï¼‰
    const sortedByCodeLength = [...countriesWithPhoneCodes].sort((a, b) =>
        b.phone_code.length - a.phone_code.length
    );

    return sortedByCodeLength.find(country =>
        phoneNumber.startsWith(country.phone_code)
    );
}

// æ ¼å¼åŒ–ç”µè¯å·ç æ˜¾ç¤º
export function formatPhoneNumber(phoneNumber) {
    if (!phoneNumber) return '';

    const country = findCountryByPhoneNumber(phoneNumber);
    if (!country) return phoneNumber;

    const localNumber = phoneNumber.substring(country.phone_code.length);

    // æ ¹æ®ä¸åŒå›½å®¶æ ¼å¼åŒ–
    switch (country.code) {
        case 'cn':
            // ä¸­å›½: +86 138 0000 0000
            return localNumber.replace(/(\d{3})(\d{4})(\d{4})/, `${country.phone_code} $1 $2 $3`);
        case 'us':
        case 'ca':
            // ç¾å›½/åŠ æ‹¿å¤§: +1 (555) 123-4567
            return localNumber.replace(/(\d{3})(\d{3})(\d{4})/, `${country.phone_code} ($1) $2-$3`);
        case 'au':
            // æ¾³å¤§åˆ©äºš: +61 4XX XXX XXX
            return localNumber.replace(/(\d{3})(\d{3})(\d{3})/, `${country.phone_code} $1 $2 $3`);
        case 'uk':
            // è‹±å›½: +44 20 1234 5678
            return localNumber.replace(/(\d{2})(\d{4})(\d{4})/, `${country.phone_code} $1 $2 $3`);
        case 'jp':
            // æ—¥æœ¬: +81 90-1234-5678
            return localNumber.replace(/(\d{2})(\d{4})(\d{4})/, `${country.phone_code} $1-$2-$3`);
        default:
            // é»˜è®¤æ ¼å¼: +XX XXX XXX XXXX
            return `${country.phone_code} ${localNumber}`;
    }
}

export default countriesWithPhoneCodes;